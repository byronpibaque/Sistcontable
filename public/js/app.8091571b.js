(function(t){function e(e){for(var o,r,n=e[0],c=e[1],l=e[2],d=0,v=[];d<n.length;d++)r=n[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&v.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(v.length)v.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(o=!1)}o&&(s.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},i={app:0},s=[];function r(t){return n.p+"js/"+({about:"about"}[t]||t)+"."+{about:"a3c72e89"}[t]+".js"}function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,o){a=i[t]=[e,o]}));e.push(a[2]=o);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.src=r(t);var l=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",l.name="ChunkLoadError",l.type=o,l.request=s,a[1](l)}i[t]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("64a9")},"039a":function(t,e,a){"use strict";a("3760")},"17dd":function(t,e,a){t.exports=a.p+"img/INTEGRA.f989e20c.png"},3760:function(t,e,a){},"3c3d":function(t,e,a){"use strict";a("bcf9")},4678:function(t,e,a){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=s(t);return a(e)}function s(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=s,t.exports=i,i.id="4678"},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var o=a("2b0e"),i=a("bb716"),s=(a("da64"),a("2e15")),r=a.n(s);o["a"].use(i["a"],{theme:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},options:{customProperties:!0},iconfont:"mdi",lang:{locales:{es:r.a},current:"es"}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[t.logueado?a("v-navigation-drawer",{attrs:{fixed:"",clipped:t.$vuetify.breakpoint.mdAndUp,app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[[a("v-list-tile",{attrs:{to:{name:"home"}}},[a("v-list-tile-action",[a("v-icon",[t._v("home")])],1),a("v-list-tile-title",[t._v("Inicio")])],1)],[t.esAdministrador||t.esGerente||t.esGuardaAlmacen||t.esSupervisor?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Bodega")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"compras"}}},[a("v-list-tile-action",[a("v-icon",[t._v("post_add")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Compras")])],1)],1),a("v-list-tile",{staticClass:"orange--text",attrs:{to:{name:"cuarentena"}}},[a("v-list-tile-action",[a("v-icon",[t._v("dashboard")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Cuarentena")])],1)],1),a("v-list-tile",{staticClass:"purple--text",attrs:{to:{name:"asignarperchas"}}},[a("v-list-tile-action",[a("v-icon",[t._v("trending_flat")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Asignacion de perchas")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"perchas"}}},[a("v-list-tile-action",[a("v-icon",[t._v("precision_manufacturing")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Perchas")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"inventario"}}},[a("v-list-tile-action",[a("v-icon",[t._v("inventory")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Inventario")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"crearfabricantes"}}},[a("v-list-tile-action",[a("v-icon",[t._v("precision_manufacturing")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Fabricantes")])],1)],1)],1):t._e(),t.esAdministrador||t.esGerente||t.esGuardaAlmacen||t.esSupervisor||t.esFacturacion||t.esContabilidad||t.esComprasPublicas?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Personas")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"proveedores"}}},[a("v-list-tile-action",[a("v-icon",[t._v("people")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Proveedores")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"clientes"}}},[a("v-list-tile-action",[a("v-icon",[t._v("people")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Clientes")])],1)],1)],1):t._e(),t.esAdministrador||t.esGerente||t.esGuardaAlmacen||t.esSupervisor||t.esFacturacion||t.esContabilidad||t.esComprasPublicas?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Documentos Comerciales")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"facturas"}}},[a("v-list-tile-action",[a("v-icon",[t._v("article")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Facturas")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"retenciones"}}},[a("v-list-tile-action",[a("v-icon",[t._v("description")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Retenciones")])],1)],1)],1):t._e(),t.esAdministrador||t.esGerente||t.esSupervisor?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Administración")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"creardistribuidores"}}},[a("v-list-tile-action",[a("v-icon",[t._v("supervisor_account")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Distribuidores")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"crearbodegas"}}},[a("v-list-tile-action",[a("v-icon",[t._v("admin_panel_settings")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Bodegas")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"usuarios"}}},[a("v-list-tile-action",[a("v-icon",[t._v("people")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Usuarios")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"secuenciales"}}},[a("v-list-tile-action",[a("v-icon",[t._v("rotate_right")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Secuenciales")])],1)],1)],1):t._e()]],2)],1):t._e(),a("v-toolbar",{attrs:{id:"tool",dark:"",app:"","clipped-left":t.$vuetify.breakpoint.mdAndUp,fixed:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3",staticStyle:{width:"300px"}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("span",{staticClass:"hidden-sm-and-down"},[t._v("MENÚ")])],1),t.$store.state.usuario?a("span",{staticClass:"hidden-sm-and-down"},[t._v("Usuario: "+t._s(t.usuario()))]):t._e(),a("v-spacer"),t.$store.state.usuario?a("span",{staticClass:"hidden-sm-and-down"},[t._v("Distribuidor: "+t._s(t.farmacia()))]):t._e(),a("v-spacer"),t.logueado?a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.salir()}}},[a("v-icon",[t._v("logout")])],1):a("v-btn",{attrs:{icon:"",to:{name:t.login}}},[a("v-icon",[t._v("apps")])],1)],1),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)],1),a("v-footer",{attrs:{dark:"",height:"auto"}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-card",{staticClass:"white--text",attrs:{flat:"",tile:"",id:"tool"}},[a("v-card-text",{staticClass:"white--text pt-0"},[t._v("IntegraCont ©2021")])],1)],1)],1)],1)],1)},c=[],l=(a("4917"),a("bc3a")),d=a.n(l),u={name:"App",data:function(){return{drawer:!0,login:"",user:"",farma:""}},computed:{logueado:function(){return this.$store.state.usuario},esAdministrador:function(){return this.$store.state.usuario&&"609ed2679b1f0569cef1bf4d"==this.$store.state.usuario.rol},esGerente:function(){return this.$store.state.usuario&&"609ed45086d0416b4a050c57"==this.$store.state.usuario.rol},esGuardaAlmacen:function(){return this.$store.state.usuario&&"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol},esContabilidad:function(){return this.$store.state.usuario&&"609ed47b86d0416b4a050c59"==this.$store.state.usuario.rol},esComprasPublicas:function(){return this.$store.state.usuario&&"609ed48086d0416b4a050c5a"==this.$store.state.usuario.rol},esSupervisor:function(){return this.$store.state.usuario&&"609ed48786d0416b4a050c5b"==this.$store.state.usuario.rol},esFacturacion:function(){return this.$store.state.usuario&&"60c0e96c13a9bc08b085f378"==this.$store.state.usuario.rol}},created:function(){this.$store.dispatch("autoLogin")},methods:{farmacia:function(){var t=this,e={Token:this.$store.state.token},a=this.$store.state.usuario.codigoDistribuidor,o={headers:e};return void 0!=a?d.a.get("distribuidor/query?_id="+a,o).then((function(e){t.farma=e.data.nombreComercial})).catch((function(t){console.log(t)})):t.farma="ADMINISTRADOR",this.farma},usuario:function(){return this.$store.state.usuario.usuario},isMobile:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/BlackBerry/i))},salir:function(){this.$store.dispatch("salir"),this.Farmacia="",this.NombreUsuario="",this.usuarios=[],this.farmacias=[]}}},v=u,m=(a("034f"),a("2877")),p=a("6544"),h=a.n(p),f=a("7496"),b=a("8336"),x=a("b0af"),g=a("99d9"),_=a("a523"),C=a("549c"),A=a("0e8f"),D=a("553a"),I=a("132d"),E=a("a722"),k=a("8860"),O=a("56b0"),N=a("ba95"),S=a("40fe"),T=a("5d23"),R=a("f774"),j=a("0789"),P=a("9910"),M=a("71d9"),V=a("706c"),y=a("2a7f"),F=Object(m["a"])(v,n,c,!1,null,null,null),$=F.exports;h()(F,{VApp:f["a"],VBtn:b["a"],VCard:x["a"],VCardText:g["b"],VContainer:_["a"],VContent:C["a"],VFlex:A["a"],VFooter:D["a"],VIcon:I["a"],VLayout:E["a"],VList:k["a"],VListGroup:O["a"],VListTile:N["a"],VListTileAction:S["a"],VListTileContent:T["a"],VListTileTitle:T["b"],VNavigationDrawer:R["a"],VSlideYTransition:j["d"],VSpacer:P["a"],VToolbar:M["a"],VToolbarSideIcon:V["a"],VToolbarTitle:y["a"]});var U=a("8c4f"),w=a("2f62"),z=a("04e1"),L=a.n(z);o["a"].use(w["a"]);var B=new w["a"].Store({state:{token:null,usuario:null},mutations:{setToken:function(t,e){t.token=e},setUsuario:function(t,e){t.usuario=e}},actions:{guardarToken:function(t,e){var a=t.commit;a("setToken",e),a("setUsuario",L()(e)),localStorage.setItem("token",e)},autoLogin:function(t){var e=t.commit,a=localStorage.getItem("token");a&&(e("setToken",a),e("setUsuario",L()(a))),Ze.push({name:"home"})},salir:function(t){var e=t.commit;e("setToken",null),e("setUsuario",null),localStorage.removeItem("token"),Ze.push({name:"login"})}}}),G=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-flex",[o("v-img",{staticClass:"my-3",attrs:{src:a("17dd"),contain:"",height:"400"}})],1)},Y=[],q=a("adda"),H={},J=Object(m["a"])(H,G,Y,!1,null,null,null),Z=J.exports;h()(J,{VFlex:A["a"],VImg:q["a"]});var X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"principal"}},[a("v-layout",{attrs:{"justify-center":""}},[a("div",{attrs:{id:"login"}},[a("div",{attrs:{id:"cajas"}},[a("v-flex",[a("v-text-field",{attrs:{"prepend-icon":"account_circle",autofocus:"",color:"accent",label:"Usuario",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-flex",[a("v-text-field",{attrs:{"prepend-icon":"generating_tokens",autofocus:"",color:"accent",label:"Token de acceso",required:""},model:{value:t.codigoDistribuidor,callback:function(e){t.codigoDistribuidor=e},expression:"codigoDistribuidor"}})],1),a("v-flex",[a("v-text-field",{attrs:{"prepend-icon":"lock",type:"password",color:"accent",label:"Contraseña",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.ingresar.apply(null,arguments)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-flex",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-btn",{staticClass:"boton",on:{click:t.ingresar}},[t._v("INICIAR")])],1)],1)],1)])])],1)},Q=[],K=(a("96cf"),a("1da1")),W=(a("3c43"),a("3d20")),tt=a.n(W),et={created:function(){},computed:{},data:function(){return{codigoDistribuidor:"",email:"",password:"",errorM:null,ipobt:"",ipalmacenada:"",val:[]}},methods:{comprobacion:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e!=a){t.next=4;break}return t.abrupt("return",!0);case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}(),ingresar:function(){var t=this;d.a.post("usuario/login?data="+this.email+"&clave="+this.password+"&codigoDistribuidor="+this.codigoDistribuidor).then((function(e){e.data.user.login.codigoDistribuidor,t.$store.dispatch("guardarToken",e.data.tokenReturn),t.$router.push({name:"home"})})).catch((function(e){500==e.response.status?t.errorM=e.response.data.message:t.errorM="Ocurrio un error en el servidor"}))}}},at=et,ot=(a("039a"),a("2677")),it=Object(m["a"])(at,X,Q,!1,null,null,null),st=it.exports;h()(it,{VBtn:b["a"],VFlex:A["a"],VLayout:E["a"],VTextField:ot["a"]});var rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Proveedores")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"RUC/CI"},model:{value:t.ruc,callback:function(e){t.ruc=e},expression:"ruc"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Razon Social"},model:{value:t.razonsocial,callback:function(e){t.razonsocial=e},expression:"razonsocial"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Direccion"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("span",[t._v("CONTACTO")]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Nombre de contacto"},model:{value:t.nombresC,callback:function(e){t.nombresC=e},expression:"nombresC"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Telefono de contacto"},model:{value:t.telefonoC,callback:function(e){t.telefonoC=e},expression:"telefonoC"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Correo de contacto"},model:{value:t.correoC,callback:function(e){t.correoC=e},expression:"correoC"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Activar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Item")]):t._e(),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("activar")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar")]):t._e(),t._v("\n            el item "+t._s(t.adNombre)+"\n          ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("Activar")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("Desactivar")]):t._e()],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cliente,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.razonsocial))]),a("td",[t._v(t._s(e.item.ruc))]),a("td",[t._v(t._s(e.item.direccion))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},nt=[],ct=(a("ac6a"),{data:function(){return{search:"",cliente:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Razon Social",value:"razonsocial",sortable:!0},{text:"RUC",value:"ruc",sortable:!0},{text:"Direccion",value:"direccion",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],editedIndex:-1,_id:"",dialog:!1,ruc:"",razonsocial:"",direccion:"",nombresC:"",telefonoC:"",correoC:"",contacto:[],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("proveedor/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("proveedor/list",a).then((function(e){t.cliente=e.data})).catch((function(t){console.log(t)}))},limpiar:function(){this._id="",this.nombresC="",this.correoC="",this.telefonoC="",this.direccion="",this.razonsocial="",this.ruc="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.ruc.length&&this.validaMensaje.push("*RUC no puede estar vacío."),0==this.razonsocial.length&&this.validaMensaje.push("*Razon Social no puede estar vacío."),0==this.direccion.length&&this.validaMensaje.push("*Direccion no puede estar vacío."),0==this.nombresC.length&&this.validaMensaje.push("*Nombre de contacto no puede estar vacío."),0==this.telefonoC.length&&this.validaMensaje.push("*Telefono de contacto no puede estar vacío."),0==this.correoC.length&&this.validaMensaje.push("*Correo de contaco no puede estar vacío."),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?(this.contacto.push({nombres:this.nombresC,telefono:this.telefonoC,correo:this.correoC}),d.a.put("proveedor/actualizar",{_id:this._id,ruc:t.ruc,razonsocial:t.razonsocial,direccion:t.direccion,contacto:t.contacto,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))):(this.contacto.push({nombres:this.nombresC,telefono:this.telefonoC,correo:this.correoC}),d.a.post("proveedor/add",{ruc:t.ruc,razonsocial:t.razonsocial,direccion:t.direccion,contacto:t.contacto,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))))},editItem:function(t){var e=this;this._id=t._id,this.ruc=t.ruc,this.razonsocial=t.razonsocial,this.direccion=t.direccion,t.contacto.forEach((function(t){e.nombresC=t.nombres,e.correoC=t.correo,e.telefonoC=t.telefono})),this.dialog=!0,this.editedIndex=1},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombres,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this;d.a.put("persona/activate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this;d.a.put("persona/deactivate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()}}}),lt=ct,dt=a("12b2"),ut=a("8fea"),vt=a("169a"),mt=a("ce7e"),pt=Object(m["a"])(lt,rt,nt,!1,null,null,null),ht=pt.exports;h()(pt,{VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Inventario")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-flex",[a("v-btn",{staticStyle:{"background-color":"#87D738"},attrs:{color:"white",small:"",flat:""},on:{click:function(e){t.modaltipoproducto=1,t.listar_tipoproductos()}}},[a("v-icon",[t._v("precision_manufacturing")]),t._v("\n          TIPOS PRODUCTOS\n        ")],1),a("v-btn",{staticStyle:{"background-color":"#D4850C"},attrs:{color:"white",small:"",flat:""},on:{click:function(e){t.modalprincipioactivo=1,t.listar_principiosactivos()}}},[a("v-icon",[t._v("biotech")]),t._v("\n          Principio Activo\n        ")],1),a("v-btn",{staticStyle:{"background-color":"#1AAB60"},attrs:{color:"white",flat:"",small:""},on:{click:function(e){t.modalpresentacion=1,t.listar_presentacion()}}},[a("v-icon",[t._v("colorize")]),t._v("\n          PRESENTACIÓN\n        ")],1),a("v-btn",{staticStyle:{"background-color":"#628C0E"},attrs:{color:"white",flat:"",small:""},on:{click:function(e){t.modalconcentracion=1,t.listar_concentracion()}}},[a("v-icon",[t._v("science")]),t._v("\n          CONCENTRACIÓN\n        ")],1),a("v-btn",{staticStyle:{"background-color":"#D8671E"},attrs:{color:"white",flat:"",small:""},on:{click:function(e){t.modalproducto=1,t.ObtenerTipoProductos(),t.ObtenerConcentraciones(),t.ObtenerPrincipios(),t.ObtenerPresentaciones(),t.listar_productos()}}},[a("v-icon",[t._v("article")]),t._v("\n          PRODUCTOS\n        ")],1)],1),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-flex",[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){t.modalInventario=1,t.obetenerProveedores(),t.obtenerFabricantes(),t.obtenerProductos(),t.obtenerBodega()}}},[a("v-icon",[t._v("save")]),t._v("\n          NUEVO\n        ")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.modaltipoproducto,callback:function(e){t.modaltipoproducto=e},expression:"modaltipoproducto"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGREGAR TIPO DE PRODUCTO")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"edit",label:"Descripcion"},model:{value:t.descripcion_tp,callback:function(e){t.descripcion_tp=e},expression:"descripcion_tp"}}),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.guardar_tipoproductos(t.descripcion_tp)}}},[a("v-icon",[t._v("save")]),t._v("\n                  GUARDAR\n                ")],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_tipoproducto,items:t.ARR_tipoproducto,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.eliminar_tipoproductos(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizar_tipoproductos(e.item)}}},[t._v("refresh")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.descripcion)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modaltipoproducto=0,t.limpiar()}}},[t._v("Cerrar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.modalprincipioactivo,callback:function(e){t.modalprincipioactivo=e},expression:"modalprincipioactivo"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGREGAR PRINCIPIOS ACTIVOS")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"edit",label:"Descripcion"},model:{value:t.descripcion_pa,callback:function(e){t.descripcion_pa=e},expression:"descripcion_pa"}}),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.guardar_principiosactivos(t.descripcion_pa)}}},[a("v-icon",[t._v("save")]),t._v("\n                  GUARDAR\n                ")],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_principioactivo,items:t.ARR_principioactivo,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.eliminar_principiosactivos(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizar_principiosactivos(e.item)}}},[t._v("refresh")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.descripcion)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modalprincipioactivo=0,t.limpiar()}}},[t._v("Cerrar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.modalpresentacion,callback:function(e){t.modalpresentacion=e},expression:"modalpresentacion"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGREGAR PRESENTACIONES")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"edit",label:"Descripcion"},model:{value:t.descripcion_p,callback:function(e){t.descripcion_p=e},expression:"descripcion_p"}}),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.guardar_presentacion(t.descripcion_p)}}},[a("v-icon",[t._v("save")]),t._v("\n                  GUARDAR\n                ")],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_presentacion,items:t.ARR_presentacion,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.eliminar_presentacion(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizar_presentacion(e.item)}}},[t._v("refresh")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.descripcion)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modalpresentacion=0,t.limpiar()}}},[t._v("Cerrar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.modalconcentracion,callback:function(e){t.modalconcentracion=e},expression:"modalconcentracion"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGREGAR CONCENTRACIONES")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"edit",label:"Descripcion"},model:{value:t.descripcion_c,callback:function(e){t.descripcion_c=e},expression:"descripcion_c"}}),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.guardar_concentracion(t.descripcion_c)}}},[a("v-icon",[t._v("save")]),t._v("\n                  GUARDAR\n                ")],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_concentracion,items:t.ARR_concentracion,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.eliminar_concentracion(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizar_concentracion(e.item)}}},[t._v("refresh")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.descripcion)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modalconcentracion=0,t.limpiar()}}},[t._v("Cerrar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"950"},model:{value:t.modalproducto,callback:function(e){t.modalproducto=e},expression:"modalproducto"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGREGAR PRODUCTOS")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-autocomplete",{attrs:{items:t.tipoproductos,label:"Tipo producto"},on:{change:function(e){return t.validarInsumos(t.codigoTipoproducto)}},model:{value:t.codigoTipoproducto,callback:function(e){t.codigoTipoproducto=e},expression:"codigoTipoproducto"}})],1),t.banderainsumo?a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.principioactivos,label:"Principio activo"},model:{value:t.codigoPrincipioactivo,callback:function(e){t.codigoPrincipioactivo=e},expression:"codigoPrincipioactivo"}})],1):t._e(),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-autocomplete",{attrs:{items:t.presentaciones,label:"Presentacion"},model:{value:t.codigoPresentacion,callback:function(e){t.codigoPresentacion=e},expression:"codigoPresentacion"}})],1),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-autocomplete",{attrs:{items:t.concentraciones,label:"Concentracion"},model:{value:t.codigoConcentracion,callback:function(e){t.codigoConcentracion=e},expression:"codigoConcentracion"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:t.descripcion_p,callback:function(e){t.descripcion_p=e},expression:"descripcion_p"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"Detalle concentracion"},model:{value:t.detalleConcentracion,callback:function(e){t.detalleConcentracion=e},expression:"detalleConcentracion"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"C. neto"},model:{value:t.contenidoNeto,callback:function(e){t.contenidoNeto=e},expression:"contenidoNeto"}})],1),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"F x Caja"},model:{value:t.fraccionCaja,callback:function(e){t.fraccionCaja=e},expression:"fraccionCaja"}})],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.guardarProducto()}}},[a("v-icon",[t._v("save")]),t._v("\n              GUARDAR\n            ")],1),a("v-btn",{staticClass:"primary",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.actualizarProducto()}}},[a("v-icon",[t._v("save")]),t._v("\n              ACTUALIZAR\n            ")],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_producto,items:t.ARR_producto,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.eliminar_producto(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.cargardatosActualizar(e.item)}}},[t._v("edit")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.descripcion+" "+e.item.detalleConcentracion+e.item.codigoConcentracion.descripcion)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.fraccionCaja)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.contenidoNeto)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.detalleConcentracion+e.item.codigoConcentracion.descripcion)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.codigoPresentacion.descripcion)+"\n                  ")]),e.item.codigoPrincipioactivo?a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.codigoPrincipioactivo.descripcion)+"\n                  ")]):a("td",{staticClass:"text-xs-center red--text"},[t._v("\n                    NO REGISTRA PRINCIPIO ACTIVO\n                  ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.codigoTipoproducto.descripcion)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modalproducto=0,t.limpiar()}}},[t._v("Cerrar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"950"},model:{value:t.modalInventario,callback:function(e){t.modalInventario=e},expression:"modalInventario"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t.banderaActualizar?a("span",{staticClass:"headline"},[t._v("-EDITAR ")]):a("span",{staticClass:"headline"},[t._v("-AGREGAR ")]),t._v("\n        - PRODUCTOS AL INVENTARIO")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-autocomplete",{attrs:{items:t.ivas,label:"Iva?"},model:{value:t.iva,callback:function(e){t.iva=e},expression:"iva"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.productos,label:"Producto"},on:{change:function(e){return t.obtenerProductoInfo(t.codigoProducto)}},model:{value:t.codigoProducto,callback:function(e){t.codigoProducto=e},expression:"codigoProducto"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.fabricantes,label:"Laboratorio fabricante"},model:{value:t.codigoFabricante,callback:function(e){t.codigoFabricante=e},expression:"codigoFabricante"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.proveedores,label:"Proveedor"},model:{value:t.codigoProveedor,callback:function(e){t.codigoProveedor=e},expression:"codigoProveedor"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{disabled:"",label:"Fraccion x caja"},model:{value:t.fcajaP,callback:function(e){t.fcajaP=e},expression:"fcajaP"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{disabled:"",label:"Concentracion"},model:{value:t.concentracionP,callback:function(e){t.concentracionP=e},expression:"concentracionP"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{disabled:"",label:"Presentacion"},model:{value:t.presentacionP,callback:function(e){t.presentacionP=e},expression:"presentacionP"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"Código Barra"},model:{value:t.codigoBarra,callback:function(e){t.codigoBarra=e},expression:"codigoBarra"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"Código Lote"},model:{value:t.codigoLote,callback:function(e){t.codigoLote=e},expression:"codigoLote"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"Fecha elaboracion"},model:{value:t.fechaElaboracion,callback:function(e){t.fechaElaboracion=e},expression:"fechaElaboracion"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"Fecha caducidad"},model:{value:t.fechaCaducidad,callback:function(e){t.fechaCaducidad=e},expression:"fechaCaducidad"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs7:"",sm7:"",md7:""}},[a("v-text-field",{attrs:{label:"Nombre Comercial"},model:{value:t.nombreComercial,callback:function(e){t.nombreComercial=e},expression:"nombreComercial"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"Fracciones totales"},model:{value:t.fraccionesTotales,callback:function(e){t.fraccionesTotales=e},expression:"fraccionesTotales"}})],1),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{disabled:"",label:"Ubicacion en percha"},model:{value:t.percha,callback:function(e){t.percha=e},expression:"percha"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"Costo Neto"},model:{value:t.costoNeto,callback:function(e){t.costoNeto=e},expression:"costoNeto"}})],1),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"PVM"},model:{value:t.pvm,callback:function(e){t.pvm=e},expression:"pvm"}})],1),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"PVP"},on:{change:function(e){return t.calcularPunit()}},model:{value:t.pvp,callback:function(e){t.pvp=e},expression:"pvp"}})],1),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"P. unitario"},model:{value:t.punit,callback:function(e){t.punit=e},expression:"punit"}})],1),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"Descuento"},model:{value:t.descuento,callback:function(e){t.descuento=e},expression:"descuento"}})],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.agregarAinventario()}}},[a("v-icon",[t._v("save")]),t._v("\n              GUARDAR\n            ")],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modalInventario=0,t.limpiarInventario()}}},[t._v("Cerrar")])],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_inventario,items:t.ARR_inventario,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.eliminar_inventario(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizarProductoInventario(e.item)}}},[t._v("edit")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.codigoProducto.descripcion)+"\n                  ")]),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.nombreComercial)+"\n                  ")]),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.codigoBarra)+"\n                  ")]),a("td",[t._v("\n                    "+t._s(e.item.codigoLote)+"\n                  ")]),a("td",[t._v("\n                    "+t._s(e.item.fraccionesTotales)+"\n                  ")]),a("td",[t._v("\n                    "+t._s(e.item.codigoProducto.fraccionCaja)+"\n                  ")]),a("td",[t._v("\n                    "+t._s(e.item.percha)+"\n                  ")]),a("td",[t._v("\n                    "+t._s(e.item.numComprobante)+"\n                  ")]),a("td",[t._v("\n                    "+t._s(e.item.codigoFabricante.razonsocial)+"\n                  ")]),a("td",[t._v("\n                    "+t._s(e.item.codigoProveedor.razonsocial)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},bt=[],xt=a("ade3"),gt=a("c1df"),_t=a.n(gt),Ct=(a("e511"),a("0da4"),{watch:{},props:{},data:function(){var t;return t={percha:"",banderainsumo:!0,search:"",valida:0,validaMensaje:[],descripcion_tp:"",modaltipoproducto:0,ARR_tipoproducto:[],CAB_tipoproducto:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!0}],descripcion_pa:"",modalprincipioactivo:0,ARR_principioactivo:[],CAB_principioactivo:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!0}],descripcion_p:"",modalpresentacion:0,ARR_presentacion:[],CAB_presentacion:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!0}],descripcion_c:"",modalconcentracion:0,ARR_concentracion:[],CAB_concentracion:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!0}],modalproducto:0,ARR_producto:[],CAB_producto:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!0},{text:"FxCaja",value:"fraccionCaja",sortable:!1},{text:"Contenido Neto",value:"contenidoNeto",sortable:!1},{text:"Concentracion",value:"detalleConcentracion",sortable:!1},{text:"Presentacion",value:"codigoPresentacion.descripcion",sortable:!1},{text:"Principio Actvo.",value:"codigoPrincipioactivo",sortable:!1},{text:"Tipo producto",value:"codigoTipoproducto",sortable:!1}]},Object(xt["a"])(t,"descripcion_p",""),Object(xt["a"])(t,"fraccionCaja",0),Object(xt["a"])(t,"contenidoNeto",""),Object(xt["a"])(t,"detalleConcentracion",""),Object(xt["a"])(t,"codigoTipoproducto",""),Object(xt["a"])(t,"tipoproductos",[]),Object(xt["a"])(t,"codigoPrincipioactivo",""),Object(xt["a"])(t,"principioactivos",[]),Object(xt["a"])(t,"codigoPresentacion",""),Object(xt["a"])(t,"presentaciones",[]),Object(xt["a"])(t,"codigoConcentracion",""),Object(xt["a"])(t,"concentraciones",[]),Object(xt["a"])(t,"idActualizar",""),Object(xt["a"])(t,"ARR_inventario",[]),Object(xt["a"])(t,"CAB_inventario",[{text:"Opciones",value:"opciones",sortable:!1},{text:"Producto",value:"codigoProducto.descripcion",sortable:!0},{text:"Nombre Comercial",value:"nombreComercial",sortable:!0},{text:"Codigo Barra",value:"codigoBarra",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Fracciones T.",value:"fraccionesTotales",sortable:!1},{text:"Fracciones * C.",value:"codigoProducto.fraccionCaja",sortable:!1},{text:"Ubicacion en percha",value:"percha",sortable:!1},{text:"# comprobante",value:"numComprobante",sortable:!1},{text:"Lab. Fab.",value:"codigoFabricante.razonsocial",sortable:!1},{text:"Proveedor",value:"codigoProveedor.razonsocial",sortable:!1}]),Object(xt["a"])(t,"modalInventario",0),Object(xt["a"])(t,"codigoBarra",""),Object(xt["a"])(t,"codigoLote",""),Object(xt["a"])(t,"nombreComercial",""),Object(xt["a"])(t,"fraccionesTotales",0),Object(xt["a"])(t,"fechaCaducidad",""),Object(xt["a"])(t,"fechaElaboracion",""),Object(xt["a"])(t,"iva",0),Object(xt["a"])(t,"ivas",[{text:"SI",value:1},{text:"NO",value:0}]),Object(xt["a"])(t,"descuento",0),Object(xt["a"])(t,"pvp",0),Object(xt["a"])(t,"pvm",0),Object(xt["a"])(t,"punit",0),Object(xt["a"])(t,"costoNeto",0),Object(xt["a"])(t,"codigoBodega",""),Object(xt["a"])(t,"codigoFabricante",""),Object(xt["a"])(t,"codigoProveedor",""),Object(xt["a"])(t,"codigoProducto",""),Object(xt["a"])(t,"productos",[]),Object(xt["a"])(t,"proveedores",[]),Object(xt["a"])(t,"fabricantes",[]),Object(xt["a"])(t,"banderaActualizar",0),Object(xt["a"])(t,"idInventarioActualizar",""),Object(xt["a"])(t,"fcajaP",0),Object(xt["a"])(t,"presentacionP",""),Object(xt["a"])(t,"concentracionP",""),t},created:function(){this.listarProductosInventario()},methods:{calcularPunit:function(){this.punit=(parseFloat(this.pvp)/parseInt(this.fcajaP)).toFixed(5)},eliminar_inventario:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("inventario/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listarProductosInventario()})).catch((function(t){console.log(t)}))},obtenerProductoInfo:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("producto/query?_id="+t,o).then((function(t){e.fcajaP=t.data.fraccionCaja,e.concentracionP=t.data.detalleConcentracion+t.data.codigoConcentracion.descripcion,e.presentacionP=t.data.codigoPresentacion.descripcion})).catch((function(t){console.log(t)}))},actualizarProductoInventario:function(t){this.obetenerProveedores(),this.obtenerFabricantes(),this.obtenerProductos(),this.banderaActualizar=1,this.idInventarioActualizar=t._id,this.codigoBarra=t.codigoBarra,this.codigoLote=t.codigoLote,this.nombreComercial=t.nombreComercial,this.fraccionesTotales=t.fraccionesTotales,this.fechaCaducidad=t.fechaCaducidad,this.iva=t.iva,this.descuento=t.descuento,this.pvp=t.pvp,this.pvm=t.pvm,this.punit=t.punit,this.percha=t.percha,this.costoNeto=t.costoNeto,this.codigoFabricante=t.codigoFabricante._id,this.codigoProveedor=t.codigoProveedor._id,this.codigoProducto=t.codigoProducto._id,this.obtenerProductoInfo(t.codigoProducto._id),this.fechaElaboracion=t.fechaElaboracion,this.modalInventario=1},obtenerBodega2:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,t.next=5,d.a.get("bodega/query?codigoDistribuidor="+o,a);case 5:return i=t.sent,t.abrupt("return",i.data._id);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),listarProductosInventario:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.obtenerBodega2();o.then((function(e){d.a.get("inventario/list?codigoBodega="+e,a).then((function(e){t.ARR_inventario=e.data})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},limpiarInventario:function(){this.idInventarioActualizar="",this.codigoBarra="",this.codigoLote="",this.nombreComercial="",this.fraccionesTotales=0,this.fechaCaducidad="",this.iva=0,this.descuento=0,this.pvp=0,this.pvm=0,this.punit=0,this.costoNeto=0,this.codigoFabricante="",this.codigoProveedor="",this.codigoProducto="",this.fechaElaboracion="",this.codigoBodega=""},validar_inventario:function(){return this.valida=0,this.validaMensaje=[],isNaN(this.pvp)&&this.validaMensaje.push("PVP debe ser solo numeros"),isNaN(this.costoNeto)&&this.validaMensaje.push("COSTO NETO debe ser solo numeros"),isNaN(this.punit)&&this.validaMensaje.push("PRECIO UNITARIO debe ser solo numeros"),isNaN(this.descuento)&&this.validaMensaje.push("DESCUENTO debe ser solo numeros"),0==this.pvp.length&&this.validaMensaje.push("PVP no puede estar vacío."),0==this.costoNeto.length&&this.validaMensaje.push("COSTO NETO no puede estar vacío."),0==this.pvm.length&&this.validaMensaje.push("PVM no puede estar vacío."),0==this.punit.length&&this.validaMensaje.push("PRECIO UNITARIO no puede estar vacío."),0==this.descuento.length&&this.validaMensaje.push("DESCUENTO no puede estar vacío."),0==this.fechaCaducidad.length&&this.validaMensaje.push("FECHA CADUCIDAD no puede estar vacío."),0==this.fechaElaboracion.length&&this.validaMensaje.push("FECHA ELABORACION no puede estar vacío."),0==this.codigoBarra.length&&this.validaMensaje.push("Debe ingresar el codigo de barras."),0==this.codigoLote.length&&this.validaMensaje.push("Debe ingresar el codigo de lote."),0==this.nombreComercial.length&&this.validaMensaje.push("Debe ingresar el nombre comercial."),0==this.iva.length&&this.validaMensaje.push("Debe escoger si el producto graba o no IVA."),""==this.codigoFabricante&&this.validaMensaje.push("Debe escoger un laboratorio fabricante para el producto a agregar."),""==this.codigoProveedor&&this.validaMensaje.push("Debe escoger un proveedor para el producto que va a agregar."),this.validaMensaje.length&&(this.valida=1),this.valida},agregarAinventario:function(){var t=this,e=this,a={Token:this.$store.state.token},o={headers:a};if(!this.validar_inventario()){var i=this.obtenerBodega2();i.then((function(a){var i=t.nombreComercial,s=t.codigoLote;t.banderaActualizar?d.a.put("inventario/actualizar",{_id:t.idInventarioActualizar,codigoBarra:t.codigoBarra,codigoLote:s.toUpperCase(),nombreComercial:i.toUpperCase(),fraccionesTotales:t.fraccionesTotales,fechaCaducidad:t.fechaCaducidad,fechaElaboracion:t.fechaElaboracion,iva:t.iva,descuento:t.descuento,pvp:t.pvp,pvm:t.pvm,punit:t.punit,costoNeto:t.costoNeto,codigoUsuario:t.$store.state.usuario._id,codigoBodega:a,codigoFabricante:t.codigoFabricante,codigoProveedor:t.codigoProveedor,codigoProducto:t.codigoProducto},o).then((function(t){200==t.status?(tt.a.fire("Noticias!","Se actualizó correctamente el producto.","success"),e.limpiarInventario(),e.modalInventario=0):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el producto","err"),e.listarProductosInventario()})).catch((function(t){console.log(t)})):d.a.post("inventario/add",{codigoBarra:t.codigoBarra,codigoLote:s.toUpperCase(),nombreComercial:i.toUpperCase(),fraccionesTotales:t.fraccionesTotales,fechaCaducidad:t.fechaCaducidad,fechaElaboracion:t.fechaElaboracion,iva:t.iva,descuento:t.descuento,pvp:t.pvp,pvm:t.pvm,punit:t.punit,costoNeto:t.costoNeto,codigoUsuario:t.$store.state.usuario._id,codigoBodega:a,codigoFabricante:t.codigoFabricante,codigoProveedor:t.codigoProveedor,codigoProducto:t.codigoProducto},o).then((function(t){200==t.status?(tt.a.fire("Noticias!","Se agregao correctamente al inventario.","success"),e.limpiarInventario(),e.modalInventario=0):tt.a.fire("Ops!","Hubo problemas al intentar guardar el producto","err"),e.listarProductosInventario()})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},obtenerProductos:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("producto/list",o).then((function(a){e=a.data,e.map((function(e){t.productos.push({text:e.descripcion+" "+e.detalleConcentracion+e.codigoConcentracion.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},obetenerProveedores:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("proveedor/list",o).then((function(a){e=a.data,e.map((function(e){t.proveedores.push({text:e.razonsocial,value:e._id})}))})).catch((function(t){console.log(t)}))},obtenerFabricantes:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("fabricante/list",o).then((function(a){e=a.data,e.map((function(e){t.fabricantes.push({text:e.razonsocial,value:e._id})}))})).catch((function(t){console.log(t)}))},eliminar_producto:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("producto/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listar_productos()})).catch((function(t){console.log(t)}))},cargardatosActualizar:function(t){this.limpiarproductos(),this.descripcion_p=t.descripcion,this.fraccionCaja=t.fraccionCaja,this.contenidoNeto=t.contenidoNeto,this.detalleConcentracion=t.detalleConcentracion,this.codigoTipoproducto=t.codigoTipoproducto._id,this.codigoConcentracion=t.codigoConcentracion._id,this.codigoPresentacion=t.codigoPresentacion._id,this.idActualizar=t._id,"MEDICINA"==t.codigoTipoproducto.descripcion?this.codigoPrincipioactivo=t.codigoPrincipioactivo._id:this.banderainsumo=!1},actualizarProducto:function(){var t=this;this.$store.state.token,this.$store.state.usuario._id;if(!this.validar_guardar()){var e;e=this.banderainsumo?this.codigoPrincipioactivo:void 0;var a=this.descripcion_p;d.a.put("producto/actualizar",{_id:this.idActualizar,descripcion:a.toUpperCase(),fraccionCaja:this.fraccionCaja,contenidoNeto:this.contenidoNeto,detalleConcentracion:this.detalleConcentracion,codigoTipoproducto:this.codigoTipoproducto,codigoPrincipioactivo:e,codigoPresentacion:this.codigoPresentacion,codigoConcentracion:this.codigoConcentracion,codigoUsuario:this.$store.state.usuario._id}).then((function(e){200==e.status?tt.a.fire("Noticias!","Se actualizo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el ingreso","err"),t.listar_productos(),t.limpiarproductos()})).catch((function(t){console.log(t)}))}},listar_productos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("producto/list",a).then((function(e){t.ARR_producto=e.data})).catch((function(t){console.log(t)}))},limpiarproductos:function(){this.descripcion_p="",this.fraccionCaja=0,this.contenidoNeto="",this.detalleConcentracion="",this.codigoTipoproducto="",this.codigoPrincipioactivo="",this.codigoPresentacion="",this.codigoConcentracion="",this.banderainsumo=!0},guardarProducto:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};if(!this.validar_guardar()){var o;o=this.banderainsumo?this.codigoPrincipioactivo:void 0;var i=this.descripcion_p;d.a.post("producto/add",{descripcion:i.toUpperCase(),fraccionCaja:this.fraccionCaja,contenidoNeto:this.contenidoNeto,detalleConcentracion:this.detalleConcentracion,codigoTipoproducto:this.codigoTipoproducto,codigoPrincipioactivo:o,codigoPresentacion:this.codigoPresentacion,codigoConcentracion:this.codigoConcentracion,codigoUsuario:this.$store.state.usuario._id},a).then((function(e){200==e.status?(tt.a.fire("Noticias!","Se guardo correctamente el  producto.","success"),t.limpiarproductos()):tt.a.fire("Ops!","Hubo problemas al intentar guardar el producto","err"),t.listar_productos()})).catch((function(t){console.log(t)}))}},validar_guardar:function(){return this.valida=0,this.validaMensaje=[],isNaN(this.fraccionCaja)&&this.validaMensaje.push("Fraccion x caja debe ser solo numero."),0==this.descripcion_p.length&&this.validaMensaje.push("Debe ingresar la descripcion."),0==this.contenidoNeto.length&&this.validaMensaje.push("Debe ingresar el contenido neto."),0==this.detalleConcentracion.length&&this.validaMensaje.push("Debe ingresar el detalle de la concentracion. Ej 500,30."),""==this.codigoTipoproducto&&this.validaMensaje.push("Debe escoger un tipo de producto."),""==this.codigoPresentacion&&this.validaMensaje.push("Debe escoger un tipo de presentacion."),""==this.codigoConcentracion&&this.validaMensaje.push("Debe escoger una concentracion."),this.validaMensaje.length&&(this.valida=1),this.valida},validarInsumos:function(t){var e=this;this.tipoproductos.forEach((function(a){"MEDICINA"==a.text&&(a.value==t?e.banderainsumo=!0:e.banderainsumo=!1)}))},ObtenerTipoProductos:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("tipoproducto/list",o).then((function(a){e=a.data,e.map((function(e){t.tipoproductos.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},ObtenerPrincipios:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("principioactivo/list",o).then((function(a){e=a.data,e.map((function(e){t.principioactivos.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},ObtenerConcentraciones:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("concentracion/list",o).then((function(a){e=a.data,e.map((function(e){t.concentraciones.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},ObtenerPresentaciones:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("presentacion/list",o).then((function(a){e=a.data,e.map((function(e){t.presentaciones.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},actualizar_concentracion:function(t){var e=this,a=(this.$store.state.token,this.$store.state.usuario._id);d.a.put("concentracion/actualizar",{_id:t._id,descripcion:e.descripcion_c(),codigoUsuario:a}).then((function(t){200==t.status?tt.a.fire("Noticias!","Se actualizo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el ingreso","err"),e.listar_concentracion()})).catch((function(t){console.log(t)}))},eliminar_concentracion:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("concentracion/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listar_concentracion()})).catch((function(t){console.log(t)}))},guardar_concentracion:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.validarc()||d.a.post("concentracion/add",{descripcion:t.toUpperCase(),codigoUsuario:this.$store.state.usuario._id},o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se guardo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar guardar el tipo de producto","err"),e.listar_concentracion()})).catch((function(t){console.log(t)}))},listar_concentracion:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("concentracion/list",a).then((function(e){t.ARR_concentracion=e.data})).catch((function(t){console.log(t)}))},validarc:function(){return this.valida=0,this.validaMensaje=[],0==this.descripcion_c.length&&this.validaMensaje.push("Debe ingresar la descripcion."),this.validaMensaje.length&&(this.valida=1),this.valida},actualizar_presentacion:function(t){var e=this,a=(this.$store.state.token,this.$store.state.usuario._id);d.a.put("presentacion/actualizar",{_id:t._id,descripcion:e.descripcion_p,codigoUsuario:a}).then((function(t){200==t.status?tt.a.fire("Noticias!","Se actualizo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el ingreso","err"),e.listar_presentacion()})).catch((function(t){console.log(t)}))},eliminar_presentacion:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("presentacion/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listar_presentacion()})).catch((function(t){console.log(t)}))},guardar_presentacion:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.validarp()||d.a.post("presentacion/add",{descripcion:t.toUpperCase(),codigoUsuario:this.$store.state.usuario._id},o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se guardo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar guardar el tipo de producto","err"),e.listar_presentacion()})).catch((function(t){console.log(t)}))},listar_presentacion:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("presentacion/list",a).then((function(e){t.ARR_presentacion=e.data})).catch((function(t){console.log(t)}))},validarp:function(){return this.valida=0,this.validaMensaje=[],0==this.descripcion_p.length&&this.validaMensaje.push("Debe ingresar la descripcion."),this.validaMensaje.length&&(this.valida=1),this.valida},actualizar_principiosactivos:function(t){var e=this,a=(this.$store.state.token,this.$store.state.usuario._id);d.a.put("principioactivo/actualizar",{_id:t._id,descripcion:e.descripcion_pa,codigoUsuario:a}).then((function(t){200==t.status?tt.a.fire("Noticias!","Se actualizo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el ingreso","err"),e.listar_principiosactivos()})).catch((function(t){console.log(t)}))},eliminar_principiosactivos:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("principioactivo/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listar_principiosactivos()})).catch((function(t){console.log(t)}))},guardar_principiosactivos:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.validarpa()||d.a.post("principioactivo/add",{descripcion:t.toUpperCase(),codigoUsuario:this.$store.state.usuario._id},o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se guardo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar guardar el tipo de producto","err"),e.listar_principiosactivos()})).catch((function(t){console.log(t)}))},listar_principiosactivos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("principioactivo/list",a).then((function(e){t.ARR_principioactivo=e.data})).catch((function(t){console.log(t)}))},validarpa:function(){return this.valida=0,this.validaMensaje=[],0==this.descripcion_pa.length&&this.validaMensaje.push("Debe ingresar la descripcion."),this.validaMensaje.length&&(this.valida=1),this.valida},actualizar_tipoproductos:function(t){var e=this,a=(this.$store.state.token,this.$store.state.usuario._id);d.a.put("tipoproducto/actualizar",{_id:t._id,descripcion:e.descripcion_tp,codigoUsuario:a}).then((function(t){200==t.status?tt.a.fire("Noticias!","Se actualizo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el ingreso","err"),e.listar_tipoproductos()})).catch((function(t){console.log(t)}))},eliminar_tipoproductos:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("tipoproducto/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listar_tipoproductos()})).catch((function(t){console.log(t)}))},guardar_tipoproductos:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.validar()||d.a.post("tipoproducto/add",{descripcion:t.toUpperCase(),codigoUsuario:this.$store.state.usuario._id},o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se guardo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar guardar el tipo de producto","err"),e.listar_tipoproductos()})).catch((function(t){console.log(t)}))},listar_tipoproductos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("tipoproducto/list",a).then((function(e){t.ARR_tipoproducto=e.data})).catch((function(t){console.log(t)}))},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.descripcion_tp.length&&this.validaMensaje.push("Debe ingresar la descripcion."),this.validaMensaje.length&&(this.valida=1),this.valida},limpiar:function(){this.descripcion_tp="",this.ARR_tipoproducto=[],this.descripcion_pa="",this.ARR_principioactivo=[],this.descripcion_p="",this.ARR_presentacion=[],this.descripcion_c="",this.ARR_concentracion=[],this.search=""}}}),At=Ct,Dt=a("c6a6"),It=Object(m["a"])(At,ft,bt,!1,null,null,null),Et=It.exports;h()(It,{VAutocomplete:Dt["a"],VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Facturas")])],1),a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Punto emisión"},model:{value:t.ptoemision,callback:function(e){t.ptoemision=e},expression:"ptoemision"}})],1)],1),a("span",[t._v("Datos Comprador")]),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-radio-group",{attrs:{row:""},model:{value:t.tipoIdentificacion,callback:function(e){t.tipoIdentificacion=e},expression:"tipoIdentificacion"}},[a("v-radio",{attrs:{label:"Cedula",value:"05"}}),a("v-radio",{attrs:{label:"RUC",value:"04"}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Cédula/RUC",type:"number"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCliente(t.ruc_comprador)}},model:{value:t.ruc_comprador,callback:function(e){t.ruc_comprador=e},expression:"ruc_comprador"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Razon Social/Apellidos y Nombres"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCliente(t.razonsocial_comprador)}},model:{value:t.razonsocial_comprador,callback:function(e){t.razonsocial_comprador=e},expression:"razonsocial_comprador"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Dirección Comprador"},model:{value:t.direccion_comprador,callback:function(e){t.direccion_comprador=e},expression:"direccion_comprador"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Email",type:"email"},model:{value:t.email_comprador,callback:function(e){t.email_comprador=e},expression:"email_comprador"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Telefono"},model:{value:t.telefono_comprador,callback:function(e){t.telefono_comprador=e},expression:"telefono_comprador"}})],1)],1)],1),a("span",[t._v("Detalles de la factura")]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n          Nuevo detalle\n        ")],1)],1),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[a("v-text-field",{model:{value:e.item.codigoBarra,callback:function(a){t.$set(e.item,"codigoBarra",a)},expression:"props.item.codigoBarra"}})],1),a("td",[a("v-text-field",{model:{value:e.item.codigoAuxiliar,callback:function(a){t.$set(e.item,"codigoAuxiliar",a)},expression:"props.item.codigoAuxiliar"}})],1),a("td",[a("v-text-field",{model:{value:e.item.descripcion,callback:function(a){t.$set(e.item,"descripcion",a)},expression:"props.item.descripcion"}})],1),a("td",[a("v-text-field",{model:{value:e.item.nombreComercial,callback:function(a){t.$set(e.item,"nombreComercial",a)},expression:"props.item.nombreComercial"}})],1),a("td",[a("v-text-field",{model:{value:e.item.registroSanitario,callback:function(a){t.$set(e.item,"registroSanitario",a)},expression:"props.item.registroSanitario"}})],1),a("td",[a("v-text-field",{model:{value:e.item.fechas,callback:function(a){t.$set(e.item,"fechas",a)},expression:"props.item.fechas"}})],1),a("td",[a("v-text-field",{model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),a("td",[a("v-text-field",{model:{value:e.item.precioUni,callback:function(a){t.$set(e.item,"precioUni",a)},expression:"props.item.precioUni"}})],1),a("td",[a("v-checkbox",{model:{value:e.item.iva,callback:function(a){t.$set(e.item,"iva",a)},expression:"props.item.iva"}})],1),e.item.iva?a("td",{staticClass:"text-xs-right"},[t._v("\n                    "+t._s((e.item.cantidad*e.item.precioUni+e.item.cantidad*e.item.precioUni*.12).toFixed(6))+"\n                  ")]):a("td",{staticClass:"text-xs-right"},[t._v("\n                    "+t._s((e.item.cantidad*e.item.precioUni).toFixed(6))+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1),a("span",[t._v("Forma de pago")]),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.Agregarformapago()}}},[a("v-icon",[t._v("add")]),t._v("\n          Nuevo detalle\n        ")],1)],1),a("v-layout",{attrs:{wrap:""}},[a("div",{attrs:{id:"formapago"}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraFormapago,items:t.detallesFP,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detallesFP,e.item)}}},[t._v("delete")])],1),a("td",[a("v-autocomplete",{attrs:{items:t.formaspagos,label:"Forma pago"},model:{value:e.item.formaPago,callback:function(a){t.$set(e.item,"formaPago",a)},expression:"props.item.formaPago"}})],1),a("td",[a("v-text-field",{model:{value:e.item.total,callback:function(a){t.$set(e.item,"total",a)},expression:"props.item.total"}})],1),a("td",[a("v-autocomplete",{attrs:{items:t.tiempos,label:"Tiempo"},model:{value:e.item.unidadTiempo,callback:function(a){t.$set(e.item,"unidadTiempo",a)},expression:"props.item.unidadTiempo"}})],1),"NINGUNO"==e.item.unidadTiempo?a("td",[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.plazo,callback:function(a){t.$set(e.item,"plazo",a)},expression:"props.item.plazo"}})],1):a("td",[a("v-text-field",{model:{value:e.item.plazo,callback:function(a){t.$set(e.item,"plazo",a)},expression:"props.item.plazo"}})],1)]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-spacer"),a("div",{attrs:{id:"totales"}},[a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Subtotal:")]),t._v("\n            $\n            "+t._s(t.totalParcial=t.calcularSubtotal)+"\n          ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total descuento:")]),t._v("\n            $\n            "+t._s(t.totaldescuento=t.calcularDescuento)+"\n          ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Impuesto:")]),t._v("\n            $ "+t._s(t.totalImpuesto=t.calcularIva)+"\n          ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total:")]),t._v("\n            $ "+t._s(t.total=t.calcularTotal)+"\n          ")])],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[a("v-icon",[t._v("save")]),t._v("\n          Guardar")],1)],1)],1)],1)],1)},Ot=[],Nt={data:function(){return{totalParcial:0,totaldescuento:0,totalImpuesto:0,total:0,tipoIdentificacion:"",direccion_comprador:"",telefono_comprador:"NN",email_comprador:"tuahorrocomprobantes@gmail.com",razonsocial_comprador:"CONSUMIDOR FINAL",ruc_comprador:"9999999999999",numComprobante:"",ptoemision:"",idDatos:"",cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Codigo barras",value:"codigoBarra",sortable:!1},{text:"Codigo de lote",value:"codigoAuxiliar",sortable:!1},{text:"Descripcion de producto",value:"descripcion",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1},{text:"Registro Sanitario",value:"registroSanitario",sortable:!1},{text:"Fechas de elaboracion",value:"fecha",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Pecio Unitario",value:"precioUni",sortable:!1},{text:"Iva",value:"iva",sortable:!1},{text:"Subtotal",value:"subtotal",sortable:!1}],detalles:[],cabeceraFormapago:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Forma de pago",value:"formapago",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Plazo",value:"plazo",sortable:!1},{text:"Tiempo",value:"unidadTiempo",sortable:!1}],detallesFP:[],formaspagos:[{text:"SIN UTILIZACION DEL SISTEMA FINANCIERO",value:"01"},{text:"COMPENSACIÓN DE DEUDAS",value:"15"},{text:"TARJETA DE DÉBITO",value:"16"},{text:"DINERO ELECTRÓNICO",value:"17"},{text:"TARJETA PREPAGO",value:"18"},{text:"TARJETA DE CRÉDITO",value:"19"},{text:"OTROS CON UTILIZACION DEL SISTEMA FINANCIERO",value:"20"},{text:"ENDOSO DE TÍTULOS",value:"21"}],tiempos:["NINGUNO","dias","meses","años"],validaMensaje:[],valida:0,detalleXml:[],datosDistribuidores:[]}},watch:{},computed:{calcularTotal:function(){var t=parseFloat(this.calcularSubtotal)+parseFloat(this.calcularIva)-parseFloat(this.calcularDescuento);return t.toFixed(2)},calcularIva:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=this.detalles[e];a=parseInt(s.cantidad),o=parseFloat(s.precioUni),i=a*o,0!=s.iva&&(t+=.12*i)}return t.toFixed(2)},calcularDescuento:function(){var t=0;return t.toFixed(2)},calcularSubtotal:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=this.detalles[e];a=parseInt(s.cantidad),o=parseFloat(s.precioUni),i=a*o,t+=i}return t.toFixed(2)}},methods:{buscarCliente:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("cliente/consulta?data="+t,o).then((function(a){0==a.data.length?(tt.a.fire("Aviso","No hay datos para:".concat(t),"error"),e.tipoIdentificacion="",e.direccion_comprador="NN",e.telefono_comprador="NN",e.email_comprador="tuahorrocomprobantes@gmail.com",e.razonsocial_comprador="CONSUMIDOR FINAL",e.ruc_comprador="9999999999999"):(e.tipoIdentificacion=a.data.tipoDocumento,e.direccion_comprador=a.data.direccion,e.telefono_comprador=a.data.telefono,e.email_comprador=a.data.email,e.razonsocial_comprador=a.data.nombres,e.ruc_comprador=a.data.numDocumento)})).catch((function(t){console.log(t)}))},datosDistribuidor:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,t.next=6,d.a.get("distribuidor/query?_id="+o,a);case 6:return i=t.sent,t.abrupt("return",i.data);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),guardar:function(){var t=this;this.generardetalle_xml();var e=this.datosDistribuidor(),a="",o="",i="",s="";0!=parseFloat(this.totalImpuesto)?(i="2",s="12"):(i="0",s=0),e.then((function(e){e.establecimientos.forEach((function(t){"MATRIZ"==t.tipoEstablecimiento&&(a=t.direccionEstablecimiento,o=t.numEstablecimiento)})),t.guardarXml(e.razonSocial,e.nombreComercial,e.ruc,a,o,t.ptoemision,t.numComprobante,a,t.tipoIdentificacion,t.razonsocial_comprador,t.ruc_comprador,t.direccion_comprador,t.totalParcial,t.totaldescuento,"2",i,t.totalParcial,s,t.totalImpuesto,t.total,t.detallesFP,t.email_comprador,t.direccion_comprador,t.telefono_comprador)})).catch((function(t){console.log(t)}))},guardarXml:function(t,e,a,o,i,s,r,n,c,l,u,v,m,p,h,f,b,x,g,_,C,A,D,I){for(var E=this,k={Token:this.$store.state.token},O={headers:k},N=p,S=g,T=[],R=_,j=0;j<this.detalles.length;j++){var P=this.detalles[j],M=0,V=0,y=0,F=0,$=0;M=parseInt(P.cantidad),V=parseFloat(P.precioUni),$=M*V,y=$.toFixed(2),0!=this.detalles[j].iva?(2,(.12*y).toFixed(2),12):(0,0,0);var U=[];U=[{codigoBarras:this.detalles[j].codigoBarra,codigoLote:this.detalles[j].codigoAuxiliar,producto:this.detalles[j].descripcion,nombreComercial:this.detalles[j].nombreComercial,fechas:this.detalles[j].fechas,registroSanitario:this.detalles[j].registroSanitario,cantidad:M,precio:V,descuento:F,total:y}],T.push(U)}d.a.post("http://localhost:5000/api/xml/xml",{infoTributaria:{razonSocial:t,nombreComercial:e,ruc:a,dirMatriz:o,estab:i,ptoEmi:s,secuencial:r},infoFactura:{dirEstablecimiento:n,tipoIdentificacionComprador:c,razonSocialComprador:l,identificacionComprador:u,direccionComprador:v,totalSinImpuestos:m,totalDescuento:p,totalConImpuestos:{totalImpuesto:{codigo:h,codigoPorcentaje:f,baseImponible:b,tarifa:x,valor:g}},propina:"0.00",importeTotal:_,pagos:{pago:C}},detalles:{detalle:this.detalleXml},emailCli:A,dirCli:D,telfCli:I},O).then((function(i){if(200==i.status){var s=E.formatearFecha(_t()().format()),r=i.data[0],c=i.data[1];E.crearPDF_SLocal(r,c,s,e,o,n,v,u,l,T,A,I,R,N,S,_,t,a),E.actualizarConteo()}else tt.a.fire("Error","Ocurrio un error al tratar de guardar la venta.")})).catch((function(t){console.log(t)}))},generardetalle_xml:function(){for(var t=0;t<this.detalles.length;t++){var e=this.detalles[t],a=0,o=0,i=0,s=0,r=0,n=0,c=0,l=0;a=parseInt(e.cantidad),o=parseFloat(e.precioUni),l=a*o,i=l.toFixed(2),0!=this.detalles[t].iva?(s=2,r=(.12*i).toFixed(2),c=12):(s=0,r=0,c=0);var d=[{"@nombre":"nombreComercial","@valor":this.detalles[t].nombreComercial},{"@nombre":"fechas","@valor":this.detalles[t].fechas},{"@nombre":"regSanitario","@valor":this.detalles[t].registroSanitario}];this.detalleXml[t]=[[{codigoPrincipal:this.detalles[t].codigoBarra,codigoAuxiliar:this.detalles[t].codigoAuxiliar,descripcion:this.detalles[t].descripcion,cantidad:a,precioUnitario:o,descuento:n,precioTotalSinImpuesto:i,detallesAdicionales:[{detAdicional:d}],impuestos:{impuesto:[{codigo:"2",codigoPorcentaje:s,tarifa:c,baseImponible:i,valor:r}]}}]]}},Agregarformapago:function(){var t=this;t.detallesFP.unshift({formaPago:"01",total:0,plazo:0,unidadTiempo:"NINGUNO"})},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},AgregarDetalle:function(){var t=this;t.detalles.unshift({codigoBarra:"",codigoAuxiliar:"",descripcion:"",nombreComercial:"",registroSanitario:"",fechas:"",cantidad:0,precioUni:0,iva:0})},crearPDF_SLocal:function(t,e,a,o,i,s,r,n,c,l,u,v,m,p,h,f,b,x){d.a.post("http://localhost:5000/api/pdf/pdf",{claveAcceso:t,numComprobante:e,fecha:a,nombreComercial:o,dirMatriz:i,dirFarmacia:s,clienteDireccion:r,clienteDocumento:n,clienteNombre:c,detalles:{detalle:l},clienteEmail:u,clienteTelefono:v,subtotal:m,descuento:p,iva:h,total:f,razonSocial:b,ruc:x}).then((function(t){})).catch((function(t){console.log(t)}))},formatearFecha:function(t){if(t)return _t()(String(t)).format("MM/DD/YYYY hh:mm")},obtenerDatos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.get("data/query?codigoUsuario="+i+"&codigoDistribuidor="+o+"&documento=FACTURA",a).then((function(e){t.numComprobante=e.data.secuencial,t.ptoemision=e.data.ptoEmision,t.idDatos=e.data._id})).catch((function(t){console.log(t)}))},actualizarConteo:function(){var t=this;d.a.put("data/actualizarSecuencial",{_id:this.idDatos,documento:"FACTURA"}).then((function(e){200==e.status?(t.obtenerDatos(),t.limpiar(),tt.a.fire("Noticias","Se guardó correctamente.","success")):tt.a.fire("Error","Hubo algun error al momento de guardar la venta.","error")})).catch((function(t){console.log(t)}))},limpiar:function(){this.detallesFP=[],this.detalles=[],this.detalleXml=[],this.totalParcial=0,this.totaldescuento=0,this.totalImpuesto=0,this.total=0,this.tipoIdentificacion="",this.direccion_comprador="",this.telefono_comprador="NN",this.email_comprador="tuahorrocomprobantes@gmail.com",this.razonsocial_comprador="CONSUMIDOR FINAL",this.ruc_comprador="9999999999999"}},props:{},created:function(){this.obtenerDatos()}},St=Nt,Tt=(a("3c3d"),a("ac7c")),Rt=a("67b6"),jt=a("43a6"),Pt=Object(m["a"])(St,kt,Ot,!1,null,null,null),Mt=Pt.exports;h()(Pt,{VAutocomplete:Dt["a"],VBtn:b["a"],VCheckbox:Tt["a"],VContainer:_["a"],VDataTable:ut["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VRadio:Rt["a"],VRadioGroup:jt["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Bodegas")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Código númerico"},model:{value:t.codigoNumerico,callback:function(e){t.codigoNumerico=e},expression:"codigoNumerico"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-autocomplete",{attrs:{items:t.distribuidores,label:"Distribuidor"},model:{value:t.codigoDistribuidor,callback:function(e){t.codigoDistribuidor=e},expression:"codigoDistribuidor"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.bodegas,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.codigoNumerico))]),a("td",[t._v(t._s(e.item.descripcion))]),a("td",[t._v(t._s(e.item.codigoDistribuidor.razonSocial))]),a("td",[t._v(t._s(e.item.codigoUsuario.nombres))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},yt=[],Ft={data:function(){return{codigoNumerico:"",descripcion:"",distribuidores:[],codigoDistribuidor:"",headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Código númerico",value:"codigoNumerico",sortable:!0},{text:"Descripcion",value:"descripcion",sortable:!0},{text:"Distribuidor",value:"codigoDistribuidor.razonSocial",sortable:!0},{text:"Usuario creador",value:"codigoUsuario.nombres",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],bodegas:[],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",editedIndex:-1,_id:"",dialog:!1,search:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{},props:{},methods:{eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("bodega/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.codigoNumerico.length&&this.validaMensaje.push("*Código númerico no puede estar vacío."),0==this.descripcion.length&&this.validaMensaje.push("*Descripcion no puede estar vacío."),0==this.codigoDistribuidor.length&&this.validaMensaje.push("*Distribuidor no puede estar vacío."),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("bodega/actualizar",{_id:this._id,codigoNumerico:this.codigoNumerico,descripcion:this.descripcion,codigoDistribuidor:this.codigoDistribuidor,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("bodega/add",{codigoNumerico:this.codigoNumerico,descripcion:this.descripcion,codigoDistribuidor:this.codigoDistribuidor,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},obtenerDistribuidores:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("distribuidor/list",o).then((function(a){e=a.data,e.map((function(e){t.distribuidores.push({text:e.razonSocial,value:e._id})}))})).catch((function(t){console.log(t)}))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("bodega/list",a).then((function(e){t.bodegas=e.data})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.descripcion="",this.codigoDistribuidor="",this.codigoNumerico="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},editItem:function(t){this.descripcion=t.descripcion,this.codigoNumerico=t.codigoNumerico,this.codigoDistribuidor=t.codigoDistribuidor._id,this._id=t._id,this.dialog=!0,this.editedIndex=1}},created:function(){this.listar(),this.obtenerDistribuidores()}},$t=Ft,Ut=Object(m["a"])($t,Vt,yt,!1,null,null,null),wt=Ut.exports;h()(Ut,{VAutocomplete:Dt["a"],VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Distribuidores")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"900px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-checkbox",{attrs:{label:"Obligado a llevar contabilidad?"},model:{value:t.obligadoContabilidad,callback:function(e){t.obligadoContabilidad=e},expression:"obligadoContabilidad"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"RUC"},model:{value:t.ruc,callback:function(e){t.ruc=e},expression:"ruc"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"Razon Social"},model:{value:t.razonSocial,callback:function(e){t.razonSocial=e},expression:"razonSocial"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"Nombre Comercial"},model:{value:t.nombreComercial,callback:function(e){t.nombreComercial=e},expression:"nombreComercial"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Fecha de inicio de actividades"},model:{value:t.fechaInicioAct,callback:function(e){t.fechaInicioAct=e},expression:"fechaInicioAct"}})],1),a("v-flex",{attrs:{xs12:"",sm7:"",md7:""}},[a("v-text-field",{attrs:{label:"Direccion"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-flex",{attrs:{xs12:"",sm7:"",md7:""}},[a("v-text-field",{attrs:{label:"Correo"},model:{value:t.correo,callback:function(e){t.correo=e},expression:"correo"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n                                   Nuevo establecimiento\n                                   ")],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[-1!=t.editedIndex?a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarEstablecimiento(e.item)}}},[t._v("delete")]):a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[a("v-text-field",{model:{value:e.item.numEstablecimiento,callback:function(a){t.$set(e.item,"numEstablecimiento",a)},expression:"props.item.numEstablecimiento"}})],1),a("td",[a("v-autocomplete",{attrs:{items:t.tiposestablecimientos,label:"Tipo local"},model:{value:e.item.tipoEstablecimiento,callback:function(a){t.$set(e.item,"tipoEstablecimiento",a)},expression:"props.item.tipoEstablecimiento"}})],1),a("td",[a("v-text-field",{model:{value:e.item.nombreComercialEstablecimiento,callback:function(a){t.$set(e.item,"nombreComercialEstablecimiento",a)},expression:"props.item.nombreComercialEstablecimiento"}})],1),a("td",[a("v-text-field",{model:{value:e.item.direccionEstablecimiento,callback:function(a){t.$set(e.item,"direccionEstablecimiento",a)},expression:"props.item.direccionEstablecimiento"}})],1)]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.distribuidores,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.ruc))]),a("td",[t._v(t._s(e.item.razonSocial))]),a("td",[t._v(t._s(e.item.nombreComercial))]),a("td",[t._v(t._s(e.item.correo))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},Lt=[],Bt={data:function(){return{distribuidores:[],correo:"",direccion:"",fechaInicioAct:"",nombreComercial:"",razonSocial:"",ruc:"",tiposestablecimientos:["MATRIZ","LOCAL","LOCAL COMERCIAL"],obligadoContabilidad:0,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Núm. establecimiento",value:"numEstablecimiento",sortable:!1},{text:"Tipo local",value:"tipoEstablecimiento",sortable:!1},{text:"Nombre comercial estab.",value:"nombreComercialEstablecimiento",sortable:!1},{text:"Dir. estab.",value:"direccionEstablecimiento",sortable:!1}],detalles:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"RUC",value:"ruc",sortable:!0},{text:"RAZON SOCIAL",value:"razonSocial",sortable:!0},{text:"NOMBRE COMERCIAL",value:"nombreComercial",sortable:!0},{text:"Correo",value:"correo",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",editedIndex:-1,_id:"",dialog:!1,search:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{},props:{},methods:{eliminarEstablecimiento:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("distribuidor/removeEstablecimiento?_id="+this._id+"&codigoEstablecimiento="+t._id,o).then((function(t){e.listarDetalle(e._id)})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},AgregarDetalle:function(){var t=this;t.detalles.unshift({numEstablecimiento:"",tipoEstablecimiento:"",nombreComercialEstablecimiento:"",direccionEstablecimiento:""})},eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("distribuidor/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},validar:function(){var t=this;return this.valida=0,this.validaMensaje=[],0==this.ruc.length&&this.validaMensaje.push("*RUC no puede estar vacío."),0==this.nombreComercial.length&&this.validaMensaje.push("*Nombre Comercial no puede estar vacío."),0==this.razonSocial.length&&this.validaMensaje.push("*Razon social no puede estar vacío."),0==this.fechaInicioAct.length&&this.validaMensaje.push("*Fecha no puede estar vacío."),0==this.direccion.length&&this.validaMensaje.push("*Direccion no puede estar vacío."),0==this.correo.length&&this.validaMensaje.push("*Correo no puede estar vacío."),this.detalles.forEach((function(e){0==e.numEstablecimiento.length&&t.validaMensaje.push("*Numero de establecimiento no puede estar vacío."),0==e.tipoEstablecimiento.length&&t.validaMensaje.push("*Tipo local no puede estar vacío."),0==e.nombreComercialEstablecimiento.length&&t.validaMensaje.push("*Nombre comercial estab. no puede estar vacío."),0==e.direccionEstablecimiento.length&&t.validaMensaje.push("*Direccion establecimiento no puede estar vacío.")})),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("distribuidor/actualizar",{_id:this._id,obligadoContabilidad:this.obligadoContabilidad,ruc:this.ruc,razonSocial:this.razonSocial,nombreComercial:this.nombreComercial,fechaInicioAct:this.fechaInicioAct,direccion:this.direccion,correo:this.correo,establecimientos:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("distribuidor/add",{obligadoContabilidad:this.obligadoContabilidad,ruc:this.ruc,razonSocial:this.razonSocial,nombreComercial:this.nombreComercial,fechaInicioAct:this.fechaInicioAct,direccion:this.direccion,correo:this.correo,establecimientos:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("distribuidor/list",a).then((function(e){t.distribuidores=e.data})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.ruc="",this.nombreComercial="",this.razonSocial="",this.obligadoContabilidad=0,this.direccion="",this.correo="",this.fechaInicioAct="",this.detalles=[],this.valida=0,this.validaMensaje=[],this.editedIndex=-1},editItem:function(t){this._id=t._id,this.ruc=t.ruc,this.nombreComercial=t.nombreComercial,this.razonSocial=t.razonSocial,this.correo=t.correo,this.direccion=t.direccion,this.fechaInicioAct=t.fechaInicioAct,this.obligadoContabilidad=t.obligadoContabilidad,this.listarDetalle(t._id),this._id=t._id,this.dialog=!0,this.editedIndex=1},listarDetalle:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("distribuidor/query?_id="+t,o).then((function(t){e.detalles=t.data.establecimientos})).catch((function(t){console.log(t)}))}},created:function(){this.listar()}},Gt=Bt,Yt=Object(m["a"])(Gt,zt,Lt,!1,null,null,null),qt=Yt.exports;h()(Yt,{VAutocomplete:Dt["a"],VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VCheckbox:Tt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Fabricantes")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"RUC"},model:{value:t.ruc,callback:function(e){t.ruc=e},expression:"ruc"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Razon Social"},model:{value:t.razonsocial,callback:function(e){t.razonsocial=e},expression:"razonsocial"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Direccion"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("span",[t._v("CONTACTO")]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Nombre de contacto"},model:{value:t.nombresC,callback:function(e){t.nombresC=e},expression:"nombresC"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Telefono de contacto"},model:{value:t.telefonoC,callback:function(e){t.telefonoC=e},expression:"telefonoC"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Correo de contacto"},model:{value:t.correoC,callback:function(e){t.correoC=e},expression:"correoC"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Activar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Item")]):t._e(),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("activar")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar")]):t._e(),t._v("\n            el item "+t._s(t.adNombre)+"\n          ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("Activar")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("Desactivar")]):t._e()],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cliente,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.razonsocial))]),a("td",[t._v(t._s(e.item.ruc))]),a("td",[t._v(t._s(e.item.direccion))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},Jt=[],Zt={data:function(){return{search:"",cliente:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Razon Social",value:"razonsocial",sortable:!0},{text:"RUC",value:"ruc",sortable:!0},{text:"Direccion",value:"direccion",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],editedIndex:-1,_id:"",dialog:!1,ruc:"",razonsocial:"",direccion:"",nombresC:"",telefonoC:"",correoC:"",contacto:[],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("fabricante/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("fabricante/list",a).then((function(e){t.cliente=e.data})).catch((function(t){console.log(t)}))},limpiar:function(){this._id="",this.nombresC="",this.correoC="",this.telefonoC="",this.direccion="",this.razonsocial="",this.ruc="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.ruc.length&&this.validaMensaje.push("*RUC no puede estar vacío."),0==this.razonsocial.length&&this.validaMensaje.push("*Razon Social no puede estar vacío."),0==this.direccion.length&&this.validaMensaje.push("*Direccion no puede estar vacío."),0==this.nombresC.length&&this.validaMensaje.push("*Nombre de contacto no puede estar vacío."),0==this.telefonoC.length&&this.validaMensaje.push("*Telefono de contacto no puede estar vacío."),0==this.correoC.length&&this.validaMensaje.push("*Correo de contaco no puede estar vacío."),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?(this.contacto.push({nombres:this.nombresC,telefono:this.telefonoC,correo:this.correoC}),d.a.put("fabricante/actualizar",{_id:this._id,ruc:t.ruc,razonsocial:t.razonsocial,direccion:t.direccion,contacto:t.contacto,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))):(this.contacto.push({nombres:this.nombresC,telefono:this.telefonoC,correo:this.correoC}),d.a.post("fabricante/add",{ruc:t.ruc,razonsocial:t.razonsocial,direccion:t.direccion,contacto:t.contacto,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))))},editItem:function(t){var e=this;this._id=t._id,this.ruc=t.ruc,this.razonsocial=t.razonsocial,this.direccion=t.direccion,t.contacto.forEach((function(t){e.nombresC=t.nombres,e.correoC=t.correo,e.telefonoC=t.telefono})),this.dialog=!0,this.editedIndex=1},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombres,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this;d.a.put("persona/activate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this;d.a.put("persona/deactivate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()}}},Xt=Zt,Qt=Object(m["a"])(Xt,Ht,Jt,!1,null,null,null),Kt=Qt.exports;h()(Qt,{VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Usuarios")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"900px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"Cedula"},model:{value:t.numDocumento,callback:function(e){t.numDocumento=e},expression:"numDocumento"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"Nombres"},model:{value:t.nombres,callback:function(e){t.nombres=e},expression:"nombres"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-autocomplete",{attrs:{items:t.roles,label:"Rol"},model:{value:t.codigoRol,callback:function(e){t.codigoRol=e},expression:"codigoRol"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Telefono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-flex",{attrs:{xs12:"",sm7:"",md7:""}},[a("v-text-field",{attrs:{label:"Direccion"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-flex",{attrs:{xs12:"",sm7:"",md7:""}},[a("v-text-field",{attrs:{label:"Correo"},model:{value:t.correo,callback:function(e){t.correo=e},expression:"correo"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Fecha de nacimiento"},model:{value:t.fechaNacimiento,callback:function(e){t.fechaNacimiento=e},expression:"fechaNacimiento"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n                                   Nuevo establecimiento\n                                   ")],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[-1!=t.editedIndex?a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarEstablecimiento(e.item)}}},[t._v("delete")]):a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[a("v-text-field",{model:{value:e.item.usuario,callback:function(a){t.$set(e.item,"usuario",a)},expression:"props.item.usuario"}})],1),a("td",[a("v-text-field",{model:{value:e.item.clave,callback:function(a){t.$set(e.item,"clave",a)},expression:"props.item.clave"}})],1),-1!=t.editedIndex?a("td",[t._v("\n                                                    "+t._s(e.item.codigoDistribuidor.razonSocial)+"\n                                               ")]):a("td",[a("v-autocomplete",{attrs:{items:t.distribuidores,label:"Distribuidor"},model:{value:e.item.codigoDistribuidor,callback:function(a){t.$set(e.item,"codigoDistribuidor",a)},expression:"props.item.codigoDistribuidor"}})],1)]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.usuarioes,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.numDocumento))]),a("td",[t._v(t._s(e.item.nombres))]),e.item.codigoRol?a("td",[t._v(t._s(e.item.codigoRol.descripcion))]):t._e(),a("td",[t._v(t._s(e.item.correo))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},te=[],ee=(a("c0e9"),{data:function(){return{fechaNacimiento:"",usuarioes:[],correo:"",direccion:"",codigoRol:"",numDocumento:"",nombres:"",telefono:"",roles:[],distribuidores:[],obligadoContabilidad:0,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Usuario",value:"usuario",sortable:!1},{text:"Clave",value:"clave",sortable:!1},{text:"Distribuidor",value:"codigoDistribuidor.razonSocial",sortable:!1}],detalles:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Cedula",value:"numDocumento",sortable:!0},{text:"Nombres",value:"nombres",sortable:!0},{text:"Rol",value:"codigoRol",sortable:!0},{text:"Correo",value:"correo",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",editedIndex:-1,_id:"",dialog:!1,search:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{},props:{},methods:{obtenerRoles:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("rol/list",o).then((function(a){e=a.data,e.map((function(e){t.roles.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},obtenerDistribuidores:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("distribuidor/list",o).then((function(a){e=a.data,e.map((function(e){t.distribuidores.push({text:e.razonSocial,value:e._id})}))})).catch((function(t){console.log(t)}))},eliminarEstablecimiento:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("usuario/removeEstablecimiento?_id="+this._id+"&codigoEstablecimiento="+t._id,o).then((function(t){e.listarDetalle(e._id)})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},AgregarDetalle:function(){var t=this;t.detalles.unshift({usuario:"",clave:"",codigoDistribuidor:""})},eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("usuario/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},validar:function(){var t=this;return this.valida=0,this.validaMensaje=[],0==this.numDocumento.length&&this.validaMensaje.push("*Cedula no puede estar vacío."),0==this.nombres.length&&this.validaMensaje.push("*Nombres no puede estar vacío."),0==this.codigoRol.length&&this.validaMensaje.push("*Rol no puede estar vacío."),0==this.telefono.length&&this.validaMensaje.push("*Telefono no puede estar vacío."),0==this.direccion.length&&this.validaMensaje.push("*Direccion no puede estar vacío."),0==this.correo.length&&this.validaMensaje.push("*Correo no puede estar vacío."),0==this.fechaNacimiento.length&&this.validaMensaje.push("*Fecha nacimiento no puede estar vacío."),this.detalles.forEach((function(e){0==e.usuario.length&&t.validaMensaje.push("*Usuario no puede estar vacío."),0==e.clave.length&&t.validaMensaje.push("*Clave no puede estar vacío."),0==e.codigoDistribuidor.length&&t.validaMensaje.push("*Distribuidor no puede estar vacío.")})),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("usuario/actualizar",{_id:this._id,numDocumento:this.numDocumento,nombres:this.nombres,direccion:this.direccion,telefono:this.telefono,correo:this.correo,codigoRol:this.codigoRol,fechaNacimiento:this.fechaNacimiento,login:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("usuario/add",{numDocumento:this.numDocumento,nombres:this.nombres,direccion:this.direccion,telefono:this.telefono,correo:this.correo,fechaNacimiento:this.fechaNacimiento,codigoRol:this.codigoRol,login:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("usuario/list",a).then((function(e){t.usuarioes=e.data})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.numDocumento="",this.nombres="",this.correo="",this.telefono="",this.fechaNacimiento="",this.direccion="",this.codigoRol="",this.detalles=[],this.valida=0,this.validaMensaje=[],this.editedIndex=-1},editItem:function(t){this._id=t._id,this.numDocumento=t.numDocumento,this.nombres=t.nombres,this.razonSocial=t.razonSocial,this.correo=t.correo,this.direccion=t.direccion,this.telefono=t.telefono,this.codigoRol=t.codigoRol._id,this.fechaNacimiento=this.formatearFecha(t.fechaNacimiento),this.listarDetalle(t._id),this._id=t._id,this.dialog=!0,this.editedIndex=1},listarDetalle:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("usuario/query?_id="+t,o).then((function(t){e.detalles=t.data.login})).catch((function(t){console.log(t)}))},formatearFecha:function(t){if(t)return _t()(String(t)).format("MM/DD/YYYY")}},created:function(){this.listar(),this.obtenerDistribuidores(),this.obtenerRoles()}}),ae=ee,oe=Object(m["a"])(ae,Wt,te,!1,null,null,null),ie=oe.exports;h()(oe,{VAutocomplete:Dt["a"],VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Clientes")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.tipoDocumentos,label:"Tipo documento"},model:{value:t.tipoDocumento,callback:function(e){t.tipoDocumento=e},expression:"tipoDocumento"}})],1),a("v-flex",{attrs:{xs8:"",sm8:"",md8:""}},[a("v-text-field",{attrs:{label:"# documento"},model:{value:t.ruc,callback:function(e){t.ruc=e},expression:"ruc"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Nombres/Razon Social"},model:{value:t.razonsocial,callback:function(e){t.razonsocial=e},expression:"razonsocial"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Telefono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Correo"},model:{value:t.correo,callback:function(e){t.correo=e},expression:"correo"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Direccion"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Activar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Item")]):t._e(),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("activar")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar")]):t._e(),t._v("\n            el item "+t._s(t.adNombre)+"\n          ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("Activar")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("Desactivar")]):t._e()],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cliente,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.nombres))]),a("td",[t._v(t._s(e.item.numDocumento))]),a("td",[t._v(t._s(e.item.direccion))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},re=[],ne={data:function(){return{correo:"",telefono:"",tipoDocumentos:[{text:"CEDULA",value:"05"},{text:"RUC",value:"04"}],tipoDocumento:"",search:"",cliente:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Razon Social",value:"nombres",sortable:!0},{text:"# Documento",value:"numDocumento",sortable:!0},{text:"Direccion",value:"direccion",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],editedIndex:-1,_id:"",dialog:!1,ruc:"",razonsocial:"",direccion:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("cliente/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("cliente/list",a).then((function(e){t.cliente=e.data})).catch((function(t){console.log(t)}))},limpiar:function(){this._id="",this.direccion="",this.razonsocial="",this.ruc="",this.telefono="",this.correo="",this.tipoDocumento="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.ruc.length&&this.validaMensaje.push("*RUC no puede estar vacío."),0==this.razonsocial.length&&this.validaMensaje.push("*Razon Social no puede estar vacío."),0==this.direccion.length&&this.validaMensaje.push("*Direccion no puede estar vacío."),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("cliente/actualizar",{_id:this._id,tipoDocumento:t.tipoDocumento,numDocumento:t.ruc,nombres:t.razonsocial,direccion:t.direccion,telefono:t.telefono,email:t.correo}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("cliente/add",{tipoDocumento:t.tipoDocumento,numDocumento:t.ruc,nombres:t.razonsocial,direccion:t.direccion,telefono:t.telefono,email:t.correo}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},editItem:function(t){this._id=t._id,this.ruc=t.numDocumento,this.razonsocial=t.nombres,this.direccion=t.direccion,this.telefono=t.telefono,this.correo=t.email,this.tipoDocumento=t.tipoDocumento,this.dialog=!0,this.editedIndex=1},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombres,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this;d.a.put("persona/activate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this;d.a.put("persona/deactivate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()}}},ce=ne,le=Object(m["a"])(ce,se,re,!1,null,null,null),de=le.exports;h()(le,{VAutocomplete:Dt["a"],VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Compras")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[t.verNuevo?t._e():a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.verNuevo=1}}},[t._v("Nuevo")])]],2),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Clave de acceso"},model:{value:t.claveAcceso,callback:function(e){t.claveAcceso=e},expression:"claveAcceso"}})],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-text-field",{attrs:{label:"Fecha Emi. Fact."},model:{value:t.fechaFactura,callback:function(e){t.fechaFactura=e},expression:"fechaFactura"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:"",lg5:"",xl5:""}},[a("v-text-field",{attrs:{label:"Descripcion de la compra"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-text-field",{attrs:{label:"Ruc Proveedor"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarProveedor(t.ruc_proveedor)}},model:{value:t.ruc_proveedor,callback:function(e){t.ruc_proveedor=e},expression:"ruc_proveedor"}})],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-text-field",{attrs:{label:"Razon Social",disabled:""},model:{value:t.razonSocial_Proveedor,callback:function(e){t.razonSocial_Proveedor=e},expression:"razonSocial_Proveedor"}})],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-text-field",{attrs:{label:"Direccion",disabled:""},model:{value:t.direccion_Proveedor,callback:function(e){t.direccion_Proveedor=e},expression:"direccion_Proveedor"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}}),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",x8:""}},[a("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCodigo(t.codigo)}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){t.dialog=1}}},[a("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.errorArticulo,expression:"errorArticulo"}],attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.producto)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{model:{value:e.item.fracciones,callback:function(a){t.$set(e.item,"fracciones",a)},expression:"props.item.fracciones"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{model:{value:e.item.bonificacion,callback:function(a){t.$set(e.item,"bonificacion",a)},expression:"props.item.bonificacion"}})],1),a("td",{staticClass:"text-xs-center green--text"},[t._v("\n                    "+t._s(e.item.fxcaja)+"\n                  ")]),a("td",{staticClass:"text-xs-center green--text"},[t._v("\n                    "+t._s(e.item.fraccionesTotales=(parseInt(e.item.cantidad)+parseInt(e.item.bonificacion))*parseInt(e.item.fxcaja)+parseInt(e.item.fracciones))+"\n                  ")]),a("td",{staticClass:"text-xs-center green--text"},[t._v("\n                    $\n                    "+t._s(e.item.costoNeto=((e.item.cantidad*e.item.fxcaja*(e.item.pvm/e.item.fxcaja)-e.item.cantidad*e.item.fxcaja*(e.item.pvm/e.item.fxcaja)*e.item.descuento/100)/e.item.fraccionesTotales*e.item.fxcaja).toFixed(2))+"\n                  ")]),a("td",{staticClass:"text-xs-center green--text"},[a("v-text-field",{attrs:{prefix:"$"},model:{value:e.item.pvm,callback:function(a){t.$set(e.item,"pvm",a)},expression:"props.item.pvm"}})],1),a("td",{staticClass:"text-xs-center green--text"},[a("v-text-field",{attrs:{prefix:"$"},model:{value:e.item.pvp,callback:function(a){t.$set(e.item,"pvp",a)},expression:"props.item.pvp"}})],1),a("td",{staticClass:"text-xs-center green--text"},[a("v-text-field",{attrs:{prefix:"$"},model:{value:e.item.punit,callback:function(a){t.$set(e.item,"punit",a)},expression:"props.item.punit"}})],1),e.item.iva?a("td",{staticClass:"text-xs-center green--text"},[a("span",[t._v("SI")])]):a("td",{staticClass:"text-xs-center green--text"},[a("span",[t._v("NO")])]),a("td",{staticClass:"text-xs-center green--text"},[a("v-text-field",{attrs:{suffix:"%"},model:{value:e.item.descuento,callback:function(a){t.$set(e.item,"descuento",a)},expression:"props.item.descuento"}})],1),a("td",{staticClass:"text-xs-center green--text"},[t._v("\n                    $"+t._s((((parseInt(e.item.cantidad)+parseInt(e.item.bonificacion))*parseInt(e.item.fxcaja)+parseInt(e.item.fracciones))*parseFloat(e.item.punit)).toFixed(2))+"\n                  ")])]}}],null,!1,1635443380)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Sub Total:")]),t._v("\n                $"+t._s(t.subtotal=t.calcularSubtotal)+"\n              ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Impuesto:")]),t._v("\n                $"+t._s(t.totalimpuesto=t.calcularIva)+"\n              ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Descuento:")]),t._v("\n                $"+t._s(t.totaldescuento=t.calcularDescuento)+"\n              ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total:")]),t._v("\n                $"+t._s(t.total=t.calcularTotal)+"\n              ")])]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("Cancelar")]),0==t.verDetalle?a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[t._v("Guardar")]):t._e()],1)],1)],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Activar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Item")]):t._e(),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("activar")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar")]):t._e(),t._v("\n            el item "+t._s(t.adNombre)+"\n          ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("Activar")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("Desactivar")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulosnombres(t.texto)}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.agregarDetalle(e.item)}}},[t._v("add")])],1),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoBarra))]),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoLote))]),a("td",{},[t._v(t._s(e.item.nombreComercial))])]}}])})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),t.verNuevo?t._e():a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraCompras,items:t.compras,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.verDetalleC(e.item)}}},[t._v("tab")]),e.item.estado?[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(2,e.item)}}},[t._v("block")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(1,e.item)}}},[t._v("check")])]],2),a("td",{staticClass:" blue--text"},[t._v("\n          "+t._s(e.item.descripcion)+"\n        ")]),a("td",[t._v("\n          "+t._s(e.item.numComprobante)+"\n        ")]),e.item.claveAcceso?a("td",[t._v("\n          "+t._s(e.item.claveAcceso)+"\n        ")]):a("td"),a("td",[t._v("$"+t._s(e.item.subTotal))]),a("td",[t._v("$"+t._s(e.item.total))]),a("td",[t._v("$"+t._s(e.item.totalimpuesto))]),a("td",[t._v("$"+t._s(e.item.totaldescuento))]),a("td",[t._v("\n          "+t._s(t.formatearFecha(e.item.fechaFactura))+"\n        ")]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"green--text"},[t._v("Aceptado")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Anulado")])])])]}}],null,!1,3058908078)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},ve=[],pe={computed:{calcularTotal:function(){var t=parseFloat(this.calcularSubtotal)+parseFloat(this.calcularIva)-parseFloat(this.calcularDescuento);return t.toFixed(2)},calcularDescuento:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=0,r=this.detalles[e];a=parseInt(r.fraccionesTotales),o=parseFloat(r.punit),i=parseFloat(r.descuento),s=a*o*i/100,t+=s}return t.toFixed(2)},calcularIva:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=this.detalles[e];a=parseInt(s.fraccionesTotales),o=parseFloat(s.punit),i=a*o,0!=s.iva&&(t+=.12*i)}return t.toFixed(2)},calcularSubtotal:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=this.detalles[e];a=parseInt(s.fraccionesTotales),o=parseFloat(s.punit),i=a*o,t+=i}return t.toFixed(2)}},watch:{},data:function(){return{cabeceraCompras:[{text:"Opciones",value:"borrar",sortable:!1},{text:"DESCRIPCION",value:"descripcion",sortable:!1},{text:"# COMPROBANTE",value:"numComprobante",sortable:!1},{text:"Clave de acceso",value:"claveAcceso",sortable:!1},{text:"Sub Total",value:"subTotal",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Impuestos",value:"totalimpuesto",sortable:!1},{text:"Descuentos",value:"totaldescuento",sortable:!1},{text:"Fecha de emision",value:"fechaFactura",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],compras:[],claveAcceso:"",_idProveedor:"",texto:"",articulos:[],cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Codigo Barras",value:"codigoBarras",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1}],dialog:0,total:0,totalimpuesto:0,totaldescuento:0,subtotal:0,search:"",verDetalle:0,verNuevo:0,validaMensaje:[],valida:!1,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Producto",value:"producto",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Fracciones",value:"fracciones",sortable:!1},{text:"Bonificacion",value:"bonificacion",sortable:!1},{text:"F * Caja",value:"fxcaja",sortable:!1},{text:"F Totales",value:"fraccionesTotales",sortable:!1},{text:"Costo Neto",value:"costoNeto",sortable:!1},{text:"PVM",value:"pvM",sortable:!1},{text:"PVP",value:"pvP",sortable:!1},{text:"P. UNIT.",value:"punit",sortable:!1},{text:"IVA?",value:"iva",sortable:!1},{text:"Descuento",value:"descuento",sortable:!1},{text:"Sub Total",value:"subtotal",sortable:!1}],detalles:[],codigo:"",errorArticulo:"",numComprobante:"",fechaFactura:"",descripcion:"",direccion_Proveedor:"",razonSocial_Proveedor:"",ruc_proveedor:"",codigoBodega:"",adModal:0,adAccion:0,adNombre:"",adId:""}},props:{},methods:{listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("compras/query?_id="+t,o).then((function(t){e.detalles=t.data.detalles})).catch((function(t){console.log(t)}))},verDetalleC:function(t){this.verNuevo=1,this.numComprobante=t.numComprobante,this.descripcion=t.descripcion,this.ruc_proveedor=t.codigoProveedor.ruc,this.razonSocial_Proveedor=t.codigoProveedor.razonsocial,this.direccion_Proveedor=t.codigoProveedor.direccion,this.fechaFactura=this.formatearFecha(t.fechaFactura),this.listarDetalles(t._id)},formatearFecha:function(t){if(t)return _t()(String(t)).format("MM/DD/YYYY")},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("compras/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.compras=e.data:console.log(e)})).catch((function(t){console.log(t)}))},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},limpiar:function(){this.claveAcceso="",this.direccion_Proveedor="",this.razonSocial_Proveedor="",this.ruc_proveedor="",this.numComprobante="",this.fechaFactura="",this.descripcion="",this.errorArticulo="",this.total=0,this.totalimpuesto=0,this.totaldescuento=0,this.subtotal=0,this._idProveedor="",this.detalles=[],this.valida=0,this.validaMensaje=[]},limpiarbusqueda:function(){this.texto="",this.articulos=[]},close:function(){this.dialog=0,this.limpiarbusqueda()},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;void 0==o||d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},listarArticulosnombres:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/busca?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):e.articulos=t.data})).catch((function(t){console.log(t)}))},validar_guardar:function(){this.valida=0,this.validaMensaje=[],0==this.numComprobante.length&&this.validaMensaje.push("Debe ingresar el numero de comprobante."),0==this.fechaFactura.length&&this.validaMensaje.push("Debe ingresar la fecha de emision de la factura."),0==this.descripcion.length&&this.validaMensaje.push("Debe ingresar la descripcion de la compra"),0==this.ruc_proveedor.length&&this.validaMensaje.push("Debe ingresar el numero de RUC del proveedor."),0==this.razonSocial_Proveedor.length&&this.validaMensaje.push("Falta razon social del proveedor."),0==this.direccion_Proveedor.length&&this.validaMensaje.push("Falta direccion de proveedor."),0==this.detalles.length&&this.validaMensaje.push("Debe ingresar al menos un detalle a la factura de compra.");for(var t=0;t<this.detalles.length;t++){var e=this.detalles[t];0==e.cantidad.length&&this.validaMensaje.push("CANTIDAD no puede ser un valor vacio."),parseInt(e.cantidad)<0&&this.validaMensaje.push("CANTIDAD no puede ser un valor negativo."),0==e.fracciones.length&&this.validaMensaje.push("FRACCIONES no puede ser un valor vacio."),parseInt(e.fracciones)<0&&this.validaMensaje.push("FRACCIONES no puede ser un valor negativo."),0==e.bonificacion.length&&this.validaMensaje.push("BONIFICACION no puede ser un valor vacio."),parseInt(e.bonificacion)<0&&this.validaMensaje.push("BONIFICACION no puede ser un valor negativo."),0!=e.pvm&&0!=e.pvm.length||this.validaMensaje.push("PVM no puede ser un valor vacio."),0!=e.pvp&&0!=e.pvp.length||this.validaMensaje.push("PVP no puede ser un valor vacio."),0!=e.punit&&0!=e.punit.length||this.validaMensaje.push("P. UNIT no puede ser un valor vacio."),0==e.descuento.length&&this.validaMensaje.push("DESCUENTO no puede ser un valor vacio."),e.pvm<0&&this.validaMensaje.push("PVM no puede ser negativo."),e.pvp<0&&this.validaMensaje.push("PVP no puede ser negativo."),e.punit<0&&this.validaMensaje.push("P. UNIT no puede ser negativo."),e.descuento<0&&this.validaMensaje.push("DESCUENTO no puede ser negativo.")}return this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){if(!this.validar_guardar()){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.post("compras/add",{claveAcceso:this.claveAcceso,numComprobante:this.numComprobante,fechaFactura:this.fechaFactura,subTotal:this.subtotal,total:this.total,totalImpuesto:this.totalimpuesto,totalDescuento:this.totaldescuento,detalles:this.detalles,descripcion:this.descripcion,codigoProveedor:this._idProveedor,codigoBodega:this.codigoBodega,codigoDistribuidor:o,codigoUsuario:i},a).then((function(e){200==e.status?tt.a.fire("Noticias!","Se guardo correctamente la compra.","success"):tt.a.fire("Ops!","Hubo problemas al intentar guardar la compra","err"),t.limpiar(),t.ocultarNuevo(),t.listar()})).catch((function(t){console.log(t)}))}},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!=a&&t.splice(a,1)},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},agregarDetalle:function(t){this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(this.detalles.unshift({_id:t._id,producto:t.nombreComercial,cantidad:0,fracciones:0,bonificacion:0,fxcaja:t.codigoProducto.fraccionCaja,fraccionesTotales:t.fraccionesTotales,costoNeto:0,pvp:t.pvp,pvm:t.pvm,punit:t.punit,descuento:t.descuento,iva:t.iva}),this.codigo="")},buscarCodigo:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/buscaCodigo?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):t.data.length>1?tt.a.fire("Aviso","Se estan mostrando mas de un resultado \n deberia buscar en pantalla.","error"):e.agregarDetalle(t.data)})).catch((function(t){console.log(t)}))},buscarProveedor:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("proveedor/consulta?data="+t,o).then((function(t){206==t.status?tt.a.fire("Error",t.data.message,"error"):(e.direccion_Proveedor=t.data.direccion,e.razonSocial_Proveedor=t.data.razonsocial,e._idProveedor=t.data._id)})).catch((function(t){console.log(t)}))},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.numComprobante,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("compras/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("compras/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))}},created:function(){this.listar(),this.obtenerBodega()}},he=pe,fe=Object(m["a"])(he,ue,ve,!1,null,null,null),be=fe.exports;h()(fe,{VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Cuarentena")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),void 0],2),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-text-field",{attrs:{label:"Fecha Emi. Fact."},model:{value:t.fechaFactura,callback:function(e){t.fechaFactura=e},expression:"fechaFactura"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:"",lg5:"",xl5:""}},[a("v-text-field",{attrs:{label:"Descripcion de la compra"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[e.item.estado?[a("v-icon",{staticClass:"red--text",attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(1,e.item)}}},[t._v("save")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(2,e.item)}}},[t._v("save")])]],2),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.producto)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.fracciones,callback:function(a){t.$set(e.item,"fracciones",a)},expression:"props.item.fracciones"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.bonificacion,callback:function(a){t.$set(e.item,"bonificacion",a)},expression:"props.item.bonificacion"}})],1),a("td",[e.item.estado?a("div",[a("span",{staticClass:"green--text"},[t._v("Aceptado")])]):a("div",[a("span",{staticClass:"orange--text"},[t._v("En espera")])])]),a("td",[a("v-autocomplete",{attrs:{items:t.accion,label:"Estado curentena"},model:{value:e.item.estado,callback:function(a){t.$set(e.item,"estado",a)},expression:"props.item.estado"}})],1),a("td",[e.item.estado?a("div",[a("span",{staticClass:"green--text"},[t._v("LISTO PARA ASIGNAR PERCHA PERCHA")])]):a("div",[a("v-text-field",{model:{value:e.item.descripcion,callback:function(a){t.$set(e.item,"descripcion",a)},expression:"props.item.descripcion"}})],1)])]}}],null,!1,2927951780)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("Atras")])],1)],1)],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Actualizar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Actualizar Item")]):t._e(),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("actualizar")]):t._e(),2==t.adAccion?a("span",[t._v("actualizar")]):t._e(),t._v("\n            el item "+t._s(t.adNombre)+"\n          ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"blue darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("ACTUALIZAR")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"blue darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("ACTUALIZAR")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulosnombres(t.texto)}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.agregarDetalle(e.item)}}},[t._v("add")])],1),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoBarra))]),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoLote))]),a("td",{},[t._v(t._s(e.item.nombreComercial))])]}}])})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),t.verNuevo?t._e():a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraCompras,items:t.compras,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.verDetalleC(e.item)}}},[t._v("tab")])],1),a("td",{staticClass:" blue--text"},[t._v("\n          "+t._s(e.item.descripcion)+"\n        ")]),a("td",[t._v("\n          "+t._s(e.item.numComprobante)+"\n        ")]),a("td",[t._v("\n          "+t._s(t.formatearFecha(e.item.createdAt))+"\n        ")])]}}],null,!1,1306020906)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},ge=[],_e={computed:{calcularTotal:function(){var t=parseFloat(this.calcularSubtotal)+parseFloat(this.calcularIva)-parseFloat(this.calcularDescuento);return t.toFixed(2)},calcularDescuento:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=0,r=this.detalles[e];a=parseInt(r.fraccionesTotales),o=parseFloat(r.punit),i=parseFloat(r.descuento),s=a*o*i/100,t+=s}return t.toFixed(2)},calcularIva:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=this.detalles[e];a=parseInt(s.fraccionesTotales),o=parseFloat(s.punit),i=a*o,0!=s.iva&&(t+=.12*i)}return t.toFixed(2)},calcularSubtotal:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=this.detalles[e];a=parseInt(s.fraccionesTotales),o=parseFloat(s.punit),i=a*o,t+=i}return t.toFixed(2)}},watch:{},data:function(){return{accionC:0,cabeceraCompras:[{text:"Opciones",value:"borrar",sortable:!1},{text:"DESCRIPCION",value:"descripcion",sortable:!1},{text:"# COMPROBANTE",value:"numComprobante",sortable:!1},{text:"Fecha",value:"createdAt",sortable:!1}],compras:[],_idProveedor:"",texto:"",articulos:[],cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Codigo Barras",value:"codigoBarras",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1}],dialog:0,total:0,totalimpuesto:0,totaldescuento:0,subtotal:0,search:"",verDetalle:0,verNuevo:0,validaMensaje:[],valida:!1,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Producto",value:"producto",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Fracciones",value:"fracciones",sortable:!1},{text:"Bonificacion",value:"bonificacion",sortable:!1},{text:"Estado",value:"estado",sortable:!1},{text:"Accion",value:"accion",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!1}],accion:[{text:"Aprobado",value:1},{text:"No Aprobado",value:0}],detalles:[],codigo:"",errorArticulo:"",numComprobante:"",fechaFactura:"",descripcion:"",direccion_Proveedor:"",razonSocial_Proveedor:"",ruc_proveedor:"",codigoBodega:"",adModal:0,adModalD:0,adAccion:0,adAccionD:0,adNombre:"",adNombreD:"",adId:"",adIdD:"",descripcionD:""}},props:{},methods:{listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("cuarentena/query?_id="+t,o).then((function(t){e.detalles=t.data.detalles})).catch((function(t){console.log(t)}))},verDetalleC:function(t){this.verNuevo=1,this.numComprobante=t.numComprobante,this.descripcion=t.descripcion,this.fechaFactura=this.formatearFecha(t.createdAt),this.listarDetalles(t._id)},formatearFecha:function(t){if(t)return _t()(String(t)).format("MM/DD/YYYY")},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("cuarentena/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.compras=e.data:console.log(e)})).catch((function(t){console.log(t)}))},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},limpiar:function(){this.direccion_Proveedor="",this.razonSocial_Proveedor="",this.ruc_proveedor="",this.numComprobante="",this.fechaFactura="",this.descripcion="",this.errorArticulo="",this.total=0,this.totalimpuesto=0,this.totaldescuento=0,this.subtotal=0,this._idProveedor="",this.detalles=[],this.valida=0,this.validaMensaje=[]},limpiarbusqueda:function(){this.texto="",this.articulos=[]},close:function(){this.dialog=0,this.limpiarbusqueda()},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;void 0==o||d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},listarArticulosnombres:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/busca?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):e.articulos=t.data})).catch((function(t){console.log(t)}))},validar_guardar:function(){this.valida=0,this.validaMensaje=[],0==this.numComprobante.length&&this.validaMensaje.push("Debe ingresar el numero de comprobante."),0==this.fechaFactura.length&&this.validaMensaje.push("Debe ingresar la fecha de emision de la factura."),0==this.descripcion.length&&this.validaMensaje.push("Debe ingresar la descripcion de la compra"),0==this.ruc_proveedor.length&&this.validaMensaje.push("Debe ingresar el numero de RUC del proveedor."),0==this.razonSocial_Proveedor.length&&this.validaMensaje.push("Falta razon social del proveedor."),0==this.direccion_Proveedor.length&&this.validaMensaje.push("Falta direccion de proveedor."),0==this.detalles.length&&this.validaMensaje.push("Debe ingresar al menos un detalle a la factura de compra.");for(var t=0;t<this.detalles.length;t++){var e=this.detalles[t];0==e.cantidad.length&&this.validaMensaje.push("CANTIDAD no puede ser un valor vacio."),parseInt(e.cantidad)<0&&this.validaMensaje.push("CANTIDAD no puede ser un valor negativo."),0==e.fracciones.length&&this.validaMensaje.push("FRACCIONES no puede ser un valor vacio."),parseInt(e.fracciones)<0&&this.validaMensaje.push("FRACCIONES no puede ser un valor negativo."),0==e.bonificacion.length&&this.validaMensaje.push("BONIFICACION no puede ser un valor vacio."),parseInt(e.bonificacion)<0&&this.validaMensaje.push("BONIFICACION no puede ser un valor negativo."),0!=e.pvm&&0!=e.pvm.length||this.validaMensaje.push("PVM no puede ser un valor vacio."),0!=e.pvp&&0!=e.pvp.length||this.validaMensaje.push("PVP no puede ser un valor vacio."),0!=e.punit&&0!=e.punit.length||this.validaMensaje.push("P. UNIT no puede ser un valor vacio."),0==e.descuento.length&&this.validaMensaje.push("DESCUENTO no puede ser un valor vacio."),e.pvm<0&&this.validaMensaje.push("PVM no puede ser negativo."),e.pvp<0&&this.validaMensaje.push("PVP no puede ser negativo."),e.punit<0&&this.validaMensaje.push("P. UNIT no puede ser negativo."),e.descuento<0&&this.validaMensaje.push("DESCUENTO no puede ser negativo.")}return this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){if(!this.validar_guardar()){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.post("compras/add",{numComprobante:this.numComprobante,fechaFactura:this.fechaFactura,total:this.total,totalImpuesto:this.totalimpuesto,totalDescuento:this.totaldescuento,detalles:this.detalles,descripcion:this.descripcion,codigoProveedor:this._idProveedor,codigoBodega:this.codigoBodega,codigoDistribuidor:o,codigoUsuario:i},a).then((function(e){200==e.status?tt.a.fire("Noticias!","Se guardo correctamente la compra.","success"):tt.a.fire("Ops!","Hubo problemas al intentar guardar la compra","err"),t.limpiar(),t.ocultarNuevo(),t.listar()})).catch((function(t){console.log(t)}))}},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!=a&&t.splice(a,1)},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},agregarDetalle:function(t){this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(this.detalles.unshift({_id:t._id,producto:t.nombreComercial,cantidad:0,fracciones:0,bonificacion:0,fxcaja:t.codigoProducto.fraccionCaja,fraccionesTotales:t.fraccionesTotales,costoNeto:0,pvp:t.pvp,pvm:t.pvm,punit:t.punit,descuento:t.descuento,iva:t.iva}),this.codigo="")},buscarCodigo:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/buscaCodigo?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):t.data.length>1?tt.a.fire("Aviso","Se estan mostrando mas de un resultado \n deberia buscar en pantalla.","error"):e.agregarDetalle(t.data)})).catch((function(t){console.log(t)}))},buscarProveedor:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("proveedor/consulta?data="+t,o).then((function(t){206==t.status?tt.a.fire("Error",t.data.message,"error"):(e.direccion_Proveedor=t.data.direccion,e.razonSocial_Proveedor=t.data.razonsocial,e._idProveedor=t.data._id)})).catch((function(t){console.log(t)}))},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.producto,this.adId=e._id,this.descripcionD=e.descripcion,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("cuarentena/activateD",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId=""})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("cuarentena/deactivateD",{_id:this.adId,descripcion:this.descripcionD},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId=""})).catch((function(t){console.log(t)}))}},created:function(){this.listar(),this.obtenerBodega()}},Ce=_e,Ae=Object(m["a"])(Ce,xe,ge,!1,null,null,null),De=Ae.exports;h()(Ae,{VAutocomplete:Dt["a"],VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var Ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Asignar Perchas")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:"",disabled:""},on:{click:function(e){t.verNuevo=1}}},[t._v("Nuevo")])]],2),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-text-field",{attrs:{label:"Fecha Emi. Fact."},model:{value:t.fechaFactura,callback:function(e){t.fechaFactura=e},expression:"fechaFactura"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:"",lg5:"",xl5:""}},[a("v-text-field",{attrs:{label:"Descripcion de la compra"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.producto)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.fracciones,callback:function(a){t.$set(e.item,"fracciones",a)},expression:"props.item.fracciones"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.bonificacion,callback:function(a){t.$set(e.item,"bonificacion",a)},expression:"props.item.bonificacion"}})],1),a("td",[a("v-autocomplete",{attrs:{items:t.perchas,label:"Asignación de perchas"},model:{value:e.item.percha,callback:function(a){t.$set(e.item,"percha",a)},expression:"props.item.percha"}})],1)]}}],null,!1,3172616930)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("Cancelar")]),0==t.verDetalle&&0==t.estado?a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[t._v("ACTUALIZAR")]):t._e()],1)],1)],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Actualizar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Actualizar Item")]):t._e(),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("actualizar")]):t._e(),2==t.adAccion?a("span",[t._v("actualizar")]):t._e(),t._v("\n            el item "+t._s(t.adNombre)+"\n          ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"blue darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("ACTUALIZAR")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"blue darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("ACTUALIZAR")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulosnombres(t.texto)}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.agregarDetalle(e.item)}}},[t._v("add")])],1),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoBarra))]),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoLote))]),a("td",{},[t._v(t._s(e.item.nombreComercial))])]}}])})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),t.verNuevo?t._e():a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraCompras,items:t.compras,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.verDetalleC(e.item)}}},[t._v("tab")])],1),a("td",{staticClass:" blue--text"},[t._v("\n          "+t._s(e.item.descripcion)+"\n        ")]),a("td",[t._v("\n          "+t._s(e.item.numComprobante)+"\n        ")]),a("td",[t._v("\n          "+t._s(t.formatearFecha(e.item.createdAt))+"\n        ")])]}}],null,!1,1306020906)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},Ee=[],ke={computed:{calcularTotal:function(){var t=parseFloat(this.calcularSubtotal)+parseFloat(this.calcularIva)-parseFloat(this.calcularDescuento);return t.toFixed(2)},calcularDescuento:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=0,r=this.detalles[e];a=parseInt(r.fraccionesTotales),o=parseFloat(r.punit),i=parseFloat(r.descuento),s=a*o*i/100,t+=s}return t.toFixed(2)},calcularIva:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=this.detalles[e];a=parseInt(s.fraccionesTotales),o=parseFloat(s.punit),i=a*o,0!=s.iva&&(t+=.12*i)}return t.toFixed(2)},calcularSubtotal:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,s=this.detalles[e];a=parseInt(s.fraccionesTotales),o=parseFloat(s.punit),i=a*o,t+=i}return t.toFixed(2)}},watch:{},data:function(){return{perchas:[],accionC:0,cabeceraCompras:[{text:"Opciones",value:"borrar",sortable:!1},{text:"DESCRIPCION",value:"descripcion",sortable:!1},{text:"# COMPROBANTE",value:"numComprobante",sortable:!1},{text:"Fecha",value:"createdAt",sortable:!1}],compras:[],_idProveedor:"",texto:"",articulos:[],cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Codigo Barras",value:"codigoBarras",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1}],dialog:0,total:0,totalimpuesto:0,totaldescuento:0,subtotal:0,search:"",verDetalle:0,verNuevo:0,validaMensaje:[],valida:!1,cabeceraDetalles:[{text:"Producto",value:"producto",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Fracciones",value:"fracciones",sortable:!1},{text:"Bonificacion",value:"bonificacion",sortable:!1},{text:"Asignar percha",value:"asignarPercha",sortable:!1}],accion:[{text:"Aprobado",value:1},{text:"No Aprobado",value:0}],detalles:[],codigo:"",errorArticulo:"",numComprobante:"",fechaFactura:"",descripcion:"",direccion_Proveedor:"",razonSocial_Proveedor:"",ruc_proveedor:"",codigoBodega:"",adModal:0,adModalD:0,adAccion:0,adAccionD:0,adNombre:"",adNombreD:"",adId:"",adIdD:"",descripcionD:"",id:"",estado:0}},props:{},methods:{listar_perchas:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=[];d.a.get("perchas/list",a).then((function(e){var a=e.data;a.forEach((function(t){var e=t.niveles;e.forEach((function(e){o.push(t.descripcion+"-"+e.nivel)}))})),t.perchas=o})).catch((function(t){console.log(t)}))},listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("asignacionpercha/query?_id="+t,o).then((function(t){e.detalles=t.data.detalles})).catch((function(t){console.log(t)}))},verDetalleC:function(t){this.verNuevo=1,this.numComprobante=t.numComprobante,this.descripcion=t.descripcion,this.estado=t.estado,this.fechaFactura=this.formatearFecha(t.createdAt),this.listarDetalles(t._id),this.id=t._id},formatearFecha:function(t){if(t)return _t()(String(t)).format("MM/DD/YYYY")},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("asignacionpercha/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.compras=e.data:console.log(e)})).catch((function(t){console.log(t)}))},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},limpiar:function(){this.direccion_Proveedor="",this.razonSocial_Proveedor="",this.ruc_proveedor="",this.numComprobante="",this.fechaFactura="",this.descripcion="",this.errorArticulo="",this.total=0,this.totalimpuesto=0,this.totaldescuento=0,this.subtotal=0,this._idProveedor="",this.detalles=[],this.estado=0,this.valida=0,this.validaMensaje=[]},limpiarbusqueda:function(){this.texto="",this.articulos=[]},close:function(){this.dialog=0,this.limpiarbusqueda()},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;void 0==o||d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},listarArticulosnombres:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/busca?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):e.articulos=t.data})).catch((function(t){console.log(t)}))},validar_guardar:function(){this.valida=0,this.validaMensaje=[],0==this.numComprobante.length&&this.validaMensaje.push("Debe ingresar el numero de comprobante."),0==this.fechaFactura.length&&this.validaMensaje.push("Debe ingresar la fecha de emision de la factura."),0==this.descripcion.length&&this.validaMensaje.push("Debe ingresar la descripcion de la compra"),0==this.ruc_proveedor.length&&this.validaMensaje.push("Debe ingresar el numero de RUC del proveedor."),0==this.razonSocial_Proveedor.length&&this.validaMensaje.push("Falta razon social del proveedor."),0==this.direccion_Proveedor.length&&this.validaMensaje.push("Falta direccion de proveedor."),0==this.detalles.length&&this.validaMensaje.push("Debe ingresar al menos un detalle a la factura de compra.");for(var t=0;t<this.detalles.length;t++){var e=this.detalles[t];0==e.cantidad.length&&this.validaMensaje.push("CANTIDAD no puede ser un valor vacio."),parseInt(e.cantidad)<0&&this.validaMensaje.push("CANTIDAD no puede ser un valor negativo."),0==e.fracciones.length&&this.validaMensaje.push("FRACCIONES no puede ser un valor vacio."),parseInt(e.fracciones)<0&&this.validaMensaje.push("FRACCIONES no puede ser un valor negativo."),0==e.bonificacion.length&&this.validaMensaje.push("BONIFICACION no puede ser un valor vacio."),parseInt(e.bonificacion)<0&&this.validaMensaje.push("BONIFICACION no puede ser un valor negativo."),0!=e.pvm&&0!=e.pvm.length||this.validaMensaje.push("PVM no puede ser un valor vacio."),0!=e.pvp&&0!=e.pvp.length||this.validaMensaje.push("PVP no puede ser un valor vacio."),0!=e.punit&&0!=e.punit.length||this.validaMensaje.push("P. UNIT no puede ser un valor vacio."),0==e.descuento.length&&this.validaMensaje.push("DESCUENTO no puede ser un valor vacio."),e.pvm<0&&this.validaMensaje.push("PVM no puede ser negativo."),e.pvp<0&&this.validaMensaje.push("PVP no puede ser negativo."),e.punit<0&&this.validaMensaje.push("P. UNIT no puede ser negativo."),e.descuento<0&&this.validaMensaje.push("DESCUENTO no puede ser negativo.")}return this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.put("asignacionpercha/actualizar",{_id:this.id,numComprobante:this.numComprobante,fechaFactura:this.fechaFactura,detalles:this.detalles,descripcion:this.descripcion,codigoBodega:this.codigoBodega,codigoDistribuidor:o,codigoUsuario:i},a).then((function(e){200==e.status?tt.a.fire("Noticias!","Se asignado percha correctamente.","success"):tt.a.fire("Ops!","Hubo problemas al intentar asignar percha.","err"),t.limpiar(),t.ocultarNuevo()})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!=a&&t.splice(a,1)},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},agregarDetalle:function(t){this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(this.detalles.unshift({_id:t._id,producto:t.nombreComercial,cantidad:0,fracciones:0,bonificacion:0,fxcaja:t.codigoProducto.fraccionCaja,fraccionesTotales:t.fraccionesTotales,costoNeto:0,pvp:t.pvp,pvm:t.pvm,punit:t.punit,descuento:t.descuento,iva:t.iva}),this.codigo="")},buscarCodigo:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/buscaCodigo?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):t.data.length>1?tt.a.fire("Aviso","Se estan mostrando mas de un resultado \n deberia buscar en pantalla.","error"):e.agregarDetalle(t.data)})).catch((function(t){console.log(t)}))},buscarProveedor:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("proveedor/consulta?data="+t,o).then((function(t){206==t.status?tt.a.fire("Error",t.data.message,"error"):(e.direccion_Proveedor=t.data.direccion,e.razonSocial_Proveedor=t.data.razonsocial,e._idProveedor=t.data._id)})).catch((function(t){console.log(t)}))},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.producto,this.adId=e._id,this.descripcionD=e.descripcion,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("asignacionpercha/activateD",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId=""})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("asignacionpercha/deactivateD",{_id:this.adId,descripcion:this.descripcionD},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId=""})).catch((function(t){console.log(t)}))}},created:function(){this.listar(),this.obtenerBodega(),this.listar_perchas()}},Oe=ke,Ne=Object(m["a"])(Oe,Ie,Ee,!1,null,null,null),Se=Ne.exports;h()(Ne,{VAutocomplete:Dt["a"],VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Retenciones")])],1),a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Punto emisión"},model:{value:t.ptoemision,callback:function(e){t.ptoemision=e},expression:"ptoemision"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Periodo fiscal/Mes",disabled:""},model:{value:t.pfMes,callback:function(e){t.pfMes=e},expression:"pfMes"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Periodo fiscal/Año",disabled:""},model:{value:t.pfAnio,callback:function(e){t.pfAnio=e},expression:"pfAnio"}})],1)],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-autocomplete",{attrs:{items:t.documentos,label:"Tipo de documento"},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},["01"==t.documento?a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){return t.mostrarModalcomprobantes()}}},[a("v-icon",{attrs:{dark:""}},[t._v("list")])],1):t._e()],1),t.documento?a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"cod. tipo doc.",disabled:""},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}})],1):a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"cod. tipo doc."},model:{value:t.otrotipodoc,callback:function(e){t.otrotipodoc=e},expression:"otrotipodoc"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Numero de comprobante"},model:{value:t.claveAccesodig,callback:function(e){t.claveAccesodig=e},expression:"claveAccesodig"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"SubTotal comprobante"},model:{value:t.subtotalComprobante,callback:function(e){t.subtotalComprobante=e},expression:"subtotalComprobante"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Total I.V.A."},model:{value:t.totaliva,callback:function(e){t.totaliva=e},expression:"totaliva"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Total comprobante",disabled:""},model:{value:t.totalComprobante,callback:function(e){t.totalComprobante=e},expression:"totalComprobante"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Fecha emision"},model:{value:t.fechaEmisionComprobante,callback:function(e){t.fechaEmisionComprobante=e},expression:"fechaEmisionComprobante"}})],1)],1),a("span",[t._v("Datos del sujeto retenido")]),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-radio-group",{attrs:{row:""},model:{value:t.tipoIdentificacion,callback:function(e){t.tipoIdentificacion=e},expression:"tipoIdentificacion"}},[a("v-radio",{attrs:{label:"Cedula",value:"05"}}),a("v-radio",{attrs:{label:"RUC",value:"04"}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Cédula/RUC",type:"number"},model:{value:t.ruc_sretenido,callback:function(e){t.ruc_sretenido=e},expression:"ruc_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Razon Social/Apellidos y Nombres"},model:{value:t.razonsocial_sretenido,callback:function(e){t.razonsocial_sretenido=e},expression:"razonsocial_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Dirección sretenido"},model:{value:t.direccion_sretenido,callback:function(e){t.direccion_sretenido=e},expression:"direccion_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Email",type:"email"},model:{value:t.email_sretenido,callback:function(e){t.email_sretenido=e},expression:"email_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Telefono"},model:{value:t.telefono_sretenido,callback:function(e){t.telefono_sretenido=e},expression:"telefono_sretenido"}})],1)],1)],1),a("span",[t._v("Impuestos")]),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-autocomplete",{attrs:{items:t.impuestos,label:"Tipo de documento"},model:{value:t.impuesto,callback:function(e){t.impuesto=e},expression:"impuesto"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:"",lg3:"",xl3:""}},[2==t.impuesto?a("v-autocomplete",{attrs:{items:t.ivaDetalle,label:"I.V.A"},on:{change:function(e){return t.calcularvaloraretener()}},model:{value:t.codigoRetencion,callback:function(e){t.codigoRetencion=e},expression:"codigoRetencion"}}):1==t.impuesto?a("v-autocomplete",{attrs:{items:t.irDetalle,label:"Impuesto a la renta"},on:{change:function(e){return t.calcularvaloraretener()}},model:{value:t.codigoRetencion,callback:function(e){t.codigoRetencion=e},expression:"codigoRetencion"}}):t._e()],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"% de retencion"},model:{value:t.porcentajeRetencion,callback:function(e){t.porcentajeRetencion=e},expression:"porcentajeRetencion"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Valor retenido",disabled:""},model:{value:t.valorRetenido,callback:function(e){t.valorRetenido=e},expression:"valorRetenido"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n              Agregar a detalle\n            ")],1)],1)],1)],1),a("span",[t._v("Detalles del comprobante de retencion")]),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.codigo))]),a("td",[t._v(t._s(e.item.codigoRetencion))]),a("td",[t._v(t._s(e.item.baseImponible))]),a("td",[t._v(t._s(e.item.porcentajeRetener))]),a("td",[t._v(t._s(e.item.valorRetenido))]),a("td",[t._v(t._s(e.item.codDocSustento))]),a("td",[t._v(t._s(e.item.numDocSustento))]),a("td",[t._v(t._s(e.item.fechaEmisionDocSustento))])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[a("v-icon",[t._v("save")]),t._v("\n          Guardar")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.modalComprobantes,callback:function(e){t.modalComprobantes=e},expression:"modalComprobantes"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un comprobante")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraComprobantes,items:t.comprobantes,search:t.texto},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.cargarInformacion(e.item)}}},[t._v("add")])],1),a("td",[t._v(t._s(e.item.numComprobante))]),a("td",[t._v(t._s(e.item.descripcion))]),a("td",[t._v("$"+t._s(e.item.subTotal))]),a("td",[t._v("$"+t._s(e.item.total))]),a("td",[t._v(t._s(t.formatearFecha(e.item.fechaFactura)))])]}}])})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.cerrarModalcomprobantes}},[t._v("Cancelar")])],1)],1)],1)],1)],1)},Re=[],je={created:function(){this.periodoFiscal(),this.obtenerDatos()},methods:{guardarRegistro:function(t,e,a,o,i,s,r,n){var c=this,l={Token:this.$store.state.token},u={headers:l},v=this.$store.state.usuario.codigoDistribuidor,m=this.$store.state.usuario._id;d.a.post("retenciones/add",{secuencial:t,ptoEmi:e,totalImpuesto:a,subtotal:o,total:i,impuestos:s,periodoFiscal:r,claveAcceso:n,codigoCompra:c._idCompra,codigoUsuario:m,codigoProveedor:c._idProveedor,codigoDistribuidor:v},u).then((function(t){200==t.status||tt.a.fire("Error",t.data,"error")})).catch((function(t){console.log(t),tt.a.fire("Error",t,"error")}))},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.numComprobante.length&&this.validaMensaje.push("*Debe ingresar el numero de comprobante."),0==this.ptoemision.length&&this.validaMensaje.push("*Debe ingresar el punto de emision."),0==this.claveAccesodig.length&&this.validaMensaje.push("*Debe ingresar la clave de acceso del comprobante a retener."),0==this.fechaEmisionComprobante.length&&this.validaMensaje.push("*Debe ingresar la fecha de emision del comprobante."),0==this.ruc_sretenido.length&&this.validaMensaje.push("*Debe ingresar el ruc del sujeto a retener."),0==this.razonsocial_sretenido.length&&this.validaMensaje.push("*Debe ingresar la razón social del sujeto a retener."),0==this.direccion_sretenido.length&&this.validaMensaje.push("*Debe ingresar la dirección del sujeto a retener."),0==this.email_sretenido.length&&this.validaMensaje.push("*Debe ingresar el email del sujeto a retener."),0==this.telefono_sretenido.length&&this.validaMensaje.push("*Debe ingresar el telefono del sujeto a retener."),this.validaMensaje.length&&(this.valida=1),this.valida},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},crearXML:function(t,e,a,o,i,s,r,n,c,l,u,v,m,p,h,f){var b=this,x={Token:this.$store.state.token},g={headers:x};d.a.post("http://localhost:5000/api/xml/xml_retencion",{infoTributaria:{razonSocial:t,nombreComercial:e,ruc:a,dirMatriz:r,estab:o,ptoEmi:i,secuencial:s},infoCompRetencion:{dirEstablecimiento:n,tipoIdentificacionSujetoRetenido:c,razonSocialSujetoRetenido:l,identificacionSujetoRetenido:u,periodoFiscal:v},impuestos:{impuesto:m},emailSujetoRetenido:p,dirSujetoRetenido:h,telfSujetoRetenido:f},g).then((function(o){if(200==o.status){tt.a.fire("Notificación","Se generó correctamente la transacción.","success");var c=me.formatearFecha(_t()().format()),d=o.data[0],x=o.data[1];me.crearPDF_SLocal(d,x,c,e,r,n,h,u,l,m,p,f,t,a,v),me.guardarRegistro(s,i,b.totaliva,b.subtotalComprobante,b.totalComprobante,m,v,d),me.actualizarConteo()}else tt.a.fire("Error",o.data,"error")})).catch((function(t){console.log(t)}))},guardar:function(){var t=this,e=this.datosDistribuidor(),a="",o="",i=this.pfMes+"/"+this.pfAnio;e.then((function(e){e.establecimientos.forEach((function(t){"MATRIZ"==t.tipoEstablecimiento&&(a=t.direccionEstablecimiento,o=t.numEstablecimiento)})),t.crearXML(e.razonSocial,e.nombreComercial,e.ruc,o,t.ptoemision,t.numComprobante,a,a,t.tipoIdentificacion,t.razonsocial_sretenido,t.ruc_sretenido,i,t.detalles,t.email_sretenido,t.direccion_sretenido,t.telefono_sretenido)})).catch((function(t){console.log(t)}))},datosDistribuidor:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,t.next=6,d.a.get("distribuidor/query?_id="+o,a);case 6:return i=t.sent,t.abrupt("return",i.data);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),obtenerDatos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.get("data/query?codigoUsuario="+i+"&codigoDistribuidor="+o+"&documento=RETENCION",a).then((function(e){t.numComprobante=e.data.secuencial,t.ptoemision=e.data.ptoEmision,t.idDatos=e.data._id})).catch((function(t){console.log(t)}))},AgregarDetalle:function(){if(!this.validar()){var t=this,e="";e=0==this.documento?this.otrotipodoc:this.documento,t.detalles.unshift({codigo:this.impuesto,codigoRetencion:this.codigoRetencion[0],baseImponible:this.subtotalComprobante,porcentajeRetener:this.porcentajeRetencion,valorRetenido:this.valorRetenido,codDocSustento:e,numDocSustento:this.claveAccesodig,fechaEmisionDocSustento:this.fechaEmisionComprobante})}},calcularvaloraretener:function(){this.porcentajeRetencion=this.codigoRetencion[1],0==this.subtotalComprobante.length||0==parseFloat(this.subtotalComprobante)||0==this.totaliva.length||0==parseFloat(this.totaliva)?tt.a.fire("Aviso!","Debe ingresar valores en subtotal e iva.","error"):2==this.impuesto?this.valorRetenido=(parseFloat(this.totaliva)*parseFloat(this.porcentajeRetencion)/100).toFixed(2):this.valorRetenido=(parseFloat(this.subtotalComprobante)*parseFloat(this.porcentajeRetencion)/100).toFixed(2)},periodoFiscal:function(){this.pfMes=_t()().format("MM"),this.pfAnio=_t()().format("YYYY")},cargarInformacion:function(t){var e=this,a=t.codigoProveedor.ruc.length;this._idCompra=t._id,this._idProveedor=t.codigoProveedor._id,10==a?this.tipoIdentificacion="05":13==a&&(this.tipoIdentificacion="04"),this.totaliva=t.totalImpuesto,this.fechaEmisionComprobante=this.formatearFecha(t.fechaFactura),this.subtotalComprobante=t.subTotal,this.totalComprobante=t.total,this.ruc_sretenido=t.codigoProveedor.ruc,this.razonsocial_sretenido=t.codigoProveedor.razonsocial,this.direccion_sretenido=t.codigoProveedor.direccion;var o=t.claveAcceso;this.claveAccesodig=o.substr(-15),t.codigoProveedor.contacto.forEach((function(t){e.email_sretenido=t.correo,e.telefono_sretenido=t.telefono})),this.cerrarModalcomprobantes()},listarComprobantes:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("compras/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.comprobantes=e.data:console.log(e)})).catch((function(t){console.log(t)}))},cerrarModalcomprobantes:function(){this.modalComprobantes=0},mostrarModalcomprobantes:function(){this.listarComprobantes(),this.modalComprobantes=1},formatearFecha:function(t){if(t)return _t()(String(t)).format("DD/MM/YYYY")},crearPDF_SLocal:function(t,e,a,o,i,s,r,n,c,l,u,v,m,p,h){d.a.post("http://localhost:5000/api/pdf/pdfR",{claveAcceso:t,numComprobante:e,fecha:a,nombreComercial:o,dirMatriz:i,dirSucursal:s,clienteDireccion:r,clienteDocumento:n,clienteNombre:c,detalles:{detalle:l},clienteEmail:u,clienteTelefono:v,razonSocial:m,ruc:p,periodoFiscal:h}).then((function(t){})).catch((function(t){console.log(t)}))},actualizarConteo:function(){var t=this;d.a.put("data/actualizarSecuencial",{_id:this.idDatos,documento:"RETENCION"}).then((function(e){200==e.status?(t.obtenerDatos(),t.limpiar(),tt.a.fire("Noticias","Se guardó correctamente.","success")):tt.a.fire("Error","Hubo algun error al momento de guardar la venta.","error")})).catch((function(t){console.log(t)}))}},props:{},watch:{},data:function(){return{_idProveedor:"",_idCompra:"",totaliva:0,fechaEmisionComprobante:"",otrotipodoc:0,porcentajeRetencion:0,valorRetenido:0,codigoRetencion:"",impuestos:[{text:"I.V.A.",value:"2"},{text:"Impuesto a la renta",value:"1"}],irDetalle:[{text:"303 - HONORARIOS PROFESIONALES Y DEMAS PAGOS POR SERVICIOS RELACIONADOS CON EL TITULO PROFESIONAL",value:["303",10]},{text:"304 - SERVICIOS PREDOMINA EL INTELECTO NO RELACIONADOS CON EL TITULO PROFESIONAL",value:["304",8]},{text:"304A - COMISIONES Y DEMAS PAGOS POR SERVICIOS PREDOMINA INTELECTO NO RELACIONADOS CON EL TITULO PROFESIONAL",value:["304A",8]},{text:"304B - PAGOS A NOTARIOS Y REGISTRADORES DE LA PROPIEDAD Y MERCANTIL POR SUS ACTIVIDADES EJERCIDAS COMO TALES",value:["304B",8]},{text:"304C - PAGOS A DEPORTISTAS, ENTRENADORES, ARBITROS, MIEMBROS DEL CUERPO TECNICO POR SUS ACTIVIDADES EJERCIDAD COMO TALES",value:["304C",8]},{text:"304D - PAGOS A ARTISTAS POR SUS ACTIVIDADES EJERCIDAD COMO TALES",value:["304D",8]},{text:"304E - HONORARIOS Y DEMAS PAGOS POR SERVICIOS DE DOCENCIA",value:["304E",8]},{text:"307 - SERVICIOS PREDOMINA LA MANO DE OBRA",value:["307",2]},{text:"308 - UTILIZACION O APROVECHAMIENTO DE LA IMAGEN O RENOMBRE",value:["308",10]},{text:"309 - SERVICIOS PRESTADOS POR MEDIOS DE COMUNICACION Y AGENCIAS DE PUBLICIDAD",value:["309",1]},{text:"310 - SERVICIOS DE TRANSPORTE PRIVADO DE PASAJEROS O TRANSPORTE PUBLICO O PRIVADO DE CARGA",value:["310",1]},{text:"311 - POR PAGOS A TRAVES DE LIQUIDACION DE COMPRA (NIVEL CULTURAL O RUSTICIDAD)",value:["311",2]},{text:"312 - TRANSFERENCIA DE BIENES MUEBLES DE NATURALEZA CORPORAL",value:["312",1]},{text:"312A - COMPRA DE BIENES DE ORIGEN AGRICOLA, AVICOLA, PECUARIO, APICOLA, CUNICULA, BIOACUATICO, Y FORESTAL",value:["312A",1]},{text:"314A - REGALIAS OIR CIBCEOTI DE FRANQUICIAS DE ACUERDO A LA LEY DE PROPIEDAD INTELECTUAL - PAGO A PERSONAS NATURALES",value:["314A",8]},{text:"314B - CANONES, DERECHOS DE AUTOR, MARCAS, PATENTES Y SIMILARES DE ACUERDO A LA LEY DE PROPIEDAD INTELECTUAL PAGO A PERSONAS NATURALES",value:["314B",8]},{text:"314C - REGALIAS POR CONCEPTO DE FRANQUICIAS DE ACUERDO A LEY DE PROPIEDAD INTELECTUAL PAGO A SOCIEDADES",value:["314C",8]},{text:"314D - CANONES, DERECHOS DE AUTOR, MARCAS, PATENTES Y SIMILARES DE ACUERDO A LEY DE PROPIEDAD INTELECTUAL PAGO A SOCIEDADES",value:["314D",8]},{text:"319 - CUOTAS DE ARRENDAMIENTO MERCANTIL, INCLUSIVE LA DE OPCION DE COMPRA",value:["319",1]},{text:"320 - POR ARRENDAMIENTO BIENES INMUEBLES",value:["320",8]},{text:"322 - SEGUROS Y REASEGUROS (PRIMAS Y CESIONES)",value:["322",1]},{text:"323 - POR RENDIMIENTOS FINANCIEROS PAGADOS A NATURALES Y SOCIEDADES (NO A IFIS)",value:["323",2]},{text:"323A - POR RF: DEPOSITOS CTA. CORRIENTE",value:["323A",2]},{text:"323B1 - POR RF: DEPOSITOS CTA. AHORROS SOCIEDADES",value:["323B1",2]},{text:"323E - POR RF: DEPOSITO A PLAZO FIJO GRAVADOS",value:["323E",2]},{text:"323E2 - POR RF: DEPOSITO A PLAZO FIJO EXENTOS",value:["323E2",0]},{text:"323F - POR RENDIMIENTOS FINANCIEROS: OPERACIONES DE REPORTO - REPOS",value:["323F",2]},{text:"323G - POR RF: INVERSIONES (CAPTACIONES) RENDIMIENTOS DISTINTOS DE AQUELLOS PAGADOS A IFIS",value:["323G",2]},{text:"323H - POR RF: OBLIGACIONES",value:["323H",2]},{text:"323I - POR RF: BONOS CONVERTIBLE EN ACCIONES",value:["323I",2]},{text:"323M - POR RF: INVERSIONES EN TITULOS VALORES EN RENTA FIJA GRAVADOS",value:["323M",2]},{text:"323N - POR RF: INVERSIONES EN TITULOS VALORE EN RENTA FIJA EXENTOS",value:["323N",0]},{text:"323O - POR RF: INTERESES PAGADOS A BANCOS Y OTRAS ENTIDADES SOMETIDAS AL CONTROL DE LA SUPERINTENDENCIA DE BANCOS Y DE LA EPS",value:["323O",0]},{text:"323P - POR RF: INTERESES PAGADOS POR ENTIDADES DEL SECTOR PUBLICO A FAVOR DE SUJETOS PASIVOS",value:["323P",2]},{text:"323Q - POR RF: OTROS INTERESES Y RENDIMIENTOS FINANCIEROS GRAVADOS",value:["323Q",2]},{text:"323R - POR RF: OTROS INTERESES Y RENDIMIENTOS FINANCIEROS EXENTOS",value:["323R",0]},{text:"324A - POR RF: INTERESES EN OPERACIONES DE CREDITO ENTRE INSTITUCIONES DEL SISTEMA FINANCIERO Y ENTIDADES ECONOMIA POPULAR Y SOLIDARIA ",value:["324A",1]},{text:"324B - POR RF: POR INVERSIONES ENTRE INSTITUCIONES DEL SISTEMA FINANCIERO Y ENTIDADES ECONOMIA POPULAR Y SOLIDARIA",value:["324B",1]},{text:"325 - ANTICIPO DIVIDENDOS",value:["325",22]},{text:"325A - DIVIDENDOS ANTICIPADOS PRESTAMOS ACCIONISTAS, BENEFICIARIOS O PARTICIPES",value:["325A",22]},{text:"326 - DIVIDENDOS DISTRIBUIDOS QUE CORRESPONDAN AL IMPUESTO A LA RENTA UNICO ESTABLECIDO EN EL ART. 27 DE LA LRTI",value:["326",0]},{text:"327 - DIVIDENDOS DISTRIBUIDOS A PERSONAS NATURALES RESIDENTES",value:["327",0]},{text:"328 - DIVIDENDOS DISTRIBUIDOS A SOCIEDADES RESIDENTES",value:["328",0]},{text:"329 - DIVIDENDOS DISTRIBUIDOS A FIDEICOMISOS RESIDENTES",value:["329",0]},{text:"330 - DIVIDENTOS GRAVADOS DISTRIBUIDOS EN ACCIONES (REINVERSIONES DE UTILIDADES SIN DERECHO A REDUCCION TARIFA IR)",value:["330",0]},{text:"331 - DIVIDENDOS EXENTOS DISTRIBUIDOS EN ACCIONES (REINVERSION DE UTILIDADES CON DERECHO A REDUCCION TARIFA IR)",value:["331",0]},{text:"332 - OTRAS COMPRAS DE BIENES Y SERVICIOS NO SUJETAS A RETENCION",value:["332",0]},{text:"332A - POR LA ENAJENACION OCASIONAL DE ACCIONES O PARTICIPACIONES Y TITULOS VALORES",value:["332A",0]},{text:"332B - COMPRA DE BIENES INMUEBLES",value:["332B",0]},{text:"332C - TRANSPORTE PUBLICO DE PASAJEROS",value:["332C",0]},{text:"332D - PAGOS EN EL PAIS POR TRANS. DE PASAJ O TRANS. INTERN. DE CARGA, A CIAS NACIONALES O EXTRANJERAS DE AVIACION O MARITIMAS",value:["332D",0]},{text:"332E - VALORES ENTREGADOS POR LAS COOPERATIVAS DE TRASNPORTE A SUS SOCIOS",value:["332E",0]},{text:"332F - COMPRAVENTA DE DIVISAS DISTINTAS AL DOLAR DE LOS ESTADOS UNIDOS DE AMERICA",value:["332F",0]},{text:"332G - PAGOS CON TARJETA DE CREDITO",value:["332G",0]},{text:"332H - PAGOS AL EXTERIOR TARJETA DE CREDITO REPORTADA POR LA EMISORA DE TARJETA DE CREDITO, SOLO RECAP",value:["332H",0]},{text:"332I - PAGO A TRAVES DE CONVENIO DE DEBITO (CLIENTES IFIS)",value:["332I",0]},{text:"333 - ENAJENACION DE DERECHOS REPRESENTATIVOS DE CAPITAL Y OTROS DERECHOS COTIZADOS EN BOLSA ECUATORIANA",value:["333",.2]},{text:"334 - ENAJENACION DE DERECHOS REPRESENTATIVOS DE CAPITAL Y OTROS DERECHOS NO COTIZADOS EN BOLSA ECUATORIANA",value:["334",1]},{text:"335 - POR LOTERIAS, RIFAS, APUESTAS Y SIMILARES",value:["335",15]},{text:"336 - POR VENTA DE COMBUSTIBLES A COMERCIALIZADORAS",value:["336",.2]},{text:"337 - POR VENTA DE COMBUSTIBLES A DISTRIBUIDORES",value:["337",.3]},{text:"338 - COMPRA LOCAL DE BANANO A PRODUCTOR",value:["338",0]},{text:"323G - POR RF: INVERSIONES (CAPTACIONES) RENDIMIENTOS DISTINTOS DE AQUELLOS PAGADOS A IFIS",value:["323G",2]},{text:"323H - POR RF: OBLIGACIONES",value:["323H",2]},{text:"323I - POR RF: BONOS CONVERTIBLE EN ACCIONES",value:["323I",2]},{text:"323M - POR RF: INVERSIONES EN TITULOS VALORES EN RENTA FIJA GRAVADOS",value:["323M",2]},{text:"323N - POR RF: INVERSIONES EN TITULOS VALORE EN RENTA FIJA EXENTOS",value:["323N",0]},{text:"323O - POR RF: INTERESES PAGADOS A BANCOS Y OTRAS ENTIDADES SOMETIDAS AL CONTROL DE LA SUPERINTENDENCIA DE BANCOS Y DE LA EPS",value:["323O",0]},{text:"323P - POR RF: INTERESES PAGADOS POR ENTIDADES DEL SECTOR PUBLICO A FAVOR DE SUJETOS PASIVOS",value:["323P",2]},{text:"323N - POR RF: INVERSIONES EN TITULOS VALORE EN RENTA FIJA EXENTOS",value:["323N",0]}],ivaDetalle:[{text:"1 - 30%",value:["1",30]},{text:"2 - 70%",value:["2",70]},{text:"3 - 100%",value:["3",100]},{text:"5 - 100% VALOR RETENIDO DISTRIBUIDOR",value:["5",100]},{text:"6 - 100% VALOR RETENIDO VOCEADORES VARIOS",value:["6",100]},{text:"7 - 0%",value:["7",0]},{text:"8 - 0% NO PROCEDE RETENCION",value:["1",30]},{text:"9 - 10%",value:["9",10]},{text:"10 - 20%",value:["10",20]}],impuesto:"",totalComprobante:0,subtotalComprobante:0,claveAccesodig:"",pfAnio:"",pfMes:"",buscar:"",texto:"",tipoBusqueda:"",comprobantes:[],cabeceraComprobantes:[{text:"Opciones",value:"opciones"},{text:"Num Comprobante",value:"numComprobante"},{text:"Descripcion",value:"descripcion"},{text:"SubTotal",value:"subTotal"},{text:"Total",value:"total"},{text:"Fecha de emision",value:"fechaFactura",sorteable:"true"}],numComprobante:"",ptoemision:"",idDatos:"",tipoIdentificacion:"",direccion_sretenido:"",telefono_sretenido:"",email_sretenido:"",razonsocial_sretenido:"",ruc_sretenido:"",detalles:[],cabeceraDetalles:[{text:"Opciones",value:"opciones"},{text:"Codigo",value:"codigo"},{text:"Codigo retencion",value:"codigoRetener"},{text:"Base imponible",value:"baseImponible"},{text:"Porcentaje a retener",value:"porcentajeReneter"},{text:"Valor retenido",value:"valorRetenido"},{text:"Codigo doc.sust.",value:"codDocSustento"},{text:"Num. doc. sust.",value:"numDocSustento"},{text:"F. emis. doc. sust",value:"fechaEmisionDocSustento"}],modalComprobantes:0,documentos:[{text:"FACTURA",value:"01"},{text:"NOTA DEBITO",value:"05"},{text:"LIQ. COMPRAS",value:"03"},{text:"OTRO",value:0}],documento:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",editedIndex:-1,_id:"",dialog:!1,search:""}}},Pe=je,Me=Object(m["a"])(Pe,Te,Re,!1,null,null,null),Ve=Me.exports;h()(Me,{VAutocomplete:Dt["a"],VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VRadio:Rt["a"],VRadioGroup:jt["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Secuenciales")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"900px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"Punto de emision"},model:{value:t.ptoEmision,callback:function(e){t.ptoEmision=e},expression:"ptoEmision"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-autocomplete",{attrs:{items:t.usuarios,label:"Usuario"},model:{value:t.codigoUsuario,callback:function(e){t.codigoUsuario=e},expression:"codigoUsuario"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-autocomplete",{attrs:{items:t.distribuidores,label:"Distribuidor"},model:{value:t.codigoDistribuidor,callback:function(e){t.codigoDistribuidor=e},expression:"codigoDistribuidor"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n                    Nuevo establecimiento\n                  ")],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[a("v-text-field",{model:{value:e.item.secuencial,callback:function(a){t.$set(e.item,"secuencial",a)},expression:"props.item.secuencial"}})],1),a("td",[a("v-text-field",{model:{value:e.item.documento,callback:function(a){t.$set(e.item,"documento",a)},expression:"props.item.documento"}})],1)]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.data,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.codigoUsuario.nombres))]),a("td",[t._v(t._s(e.item.codigoDistribuidor.razonSocial))]),a("td",[t._v("00"+t._s(e.item.ptoEmision))])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},Fe=[],$e={data:function(){return{data:[],ptoEmision:0,codigoDistribuidor:"",codigoUsuario:"",usuarios:[],distribuidores:[],obligadoContabilidad:0,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Secuencial",value:"secuencial",sortable:!1},{text:"Documento",value:"documento",sortable:!1}],detalles:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Usuario",value:"codigoUsuario",sortable:!0},{text:"Distribuidor",value:"codigoDistribuidor",sortable:!0},{text:"Pto. Emision",value:"ptoEmision",sortable:!0}],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",editedIndex:-1,_id:"",dialog:!1,search:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{},props:{},methods:{obtenerUsuarios:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("usuario/list",o).then((function(a){e=a.data,e.map((function(e){t.usuarios.push({text:e.nombres,value:e._id})}))})).catch((function(t){console.log(t)}))},obtenerDistribuidores:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("distribuidor/list",o).then((function(a){e=a.data,e.map((function(e){t.distribuidores.push({text:e.nombreComercial,value:e._id})}))})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},AgregarDetalle:function(){var t=this;t.detalles.unshift({secuencial:"",documento:""})},eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("DATA/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},validar:function(){var t=this;return this.valida=0,this.validaMensaje=[],0==this.ptoEmision.length&&this.validaMensaje.push("*Pto Emision no puede estar vacío."),0==this.codigoDistribuidor.length&&this.validaMensaje.push("*Distribuidor no puede estar vacío."),0==this.codigoUsuario.length&&this.validaMensaje.push("*Usuario no puede estar vacío."),this.detalles.forEach((function(e){0==e.secuencial.length&&t.validaMensaje.push("*Secuencial no puede estar vacío."),0==e.documento.length&&t.validaMensaje.push("*Documento no puede estar vacío.")})),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("data/actualizar",{_id:this._id,ptoEmision:this.ptoEmision,codigoUsuario:this.codigoUsuario,codigoDistribuidor:this.codigoDistribuidor,secuenciales:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("data/add",{ptoEmision:this.ptoEmision,codigoUsuario:this.codigoUsuario,codigoDistribuidor:this.codigoDistribuidor,secuenciales:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("data/list",a).then((function(e){t.data=e.data})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.codigoDistribuidor="",this.codigoUsuario="",this.ptoEmision="",this.detalles=[],this.valida=0,this.validaMensaje=[],this.editedIndex=-1},editItem:function(t){this._id=t._id,this.ptoEmision=t.ptoEmision,this.codigoUsuario=t.codigoUsuario._id,this.codigoDistribuidor=t.codigoDistribuidor._id,this.listarDetalle(t._id),this.dialog=!0,this.editedIndex=1},listarDetalle:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("data/queryId?_id="+t,o).then((function(t){e.detalles=t.data.secuenciales})).catch((function(t){console.log(t)}))},formatearFecha:function(t){if(t)return _t()(String(t)).format("MM/DD/YYYY")}},created:function(){this.listar(),this.obtenerDistribuidores(),this.obtenerUsuarios()}},Ue=$e,we=Object(m["a"])(Ue,ye,Fe,!1,null,null,null),ze=we.exports;h()(we,{VAutocomplete:Dt["a"],VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]});var Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Perchas")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Percha"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n                    Nuevo nivel\n                  ")],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[a("v-text-field",{model:{value:e.item.nivel,callback:function(a){t.$set(e.item,"nivel",a)},expression:"props.item.nivel"}})],1)]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),t.verNuevo?t._e():a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabecera,items:t.perchas,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verDetalle(e.item)}}},[t._v("tab")])],1),a("td",{staticClass:"blue--text"},[t._v("\n          "+t._s(e.item.descripcion)+"\n        ")])]}}],null,!1,3812771943)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},Be=[],Ge={created:function(){this.listar()},methods:{validar:function(){var t=this;return this.valida=0,this.validaMensaje=[],0==this.descripcion.length&&this.validaMensaje.push("*Descripcion no puede estar vacío."),this.detalles.forEach((function(e){0==e.nivel.length&&t.validaMensaje.push("*Nivel no puede estar vacío.")})),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("perchas/actualizar",{_id:this._id,descripcion:this.descripcion,niveles:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("perchas/add",{descripcion:this.descripcion,niveles:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},verDetalle:function(t){var e=this;this.dialog=!0,this.editedIndex=1,this._id=t._id,this.descripcion=t.descripcion;var a={Token:this.$store.state.token},o={headers:a};d.a.get("perchas/query?_id="+t._id,o).then((function(t){e.detalles=t.data.niveles})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},AgregarDetalle:function(){var t=this;t.detalles.push({nivel:""})},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("perchas/list",a).then((function(e){200==e.status?t.perchas=e.data:console.log(e)})).catch((function(t){console.log(t)}))},limpiar:function(){this.descripcion="",this.detalles=[],this.editedIndex=-1},close:function(){this.dialog=!1,this.limpiar()}},props:{},watch:{},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},data:function(){return{descripcion:"",cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Nivel",value:"nivel",sortable:!1}],detalles:[],search:"",cabecera:[{text:"Niveles",value:"niveles",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!1}],perchas:[],verNuevo:0,editedIndex:-1,dialog:!1,valida:0,validaMensaje:[]}}},Ye=Ge,qe=Object(m["a"])(Ye,Le,Be,!1,null,null,null),He=qe.exports;h()(qe,{VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:dt["a"],VContainer:_["a"],VDataTable:ut["a"],VDialog:vt["a"],VDivider:mt["a"],VFlex:A["a"],VIcon:I["a"],VLayout:E["a"],VSpacer:P["a"],VTextField:ot["a"],VToolbar:M["a"],VToolbarTitle:y["a"]}),o["a"].use(U["a"]);var Je=new U["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:Z,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/perchas",name:"perchas",component:He,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/asignarperchas",name:"asignarperchas",component:Se,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/secuenciales",name:"secuenciales",component:ze,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/retenciones",name:"retenciones",component:Ve,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/cuarentena",name:"cuarentena",component:De,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/compras",name:"compras",component:be,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/clientes",name:"clientes",component:de,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/usuarios",name:"usuarios",component:ie,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/crearfabricantes",name:"crearfabricantes",component:Kt,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/creardistribuidores",name:"creardistribuidores",component:qt,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/crearbodegas",name:"crearbodegas",component:wt,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/inventario",name:"inventario",component:Et,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/proveedores",name:"proveedores",component:ht,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/facturas",name:"facturas",component:Mt,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0}},{path:"/login",name:"login",component:st,meta:{libre:!0}},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]});Je.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.libre}))?a():B.state.usuario&&"609ed2679b1f0569cef1bf4d"==B.state.usuario.rol?t.matched.some((function(t){return t.meta.administrador}))&&a():B.state.usuario&&"609ed45086d0416b4a050c57"==B.state.usuario.rol?t.matched.some((function(t){return t.meta.gerente}))&&a():B.state.usuario&&"609ed47286d0416b4a050c58"==B.state.usuario.rol?t.matched.some((function(t){return t.meta.guardaalmacen}))&&a():B.state.usuario&&"609ed47b86d0416b4a050c59"==B.state.usuario.rol?t.matched.some((function(t){return t.meta.contabilidad}))&&a():B.state.usuario&&"609ed48086d0416b4a050c5a"==B.state.usuario.rol?t.matched.some((function(t){return t.meta.compraspublica}))&&a():B.state.usuario&&"609ed48786d0416b4a050c5b"==B.state.usuario.rol?t.matched.some((function(t){return t.meta.supervisor}))&&a():B.state.usuario&&"60c0e96c13a9bc08b085f378"==B.state.usuario.rol?t.matched.some((function(t){return t.meta.facturacion}))&&a():a({name:"login"})}));var Ze=Je;o["a"].config.productionTip=!1,d.a.defaults.baseURL="https://integracont.herokuapp.com/api/",new o["a"]({router:Ze,store:B,render:function(t){return t($)}}).$mount("#app")},"64a9":function(t,e,a){},bcf9:function(t,e,a){}});
//# sourceMappingURL=app.8091571b.js.map