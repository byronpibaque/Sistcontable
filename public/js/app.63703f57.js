(function(t){function e(e){for(var o,s,n=e[0],c=e[1],l=e[2],d=0,v=[];d<n.length;d++)s=n[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&v.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,s=1;s<a.length;s++){var c=a[s];0!==i[c]&&(o=!1)}o&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},i={app:0},r=[];function s(t){return n.p+"js/"+({about:"about"}[t]||t)+"."+{about:"eb2eb98c","chunk-2d216214":"a9f4880f","chunk-71d237f0":"33b2ebc9"}[t]+".js"}function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,o){a=i[t]=[e,o]}));e.push(a[2]=o);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.src=s(t);var l=new Error;r=function(e){c.onerror=c.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,a[1](l)}i[t]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0136":function(t,e,a){},"034f":function(t,e,a){"use strict";a("64a9")},"039a":function(t,e,a){"use strict";a("3760")},"17dd":function(t,e,a){t.exports=a.p+"img/INTEGRA.f989e20c.png"},"1cae":function(t,e,a){"use strict";a("949b")},3760:function(t,e,a){},"3c3d":function(t,e,a){"use strict";a("bcf9")},4678:function(t,e,a){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id="4678"},"508c":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var o=a("2b0e"),i=a("bb716"),r=(a("da64"),a("2e15")),s=a.n(r);o["a"].use(i["a"],{theme:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},options:{customProperties:!0},iconfont:"mdi",lang:{locales:{es:s.a},current:"es"}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[t.logueado?a("v-navigation-drawer",{attrs:{fixed:"",clipped:t.$vuetify.breakpoint.mdAndUp,app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[[a("v-list-tile",{attrs:{to:{name:"home"}}},[a("v-list-tile-action",[a("v-icon",[t._v("home")])],1),a("v-list-tile-title",[t._v("Inicio")])],1)],[a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Bodega")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"compras"}}},[a("v-list-tile-action",[a("v-icon",[t._v("post_add")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Compras")])],1)],1),a("v-list-tile",{staticClass:"red--text",attrs:{to:{name:"egresos"}}},[a("v-list-tile-action",[a("v-icon",[t._v("view_in_ar")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Egresos")])],1)],1),a("v-list-tile",{staticClass:"orange--text",attrs:{to:{name:"cuarentena"}}},[a("v-list-tile-action",[a("v-icon",[t._v("dashboard")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Cuarentena")])],1)],1),a("v-list-tile",{staticClass:"purple--text",attrs:{to:{name:"asignarperchas"}}},[a("v-list-tile-action",[a("v-icon",[t._v("trending_flat")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Asignacion de perchas")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"perchas"}}},[a("v-list-tile-action",[a("v-icon",[t._v("precision_manufacturing")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Perchas")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"inventario"}}},[a("v-list-tile-action",[a("v-icon",[t._v("inventory")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Inventario")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"crearfabricantes"}}},[a("v-list-tile-action",[a("v-icon",[t._v("precision_manufacturing")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Fabricantes")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"temp_humedad"}}},[a("v-list-tile-action",[a("v-icon",[t._v("dew_point")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Temperatura y Humedad")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"product_caducar"}}},[a("v-list-tile-action",[a("v-icon",[t._v("schedule")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Productos a Caducar")])],1)],1)],1),t.esAdministrador||t.esGerente||t.esGuardaAlmacen||t.esSupervisor||t.esFacturacion||t.esContabilidad||t.esComprasPublicas?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Personas")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"proveedores"}}},[a("v-list-tile-action",[a("v-icon",[t._v("people")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Proveedores")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"clientes"}}},[a("v-list-tile-action",[a("v-icon",[t._v("people")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Clientes")])],1)],1)],1):t._e(),t.esAdministrador||t.esGerente||t.esGuardaAlmacen||t.esSupervisor||t.esFacturacion||t.esContabilidad||t.esComprasPublicas?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Documentos Comerciales")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"facturas"}}},[a("v-list-tile-action",[a("v-icon",[t._v("article")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Facturas")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"retenciones"}}},[a("v-list-tile-action",[a("v-icon",[t._v("description")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Retenciones")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"acta_entrega"}}},[a("v-list-tile-action",[a("v-icon",[t._v("description")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Acta de Entrega")])],1)],1)],1):t._e(),t.esAdministrador||t.esGerente||t.esGuardaAlmacen||t.esSupervisor||t.esFacturacion||t.esContabilidad||t.esComprasPublicas?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Consultas")])],1)],1),a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:""}}},[a("v-list-tile-action",[a("v-icon",[t._v("article")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Consulta Facturas")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"consultaretenciones"}}},[a("v-list-tile-action",[a("v-icon",[t._v("description")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Consulta Retenciones")])],1)],1),a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"consultacuentasporpagar"}}},[a("v-list-tile-action",[a("v-icon",[t._v("description")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Consulta cuentas por pagar")])],1)],1)],1):t._e(),t.esAdministrador||t.esGerente||t.esSupervisor||t.esFacturacion?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Administración")])],1)],1),t.esAdministrador||t.esGerente||t.esSupervisor?a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"creardistribuidores"}}},[a("v-list-tile-action",[a("v-icon",[t._v("supervisor_account")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Distribuidores")])],1)],1):t._e(),t.esAdministrador||t.esGerente||t.esSupervisor?a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"crearbodegas"}}},[a("v-list-tile-action",[a("v-icon",[t._v("admin_panel_settings")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Bodegas")])],1)],1):t._e(),t.esAdministrador||t.esGerente||t.esSupervisor?a("v-list-tile",{staticClass:"blue--text",attrs:{to:{name:"usuarios"}}},[a("v-list-tile-action",[a("v-icon",[t._v("people")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Usuarios")])],1)],1):t._e(),t.esAdministrador||t.esGerente||t.esSupervisor||t.esFacturacion?a("v-list-tile",{staticClass:"green--text",attrs:{to:{name:"secuenciales"}}},[a("v-list-tile-action",[a("v-icon",[t._v("rotate_right")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Secuenciales")])],1)],1):t._e()],1):t._e(),[a("v-list-tile",{attrs:{to:{name:"set-credenciales"}}},[a("v-list-tile-title",[a("v-icon",[t._v("lock")]),t._v("\n              Cambiar Usuario/Contraseña\n          ")],1)],1)]]],2)],1):t._e(),a("v-toolbar",{attrs:{id:"tool",dark:"",app:"","clipped-left":t.$vuetify.breakpoint.mdAndUp,fixed:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3",staticStyle:{width:"300px"}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("span",{staticClass:"hidden-sm-and-down"},[t._v("MENÚ")])],1),t.$store.state.usuario?a("span",{staticClass:"hidden-sm-and-down"},[t._v("Usuario: "+t._s(t.usuario()))]):t._e(),a("v-spacer"),t.$store.state.usuario?a("span",{staticClass:"hidden-sm-and-down"},[t._v("Rol: "+t._s(t.rol()))]):t._e(),a("v-spacer"),t.$store.state.usuario?a("span",{staticClass:"hidden-sm-and-down"},[t._v("Distribuidor: "+t._s(t.farmacia()))]):t._e(),a("v-spacer"),t.logueado?a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.salir()}}},[a("v-icon",[t._v("logout")])],1):a("v-btn",{attrs:{icon:"",to:{name:t.login}}},[a("v-icon",[t._v("apps")])],1)],1),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)],1),a("v-footer",{attrs:{dark:"",height:"auto"}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-card",{staticClass:"white--text",attrs:{flat:"",tile:"",id:"tool"}},[a("v-card-text",{staticClass:"white--text pt-0"},[t._v("Acounting ©2023")])],1)],1)],1)],1)],1)},c=[],l=(a("4917"),a("bc3a")),d=a.n(l),u={name:"App",data:function(){return{drawer:!0,login:"",user:"",rold:"",farma:""}},computed:{logueado:function(){return this.$store.state.usuario},esAdministrador:function(){return this.$store.state.usuario&&"609ed2679b1f0569cef1bf4d"==this.$store.state.usuario.rol},esGerente:function(){return this.$store.state.usuario&&"609ed45086d0416b4a050c57"==this.$store.state.usuario.rol},esGuardaAlmacen:function(){return this.$store.state.usuario&&"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol},esContabilidad:function(){return this.$store.state.usuario&&"609ed47b86d0416b4a050c59"==this.$store.state.usuario.rol},esComprasPublicas:function(){return this.$store.state.usuario&&"609ed48086d0416b4a050c5a"==this.$store.state.usuario.rol},esSupervisor:function(){return this.$store.state.usuario&&"609ed48786d0416b4a050c5b"==this.$store.state.usuario.rol},esFacturacion:function(){return this.$store.state.usuario&&"60c0e96c13a9bc08b085f378"==this.$store.state.usuario.rol},esQuimico:function(){return this.$store.state.usuario&&"6425b4e63015a625b227f4b7"==this.$store.state.usuario.rol}},created:function(){this.$store.dispatch("autoLogin")},methods:{farmacia:function(){var t=this,e={Token:this.$store.state.token},a=this.$store.state.usuario.codigoDistribuidor,o={headers:e};return void 0!=a?d.a.get("distribuidor/query?_id="+a,o).then((function(e){t.farma=e.data.nombreComercial})).catch((function(t){console.log(t)})):t.farma="ADMINISTRADOR",this.farma},usuario:function(){return this.$store.state.usuario.usuario},rol:function(){var t=this,e={Token:this.$store.state.token},a=this.$store.state.usuario.rol,o={headers:e};return d.a.get("rol/query?_id="+a,o).then((function(e){t.rold=e.data.descripcion})).catch((function(t){console.log(t)})),this.rold},isMobile:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/BlackBerry/i))},salir:function(){this.$store.dispatch("salir"),this.Farmacia="",this.NombreUsuario="",this.usuarios=[],this.farmacias=[]}}},v=u,m=(a("034f"),a("2877")),p=a("6544"),h=a.n(p),f=a("7496"),b=a("8336"),g=a("b0af"),x=a("99d9"),C=a("a523"),_=a("549c"),A=a("0e8f"),E=a("553a"),D=a("132d"),O=a("a722"),I=a("8860"),T=a("56b0"),S=a("ba95"),k=a("40fe"),R=a("5d23"),N=a("f774"),P=a("0789"),y=a("9910"),F=a("71d9"),j=a("706c"),M=a("2a7f"),V=Object(m["a"])(v,n,c,!1,null,null,null),w=V.exports;h()(V,{VApp:f["a"],VBtn:b["a"],VCard:g["a"],VCardText:x["b"],VContainer:C["a"],VContent:_["a"],VFlex:A["a"],VFooter:E["a"],VIcon:D["a"],VLayout:O["a"],VList:I["a"],VListGroup:T["a"],VListTile:S["a"],VListTileAction:k["a"],VListTileContent:R["a"],VListTileTitle:R["b"],VNavigationDrawer:N["a"],VSlideYTransition:P["d"],VSpacer:y["a"],VToolbar:F["a"],VToolbarSideIcon:j["a"],VToolbarTitle:M["a"]});var L=a("8c4f"),U=a("2f62"),$=a("04e1"),B=a.n($);o["a"].use(U["a"]);var z=new U["a"].Store({state:{token:null,usuario:null},mutations:{setToken:function(t,e){t.token=e},setUsuario:function(t,e){t.usuario=e}},actions:{guardarToken:function(t,e){var a=t.commit;a("setToken",e),a("setUsuario",B()(e)),localStorage.setItem("token",e)},autoLogin:function(t){var e=t.commit,a=localStorage.getItem("token");a&&(e("setToken",a),e("setUsuario",B()(a))),_o.push({name:"home"})},salir:function(t){var e=t.commit;e("setToken",null),e("setUsuario",null),localStorage.removeItem("token"),_o.push({name:"login"})}}}),G=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-flex",[o("v-img",{staticClass:"my-3",attrs:{src:a("17dd"),contain:"",height:"400"}})],1)},H=[],q=a("adda"),Y={},J=Object(m["a"])(Y,G,H,!1,null,null,null),X=J.exports;h()(J,{VFlex:A["a"],VImg:q["a"]});var Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"principal"}},[a("v-layout",{attrs:{"justify-center":""}},[a("div",{attrs:{id:"login"}},[a("div",{attrs:{id:"cajas"}},[a("v-flex",[a("v-text-field",{attrs:{"prepend-icon":"account_circle",autofocus:"",color:"accent",label:"Usuario",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-flex",[a("v-select",{attrs:{items:t.listDistribuidores,"item-text":"nombreComercial","item-value":"codigoDistribuidor",label:"Selecciona una Distribuidora","persistent-hint":"","return-object":"","single-line":"","prepend-icon":"inventory"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1),a("v-flex",[a("v-text-field",{attrs:{"prepend-icon":"lock",type:"password",color:"accent",label:"Contraseña",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.ingresar.apply(null,arguments)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.errorM,expression:"errorM"}],attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorM)}})]),a("v-flex",[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-btn",{staticClass:"boton",on:{click:function(e){return t.ingresar()}}},[t._v("INICIAR")])],1)],1)],1)])])],1)},Q=[],K=(a("ac6a"),a("96cf"),a("3b8d")),W=(a("3c43"),a("3d20")),tt=a.n(W),et={name:"Login",created:function(){},computed:{},data:function(){return{listDistribuidores:[],select:{codigoDistribuidor:"60a285006626313363286dfe",nombreComercial:"COFARMO DISTRIBUCIONES"},email:"",password:"",errorM:null,ipobt:"",ipalmacenada:"",val:[]}},methods:{comprobacion:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e!=a){t.next=4;break}return t.abrupt("return",!0);case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}(),getDistribuidoras:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,a={Token:this.$store.state.token},o={headers:a},d.a.get("distribuidor/list",o).then((function(t){var a=t.data;a.forEach((function(t){e.listDistribuidores.push({codigoDistribuidor:t._id,nombreComercial:t.nombreComercial})}))})).catch((function(t){console.log(t)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),ingresar:function(){var t=this;d.a.post("usuario/login?data="+this.email+"&clave="+this.password+"&codigoDistribuidor="+this.select.codigoDistribuidor).then((function(e){e.data.user.login.codigoDistribuidor,t.$store.dispatch("guardarToken",e.data.tokenReturn),t.$router.push({name:"home"})})).catch((function(t){console.log(t),tt.a.fire({title:"<strong>Error</strong>",icon:"error",html:t.response.data,showCloseButton:!0,showCancelButton:!0,focusConfirm:!1})}))}},mounted:function(){this.getDistribuidoras()}},at=et,ot=(a("039a"),a("b56d")),it=a("2677"),rt=Object(m["a"])(at,Z,Q,!1,null,null,null),st=rt.exports;h()(rt,{VBtn:b["a"],VFlex:A["a"],VLayout:O["a"],VSelect:ot["a"],VTextField:it["a"]});var nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Proveedores")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"RUC/CI"},model:{value:t.ruc,callback:function(e){t.ruc=e},expression:"ruc"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Razon Social"},model:{value:t.razonsocial,callback:function(e){t.razonsocial=e},expression:"razonsocial"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Direccion"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("span",[t._v("CONTACTO")]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Nombre de contacto"},model:{value:t.nombresC,callback:function(e){t.nombresC=e},expression:"nombresC"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Telefono de contacto"},model:{value:t.telefonoC,callback:function(e){t.telefonoC=e},expression:"telefonoC"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Correo de contacto"},model:{value:t.correoC,callback:function(e){t.correoC=e},expression:"correoC"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Activar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Item")]):t._e(),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("activar")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar")]):t._e(),t._v("\n            el item "+t._s(t.adNombre)+"\n          ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("Activar")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("Desactivar")]):t._e()],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cliente,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.razonsocial))]),a("td",[t._v(t._s(e.item.ruc))]),a("td",[t._v(t._s(e.item.direccion))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},ct=[],lt={data:function(){return{search:"",cliente:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Razon Social",value:"razonsocial",sortable:!0},{text:"RUC",value:"ruc",sortable:!0},{text:"Direccion",value:"direccion",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],editedIndex:-1,_id:"",dialog:!1,ruc:"",razonsocial:"",direccion:"",nombresC:"",telefonoC:"",correoC:"",contacto:[],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("proveedor/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("proveedor/list",a).then((function(e){t.cliente=e.data})).catch((function(t){console.log(t)}))},limpiar:function(){this._id="",this.nombresC="",this.correoC="",this.telefonoC="",this.direccion="",this.razonsocial="",this.ruc="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.ruc.length&&this.validaMensaje.push("*RUC no puede estar vacío."),0==this.razonsocial.length&&this.validaMensaje.push("*Razon Social no puede estar vacío."),0==this.direccion.length&&this.validaMensaje.push("*Direccion no puede estar vacío."),0==this.nombresC.length&&this.validaMensaje.push("*Nombre de contacto no puede estar vacío."),0==this.telefonoC.length&&this.validaMensaje.push("*Telefono de contacto no puede estar vacío."),0==this.correoC.length&&this.validaMensaje.push("*Correo de contaco no puede estar vacío."),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?(this.contacto.push({nombres:this.nombresC,telefono:this.telefonoC,correo:this.correoC}),d.a.put("proveedor/actualizar",{_id:this._id,ruc:t.ruc,razonsocial:t.razonsocial,direccion:t.direccion,contacto:t.contacto,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))):(this.contacto.push({nombres:this.nombresC,telefono:this.telefonoC,correo:this.correoC}),d.a.post("proveedor/add",{ruc:t.ruc,razonsocial:t.razonsocial,direccion:t.direccion,contacto:t.contacto,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))))},editItem:function(t){var e=this;this._id=t._id,this.ruc=t.ruc,this.razonsocial=t.razonsocial,this.direccion=t.direccion,t.contacto.forEach((function(t){e.nombresC=t.nombres,e.correoC=t.correo,e.telefonoC=t.telefono})),this.dialog=!0,this.editedIndex=1},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombres,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this;d.a.put("persona/activate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this;d.a.put("persona/deactivate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()}}},dt=lt,ut=a("12b2"),vt=a("8fea"),mt=a("169a"),pt=a("ce7e"),ht=Object(m["a"])(dt,nt,ct,!1,null,null,null),ft=ht.exports;h()(ht,{VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var bt,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Inventario")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-flex",[a("v-btn",{staticStyle:{"background-color":"#87d738"},attrs:{color:"white",small:"",flat:""},on:{click:function(e){t.modaltipoproducto=1,t.listar_tipoproductos()}}},[a("v-icon",[t._v("precision_manufacturing")]),t._v("\n          TIPOS PRODUCTOS\n        ")],1),a("v-btn",{staticStyle:{"background-color":"#d4850c"},attrs:{color:"white",small:"",flat:""},on:{click:function(e){t.modalprincipioactivo=1,t.listar_principiosactivos()}}},[a("v-icon",[t._v("biotech")]),t._v("\n          Principio Activo\n        ")],1),a("v-btn",{staticStyle:{"background-color":"#1aab60"},attrs:{color:"white",flat:"",small:""},on:{click:function(e){t.modalpresentacion=1,t.listar_presentacion()}}},[a("v-icon",[t._v("colorize")]),t._v("\n          PRESENTACIÓN\n        ")],1),a("v-btn",{staticStyle:{"background-color":"#628c0e"},attrs:{color:"white",flat:"",small:""},on:{click:function(e){t.modalconcentracion=1,t.listar_concentracion()}}},[a("v-icon",[t._v("science")]),t._v("\n          CONCENTRACIÓN\n        ")],1),a("v-btn",{staticStyle:{"background-color":"#d8671e"},attrs:{color:"white",flat:"",small:""},on:{click:function(e){t.modalproducto=1,t.ObtenerTipoProductos(),t.ObtenerConcentraciones(),t.ObtenerPrincipios(),t.ObtenerPresentaciones(),t.listar_productos()}}},[a("v-icon",[t._v("article")]),t._v("\n          PRODUCTOS\n        ")],1),a("v-btn",{staticStyle:{"background-color":"#d8671e"},attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.getReporteExcel()}}},[a("v-icon",[t._v("article")]),t._v("\n          Reporte\n        ")],1)],1),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-flex",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.esGuardaAlmacen,expression:"esGuardaAlmacen"}],staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){t.modalInventario=1,t.obetenerProveedores(),t.obtenerFabricantes(),t.obtenerProductos(),t.obtenerBodega()}}},[a("v-icon",[t._v("save")]),t._v("\n          NUEVO\n        ")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.modaltipoproducto,callback:function(e){t.modaltipoproducto=e},expression:"modaltipoproducto"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGREGAR TIPO DE PRODUCTO")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"edit",label:"Descripcion"},model:{value:t.descripcion_tp,callback:function(e){t.descripcion_tp="string"===typeof e?e.trim():e},expression:"descripcion_tp"}}),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.guardar_tipoproductos(t.descripcion_tp)}}},[a("v-icon",[t._v("save")]),t._v("\n                  GUARDAR\n                ")],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_tipoproducto,items:t.ARR_tipoproducto,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar_tipoproductos(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizar_tipoproductos(e.item)}}},[t._v("refresh")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.descripcion)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modaltipoproducto=0,t.limpiar()}}},[t._v("Cerrar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.modalprincipioactivo,callback:function(e){t.modalprincipioactivo=e},expression:"modalprincipioactivo"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGREGAR PRINCIPIOS ACTIVOS")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"edit",label:"Descripcion"},model:{value:t.descripcion_pa,callback:function(e){t.descripcion_pa=e},expression:"descripcion_pa"}}),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.guardar_principiosactivos(t.descripcion_pa)}}},[a("v-icon",[t._v("save")]),t._v("\n                  GUARDAR\n                ")],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_principioactivo,items:t.ARR_principioactivo,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar_principiosactivos(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizar_principiosactivos(e.item)}}},[t._v("refresh")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.descripcion)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modalprincipioactivo=0,t.limpiar()}}},[t._v("\n            Cerrar\n          ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.modalpresentacion,callback:function(e){t.modalpresentacion=e},expression:"modalpresentacion"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGREGAR PRESENTACIONES")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"edit",label:"Descripcion"},model:{value:t.descripcion_p,callback:function(e){t.descripcion_p=e},expression:"descripcion_p"}}),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.guardar_presentacion(t.descripcion_p)}}},[a("v-icon",[t._v("save")]),t._v("\n                  GUARDAR\n                ")],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_presentacion,items:t.ARR_presentacion,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar_presentacion(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizar_presentacion(e.item)}}},[t._v("refresh")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.descripcion)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modalpresentacion=0,t.limpiar()}}},[t._v("Cerrar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.modalconcentracion,callback:function(e){t.modalconcentracion=e},expression:"modalconcentracion"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGREGAR CONCENTRACIONES")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"edit",label:"Descripcion"},model:{value:t.descripcion_c,callback:function(e){t.descripcion_c=e},expression:"descripcion_c"}}),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.guardar_concentracion(t.descripcion_c)}}},[a("v-icon",[t._v("save")]),t._v("\n                  GUARDAR\n                ")],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_concentracion,items:t.ARR_concentracion,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar_concentracion(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizar_concentracion(e.item)}}},[t._v("refresh")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.descripcion)+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modalconcentracion=0,t.limpiar()}}},[t._v("Cerrar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"950"},model:{value:t.modalproducto,callback:function(e){t.modalproducto=e},expression:"modalproducto"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGREGAR PRODUCTOS")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-autocomplete",{attrs:{items:t.tipoproductos,label:"Tipo producto"},on:{change:function(e){return t.validarInsumos(t.codigoTipoproducto)}},model:{value:t.codigoTipoproducto,callback:function(e){t.codigoTipoproducto=e},expression:"codigoTipoproducto"}})],1),t.banderainsumo?a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.principioactivos,label:"Principio activo"},model:{value:t.codigoPrincipioactivo,callback:function(e){t.codigoPrincipioactivo=e},expression:"codigoPrincipioactivo"}})],1):t._e(),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-autocomplete",{attrs:{items:t.presentaciones,label:"Presentacion"},model:{value:t.codigoPresentacion,callback:function(e){t.codigoPresentacion=e},expression:"codigoPresentacion"}})],1),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-autocomplete",{attrs:{items:t.concentraciones,label:"Concentracion"},model:{value:t.codigoConcentracion,callback:function(e){t.codigoConcentracion=e},expression:"codigoConcentracion"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:t.descripcion_p,callback:function(e){t.descripcion_p=e},expression:"descripcion_p"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"Detalle concentracion"},model:{value:t.detalleConcentracion,callback:function(e){t.detalleConcentracion=e},expression:"detalleConcentracion"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{type:"number",label:"Contenido neto"},model:{value:t.contenidoNeto,callback:function(e){t.contenidoNeto=e},expression:"contenidoNeto"}})],1),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{type:"number",label:"F x Caja"},model:{value:t.fraccionCaja,callback:function(e){t.fraccionCaja=e},expression:"fraccionCaja"}})],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.guardarProducto()}}},[a("v-icon",[t._v("save")]),t._v("\n              GUARDAR\n            ")],1),a("v-btn",{staticClass:"primary",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.actualizarProducto()}}},[a("v-icon",[t._v("save")]),t._v("\n              ACTUALIZAR\n            ")],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_producto,items:t.ARR_producto,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar_producto(e.item)}}},[t._v("delete")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.cargardatosActualizar(e.item)}}},[t._v("edit")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.descripcion)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.fraccionCaja)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.contenidoNeto)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.codigoConcentracion?e.item.codigoConcentracion.descripcion:"No Hay Descripcion")+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.codigoPresentacion?e.item.codigoPresentacion.descripcion:"No hay Descripcion")+"\n                  ")]),e.item.codigoPrincipioactivo?a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.codigoPrincipioactivo?e.item.codigoPrincipioactivo.descripcion:"No hay descripción")+"\n                  ")]):a("td",{staticClass:"text-xs-center red--text"},[t._v("\n                    NO REGISTRA PRINCIPIO ACTIVO\n                  ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                    "+t._s(e.item.codigoTipoproducto?e.item.codigoTipoproducto.descripcion:"No hay descripción")+"\n                  ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modalproducto=0,t.limpiar()}}},[t._v("\n            Cerrar\n          ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"950"},model:{value:t.modalInventario,callback:function(e){t.modalInventario=e},expression:"modalInventario"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t.banderaActualizar?a("span",{staticClass:"headline"},[t._v("EDITAR ")]):a("span",{staticClass:"headline"},[t._v("AGREGAR ")]),t._v("\n          - PRODUCTOS AL INVENTARIO\n        ")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-autocomplete",{attrs:{items:t.ivas,label:"Iva?"},model:{value:t.iva,callback:function(e){t.iva=e},expression:"iva"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.productos,label:"Producto"},on:{change:function(e){return t.obtenerProductoInfo(t.codigoProducto)}},model:{value:t.codigoProducto,callback:function(e){t.codigoProducto=e},expression:"codigoProducto"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.fabricantes,label:"Laboratorio fabricante"},model:{value:t.codigoFabricante,callback:function(e){t.codigoFabricante=e},expression:"codigoFabricante"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.proveedores,label:"Proveedor"},model:{value:t.codigoProveedor,callback:function(e){t.codigoProveedor=e},expression:"codigoProveedor"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{disabled:"",label:"Fraccion x caja"},model:{value:t.fcajaP,callback:function(e){t.fcajaP=e},expression:"fcajaP"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{disabled:"",label:"Concentracion"},model:{value:t.concentracionP,callback:function(e){t.concentracionP=e},expression:"concentracionP"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{disabled:"",label:"Presentacion"},model:{value:t.presentacionP,callback:function(e){t.presentacionP=e},expression:"presentacionP"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"Código Barra"},model:{value:t.codigoBarra,callback:function(e){t.codigoBarra=e},expression:"codigoBarra"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"Código Lote"},on:{change:function(e){return t.verificarLote(t.codigoLote)}},model:{value:t.codigoLote,callback:function(e){t.codigoLote=e},expression:"codigoLote"}})],1),t.banderaLote?t._e():a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.fechaElaboracion,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.fechaElaboracion=e},"update:return-value":function(e){t.fechaElaboracion=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-text-field",t._g({attrs:{label:"Fecha de Elaboración","prepend-icon":"event",readonly:""},model:{value:t.fechaElaboracion,callback:function(e){t.fechaElaboracion=e},expression:"fechaElaboracion"}},o))]}}],null,!1,699788912),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaElaboracion,callback:function(e){t.fechaElaboracion=e},expression:"fechaElaboracion"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.fechaElaboracion)}}},[t._v("OK")])],1)],1)],1),t.banderaLote?t._e():a("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.fechaCaducidad,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.fechaCaducidad=e},"update:return-value":function(e){t.fechaCaducidad=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-text-field",t._g({attrs:{label:"Fecha de Caducidad","prepend-icon":"event",readonly:""},model:{value:t.fechaCaducidad,callback:function(e){t.fechaCaducidad=e},expression:"fechaCaducidad"}},o))]}}],null,!1,2895344044),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.fechaCaducidad,callback:function(e){t.fechaCaducidad=e},expression:"fechaCaducidad"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu2=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.menu2.save(t.fechaCaducidad)}}},[t._v("OK")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),t.banderaLote?t._e():a("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Nombre Comercial"},model:{value:t.nombreComercial,callback:function(e){t.nombreComercial=e},expression:"nombreComercial"}})],1),t.banderaLote?t._e():a("v-flex",{attrs:{xs5:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"Registro Sanitario"},model:{value:t.registroSanitario,callback:function(e){t.registroSanitario=e},expression:"registroSanitario"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),void 0==t.$store.state.usuario.codigoDistribuidor?a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"Fracciones totales"},model:{value:t.fraccionesTotales,callback:function(e){t.fraccionesTotales=e},expression:"fraccionesTotales"}})],1):a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[t.banderaLote?t._e():a("div",[a("v-text-field",{attrs:{label:"Fracciones totales",readonly:"",disabled:""},model:{value:t.fraccionesTotales,callback:function(e){t.fraccionesTotales=e},expression:"fraccionesTotales"}})],1)]),t.banderaLote?t._e():a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{disabled:"",label:"Ubicacion en percha"},model:{value:t.percha,callback:function(e){t.percha=e},expression:"percha"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),t.banderaLote?t._e():a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"P. unitario"},model:{value:t.punit,callback:function(e){t.punit=e},expression:"punit"}})],1),a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[t.banderaLote?t._e():a("v-text-field",{attrs:{label:"PVM"},model:{value:t.pvm,callback:function(e){t.pvm=e},expression:"pvm"}})],1),t.banderaLote?t._e():a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"PVP"},model:{value:t.pvp,callback:function(e){t.pvp=e},expression:"pvp"}})],1),t.banderaLote?t._e():a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{label:"Descuento"},on:{change:function(e){return t.calcularPunitDescuento()}},model:{value:t.descuento,callback:function(e){t.descuento=e},expression:"descuento"}})],1),t.banderaLote?t._e():a("v-flex",{attrs:{xs2:"",sm2:"",md2:""}},[a("v-text-field",{attrs:{type:"number",label:"P. Unitario Con Descuento"},model:{value:t.pUDescuento,callback:function(e){t.pUDescuento=e},expression:"pUDescuento"}})],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.esGuardaAlmacen,expression:"esGuardaAlmacen"}],staticClass:"success",attrs:{color:"white",flat:"",small:""},on:{click:function(e){return t.agregarAinventario()}}},[a("v-icon",[t._v("save")]),t._v("\n              GUARDAR\n            ")],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){t.modalInventario=0,t.limpiarInventario()}}},[t._v("Cerrar")])],1)],1)],1),void 0==t.$store.state.usuario.codigoDistribuidor?a("v-flex",[t.banderainsumo?a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.bodegas,label:"Elegir bodega"},on:{change:function(e){return t.listarInventario(t.codigoBodega)}},model:{value:t.codigoBodega,callback:function(e){t.codigoBodega=e},expression:"codigoBodega"}})],1):t._e()],1):t._e(),a("v-flex",{attrs:{xs12:"",xl12:"",sm12:"",s12:"",m12:""}},[a("v-text-field",{attrs:{label:"Buscar"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscar(t.search)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CAB_inventario,items:t.ARR_inventario,"items-per-page":5},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizarProductoInventario(e.item)}}},[t._v("\n            edit\n          ")]),a("v-icon",{directives:[{name:"show",rawName:"v-show",value:t.esGuardaAlmacen,expression:"esGuardaAlmacen"}],staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar_inventario(e.item)}}},[t._v("\n            delete\n          ")])],1),a("td",{staticClass:"grey lighten-1 text-xs-center black--text"},[t._v("\n          "+t._s(e.item.codigoProducto?e.item.codigoProducto.descripcion:"No hay descripcion")+"\n        ")]),a("td",{staticClass:"grey text-xs-center black--text"},[t._v("\n          "+t._s(e.item.nombreComercial)+"\n        ")]),a("td",{staticClass:"grey darken-1 text-xs-center white--text"},[t._v("\n          "+t._s(e.item.codigoBarra)+"\n        ")]),a("td",{staticClass:"grey darken-2 text-xs-center white--text"},[t._v("\n          "+t._s(e.item.codigoLote)+"\n        ")]),e.item.registroSanitario?a("td",{staticClass:"grey darken-2 text-xs-center white--text"},[t._v(t._s(e.item.registroSanitario))]):a("td",{staticClass:"red--text"},[t._v("No se registra el campo REGISTRO SANITARIO")]),a("td",{staticClass:"deep-orange lighten-2 text-sm-center"},[t._v(t._s(e.item.fraccionesTotales))]),a("td",{staticClass:"deep-orange lighten-3 text-sm-center"},[t._v("\n          "+t._s(e.item.codigoProducto?e.item.codigoProducto.fraccionCaja:"No hay codigo de producto")+"\n        ")]),a("td",{staticClass:"blue--text"},[t._v("$"+t._s(e.item.punit))]),a("td",{staticClass:"blue--text"},[t._v("$"+t._s(e.item.pvm))]),a("td",{staticClass:"blue--text"},[t._v("$"+t._s(e.item.pvp))]),a("td",{staticClass:"blue--text",staticStyle:{"text-align":"center"}},[t._v("\n          "+t._s(0!=e.item.costoNetoDescuento?e.item.costoNetoDescuento:"No hay descuento")+"\n        ")]),e.item.iva?a("td",{staticClass:"green--text"},[t._v("SI")]):a("td",{staticClass:"orange--text"},[t._v("NO")]),a("td",{staticClass:"blue lighten-5"},[a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.detalleProducto(e.item)}}},[t._v("\n            visibility\n          ")])],1),a("td",{staticClass:"teal lighten-1"},[t._v("\n          "+t._s(e.item.codigoFabricante?e.item.codigoFabricante.razonsocial:"No Hay Razon Social")+"\n        ")]),a("td",{staticClass:"teal lighten-2"},[t._v("\n          "+t._s(e.item.codigoFabricante?e.item.codigoProveedor.razonsocial:"No Hay Razon Social")+"\n        ")]),a("td",{staticClass:"teal lighten-2"},[t._v("\n          "+t._s(e.item.fechaIngresoBodega?e.item.fechaIngresoBodega.split("T")[0].split("-")[2]+"/"+e.item.fechaIngresoBodega.split("T")[0].split("-")[1]+"/"+e.item.fechaIngresoBodega.split("T")[0].split("-")[0]:"No Se agrego fecha")+"\n        ")])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1),a("v-dialog",{attrs:{width:"800"},model:{value:t.verDetalle,callback:function(e){t.verDetalle=e},expression:"verDetalle"}},[a("Detalle",{attrs:{product:t.producto}})],1)],1)},xt=[],Ct=(a("28a5"),a("bd86")),_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"form"},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2 justify-center",attrs:{"primary-title":""}},[t._v("\n        DETALLES DE COMPRAS\n      ")]),a("v-layout",{staticStyle:{"justify-content":"space-evenly"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.rows},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.fecha))]),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.numComprobante))]),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.totalFracciones))]),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.percha))])]}}])})],1)],1),a("v-layout",{staticStyle:{"justify-content":"space-evenly"},attrs:{row:"",wrap:""}})],1)],1)],1)},At=[],Et={props:["product"],name:"DetalleInventario",data:function(t){return{headers:[{text:"FECHA",align:"center",value:"fecha",sortable:!1},{text:"# COMPROBANTE",value:"comprobante",align:"center",sortable:!1},{text:"UNIDADES TOTALES",value:"total",align:"center",sortable:!1},{text:"PERCHA",value:"percha",align:"center",sortable:!1}],loading:!1,rows:[]}},methods:{},watch:{product:function(){var t=this;this.product.detalle.forEach((function(e){var a=e.cantidad/t.product.codigoProducto.fraccionCaja,o=e.cantidad%t.product.codigoProducto.fraccionCaja,i=e.createdAt.split("T")[0].split("-");t.rows.push({fecha:"".concat(i[2],"/").concat(i[1],"/").concat(i[0]),numComprobante:e.numComprobante,cajas:parseInt(a),fracciones:o,totalFracciones:e.cantidad,percha:e.percha})})),this.rows=this.rows.reverse()}}},Dt=Et,Ot=a("4bd4"),It=Object(m["a"])(Dt,_t,At,!1,null,null,null),Tt=It.exports;h()(It,{VCard:g["a"],VCardTitle:ut["a"],VDataTable:vt["a"],VFlex:A["a"],VForm:Ot["a"],VLayout:O["a"]});var St=(bt={name:"inventario",components:{Detalle:Tt}},Object(Ct["a"])(bt,"name","IndexInventario"),Object(Ct["a"])(bt,"computed",{esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol}}),Object(Ct["a"])(bt,"data",(function(){var t;return t={date:(new Date).toISOString().substr(0,10),menu:!1,menu2:!1,verDetalle:!1,producto:{},concentracionTXT:"",banderaLote:!1,codigoBodega:"",bodegas:[],percha:"",banderainsumo:!0,search:"",valida:0,validaMensaje:[],descripcion_tp:"",modaltipoproducto:0,ARR_tipoproducto:[],CAB_tipoproducto:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!1}],descripcion_pa:"",modalprincipioactivo:0,ARR_principioactivo:[],CAB_principioactivo:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!1}],descripcion_p:"",modalpresentacion:0,ARR_presentacion:[],CAB_presentacion:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!1}],descripcion_c:"",modalconcentracion:0,ARR_concentracion:[],CAB_concentracion:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!1}],modalproducto:0,ARR_producto:[],CAB_producto:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!1},{text:"FxCaja",value:"fraccionCaja",sortable:!1},{text:"Contenido Neto",value:"contenidoNeto",sortable:!1},{text:"Concentracion",value:"detalleConcentracion",sortable:!1},{text:"Presentacion",value:"codigoPresentacion.descripcion",sortable:!1},{text:"Principio Actvo.",value:"codigoPrincipioactivo",sortable:!1},{text:"Tipo producto",value:"codigoTipoproducto",sortable:!1}]},Object(Ct["a"])(t,"descripcion_p",""),Object(Ct["a"])(t,"fraccionCaja",0),Object(Ct["a"])(t,"contenidoNeto",""),Object(Ct["a"])(t,"pUDescuento",0),Object(Ct["a"])(t,"detalleConcentracion",""),Object(Ct["a"])(t,"codigoTipoproducto",""),Object(Ct["a"])(t,"tipoproductos",[]),Object(Ct["a"])(t,"codigoPrincipioactivo",""),Object(Ct["a"])(t,"principioactivos",[]),Object(Ct["a"])(t,"codigoPresentacion",""),Object(Ct["a"])(t,"presentaciones",[]),Object(Ct["a"])(t,"codigoConcentracion",""),Object(Ct["a"])(t,"concentraciones",[]),Object(Ct["a"])(t,"idActualizar",""),Object(Ct["a"])(t,"ARR_inventario",[]),Object(Ct["a"])(t,"CAB_inventario",[{text:"Opciones",value:"opciones",sortable:!1},{text:"Producto",value:"codigoProducto.descripcion",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1},{text:"Codigo Barra",value:"codigoBarra",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Registro Sanitario",value:"registroSanitario",sortable:!1},{text:"Total Unidades",value:"fraccionesTotales",sortable:!1},{text:"Unidades * C.",value:"codigoProducto.fraccionCaja",sortable:!1},{text:"P. Unit",value:"punit",sortable:!1},{text:"PVM",value:"pvm",sortable:!1},{text:"PVP",value:"pvp",sortable:!1},{text:"Costo Neto con Descuento",value:"pUnitDescuento",sortable:!1,align:"center"},{text:"IVA",value:"iva",sortable:!1},{text:"Detalle",value:"detalle",sortable:!1},{text:"Lab. Fab.",value:"codigoFabricante.razonsocial",sortable:!1},{text:"Proveedor",value:"codigoProveedor.razonsocial",sortable:!1},{text:"Fecha de Ingreso",value:"fechaIngresoBodega",sortable:!1}]),Object(Ct["a"])(t,"modalInventario",0),Object(Ct["a"])(t,"codigoBarra",""),Object(Ct["a"])(t,"codigoLote",""),Object(Ct["a"])(t,"nombreComercial",""),Object(Ct["a"])(t,"registroSanitario",""),Object(Ct["a"])(t,"fraccionesTotales",0),Object(Ct["a"])(t,"fechaCaducidad",(new Date).toISOString().substr(0,10)),Object(Ct["a"])(t,"fechaElaboracion",(new Date).toISOString().substr(0,10)),Object(Ct["a"])(t,"iva",0),Object(Ct["a"])(t,"ivas",[{text:"SI",value:1},{text:"NO",value:0}]),Object(Ct["a"])(t,"descuento",0),Object(Ct["a"])(t,"pvp",0),Object(Ct["a"])(t,"pvm",0),Object(Ct["a"])(t,"punit",0),Object(Ct["a"])(t,"costoNeto",0),Object(Ct["a"])(t,"codigoBodega",""),Object(Ct["a"])(t,"codigoFabricante",""),Object(Ct["a"])(t,"codigoProveedor",""),Object(Ct["a"])(t,"codigoProducto",""),Object(Ct["a"])(t,"productos",[]),Object(Ct["a"])(t,"proveedores",[]),Object(Ct["a"])(t,"fabricantes",[]),Object(Ct["a"])(t,"banderaActualizar",0),Object(Ct["a"])(t,"idInventarioActualizar",""),Object(Ct["a"])(t,"fcajaP",0),Object(Ct["a"])(t,"presentacionP",""),Object(Ct["a"])(t,"concentracionP",""),Object(Ct["a"])(t,"detallesExcel",[]),t})),Object(Ct["a"])(bt,"created",(function(){this.listarProductosInventario(),this.obtenerBodegas()})),Object(Ct["a"])(bt,"methods",{getReporteExcel:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.$store.state.usuario.codigoDistribuidor,void 0!=e&&(a=this.obtenerBodega2(),a.then((function(t){d.a.post("inventario/reporte",{codigoBodega:t},{responseType:"blob"}).then((function(t){var e=new Blob([t.data],{type:"application/vnd.ms-excel"}),a=URL.createObjectURL(e);window.open(a)}))})));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),detalleProducto:function(t){this.producto=t,this.verDetalle=!0},verificarLote:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a},i=this.obtenerBodega2();i.then((function(a){d.a.get("inventario/queryV?codigoLote="+t+"&codigoBodega="+a,o).then((function(a){200==a.status?(tt.a.fire("Aviso","Ya existe un producto con el codigo de lote: "+t+" registrado en la base de datos.","error"),e.banderaLote=!0):e.banderaLote=!1})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},listarInventario:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("inventario/list?codigoBodega="+t,o).then((function(t){e.ARR_inventario=t.data})).catch((function(t){console.log(t)}))},obtenerBodegas:function(){if(void 0==this.$store.state.usuario.codigoDistribuidor){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("bodega/list",o).then((function(a){e=a.data,e.map((function(e){t.bodegas.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))}},buscar:function(t){var e=this;e.ARR_inventario=[];var a={Token:this.$store.state.token},o={headers:a},i=this.obtenerBodega2();i.then((function(a){d.a.get("inventario/busca?data="+t+"&codigoBodega="+a,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):e.ARR_inventario=t.data})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},calcularPunit:function(){this.punit=(parseFloat(this.costoNeto)/parseInt(this.fcajaP)).toFixed(5)},calcularPunitDescuento:function(){0==this.descuento?this.pUDescuento=0:this.pUDescuento=(this.punit-parseFloat(this.punit)*this.descuento/100).toFixed(4)},eliminar_inventario:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};tt.a.fire({title:"Estas seguro de eliminar este producto del Inventario?",text:"Una vez eliminado no podra recuperarse...!",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Eliminar",denyButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&d.a.delete("inventario/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listarProductosInventario()})).catch((function(t){console.log(t)}))}))},obtenerProductoInfo:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("producto/query?_id="+t,o).then((function(t){e.fcajaP=t.data.fraccionCaja,e.concentracionP=t.data.detalleConcentracion+t.data.codigoConcentracion.descripcion,e.presentacionP=t.data.codigoPresentacion.descripcion})).catch((function(t){console.log(t)}))},actualizarProductoInventario:function(t){this.obetenerProveedores(),this.obtenerFabricantes(),this.obtenerProductos(),this.banderaActualizar=1,this.idInventarioActualizar=t._id,this.codigoBarra=t.codigoBarra,this.codigoLote=t.codigoLote,this.nombreComercial=t.nombreComercial,this.registroSanitario=t.registroSanitario,this.fraccionesTotales=t.fraccionesTotales,this.fechaCaducidad=t.fechaCaducidad.split("T")[0],this.fechaElaboracion=t.fechaElaboracion.split("T")[0],this.iva=t.iva,this.descuento=t.descuento,this.pvp=t.pvp,this.pvm=t.pvm,this.punit=t.punit,this.percha=t.percha,this.costoNeto=t.costoNeto,this.codigoFabricante=t.codigoFabricante._id,this.codigoProveedor=t.codigoProveedor._id,this.codigoProducto=t.codigoProducto._id,this.obtenerProductoInfo(t.codigoProducto._id),this.modalInventario=1},obtenerBodega2:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,void 0==o){t.next=8;break}return t.next=6,d.a.get("bodega/query?codigoDistribuidor="+o,a);case 6:return i=t.sent,t.abrupt("return",i.data._id);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),listarProductosInventario:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;if(void 0!=o){var i=this.obtenerBodega2();i.then((function(e){d.a.get("inventario/list?codigoBodega="+e,a).then((function(e){var a=e.data;a.map((function(t){var e=parseInt(t.fraccionesTotales/t.codigoProducto.fraccionCaja),a=t.fraccionesTotales%t.codigoProducto.fraccionCaja;t.cajaTotales=e,t.fracciones=a})),t.ARR_inventario=a})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},limpiarInventario:function(){this.idInventarioActualizar="",this.codigoBarra="",this.codigoLote="",this.nombreComercial="",this.registroSanitario="",this.fraccionesTotales=0,this.fechaCaducidad="",this.iva=0,this.descuento=0,this.pvp=0,this.pvm=0,this.punit=0,this.costoNeto=0,this.codigoFabricante="",this.codigoProveedor="",this.codigoProducto="",this.fechaElaboracion="",this.banderaLote=!1,this.banderaActualizar=0,this.fcajaP="",this.concentracionP="",this.presentacionP="",this.percha=""},validar_inventario:function(){return this.valida=0,this.validaMensaje=[],isNaN(this.pvp)&&this.validaMensaje.push("PVP debe ser solo numeros"),isNaN(this.costoNeto)&&this.validaMensaje.push("COSTO NETO debe ser solo numeros"),isNaN(this.punit)&&this.validaMensaje.push("PRECIO UNITARIO debe ser solo numeros"),isNaN(this.descuento)&&this.validaMensaje.push("DESCUENTO debe ser solo numeros"),0==this.pvp.length&&this.validaMensaje.push("PVP no puede estar vacío."),0==this.costoNeto.length&&this.validaMensaje.push("COSTO NETO no puede estar vacío."),0==this.pvm.length&&this.validaMensaje.push("PVM no puede estar vacío."),0==this.punit.length&&this.validaMensaje.push("PRECIO UNITARIO no puede estar vacío."),0==this.descuento.length&&this.validaMensaje.push("DESCUENTO no puede estar vacío."),0==this.fechaCaducidad.length&&this.validaMensaje.push("FECHA CADUCIDAD no puede estar vacío."),0==this.fechaElaboracion.length&&this.validaMensaje.push("FECHA ELABORACION no puede estar vacío."),0==this.codigoLote.length&&this.validaMensaje.push("Debe ingresar el codigo de lote."),0==this.nombreComercial.length&&this.validaMensaje.push("Debe ingresar el nombre comercial."),0==this.registroSanitario.length&&this.validaMensaje.push("Debe ingresar el registro sanitario del producto."),0==this.iva.length&&this.validaMensaje.push("Debe escoger si el producto graba o no IVA."),""==this.codigoFabricante&&this.validaMensaje.push("Debe escoger un laboratorio fabricante para el producto a agregar."),""==this.codigoProveedor&&this.validaMensaje.push("Debe escoger un proveedor para el producto que va a agregar."),this.validaMensaje.length&&(this.valida=1),this.valida},agregarAinventario:function(){var t=this,e=this,a={Token:this.$store.state.token},o={headers:a};if(!this.validar_inventario()){var i=this.obtenerBodega2(),r=this.$store.state.usuario.codigoDistribuidor,s="";i.then((function(a){s=void 0!=r?a:e.codigoBodega;var i=t.nombreComercial,n=t.registroSanitario,c=t.codigoLote;t.banderaActualizar?d.a.put("inventario/actualizar",{_id:t.idInventarioActualizar,codigoBarra:t.codigoBarra,codigoLote:c.toUpperCase(),nombreComercial:i.toUpperCase(),registroSanitario:n.toUpperCase(),fraccionesTotales:t.fraccionesTotales,fechaCaducidad:t.fechaCaducidad,fechaElaboracion:t.fechaElaboracion,iva:t.iva,descuento:t.descuento,pvp:t.pvp,pvm:t.pvm,punit:t.punit,costoNeto:t.costoNeto,costoNetoDescuento:t.pUDescuento,codigoUsuario:t.$store.state.usuario._id,codigoBodega:s,codigoFabricante:t.codigoFabricante,codigoProveedor:t.codigoProveedor,codigoProducto:t.codigoProducto},o).then((function(t){200==t.status?(tt.a.fire("Noticias!","Se actualizó correctamente el producto.","success"),e.listarInventario(s),e.limpiarInventario(),e.modalInventario=0):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el producto","err"),e.listarProductosInventario()})).catch((function(t){console.log(t)})):d.a.post("inventario/add",{codigoBarra:t.codigoBarra,codigoLote:c.toUpperCase(),nombreComercial:i.toUpperCase(),registroSanitario:n.toUpperCase(),fraccionesTotales:t.fraccionesTotales,fechaCaducidad:t.fechaCaducidad,fechaElaboracion:t.fechaElaboracion,iva:t.iva,descuento:t.descuento,pvp:t.pvp,pvm:t.pvm,punit:t.punit,costoNeto:t.costoNeto,costoNetoDescuento:t.pUDescuento,codigoUsuario:t.$store.state.usuario._id,codigoBodega:s,codigoFabricante:t.codigoFabricante,codigoProveedor:t.codigoProveedor,codigoProducto:t.codigoProducto},o).then((function(t){200==t.status?(tt.a.fire("Noticias!","Se agregao correctamente al inventario.","success"),e.limpiarInventario(),e.modalInventario=0):tt.a.fire("Ops!","Hubo problemas al intentar guardar el producto","err"),e.listarProductosInventario()})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},obtenerProductos:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("producto/list",o).then((function(a){e=a.data,e.map((function(e){t.productos.push({text:e.descripcion+" C*:"+e.fraccionCaja,value:e._id})}))})).catch((function(t){console.log(t)}))},obetenerProveedores:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("proveedor/list",o).then((function(a){e=a.data,e.map((function(e){t.proveedores.push({text:e.razonsocial,value:e._id})}))})).catch((function(t){console.log(t)}))},obtenerFabricantes:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("fabricante/list",o).then((function(a){e=a.data,e.map((function(e){t.fabricantes.push({text:e.razonsocial,value:e._id})}))})).catch((function(t){console.log(t)}))},eliminar_producto:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};tt.a.fire({title:"Estas seguro de eliminar este producto?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Eliminar",denyButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&d.a.delete("producto/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listar_productos()})).catch((function(t){console.log(t)}))}))},cargardatosActualizar:function(t){this.limpiarproductos(),this.descripcion_p=t.descripcion,this.fraccionCaja=t.fraccionCaja,this.contenidoNeto=t.contenidoNeto,this.detalleConcentracion=t.detalleConcentracion,this.codigoTipoproducto=t.codigoTipoproducto._id,this.codigoConcentracion=t.codigoConcentracion._id,this.codigoPresentacion=t.codigoPresentacion._id,this.idActualizar=t._id,"MEDICINA"==t.codigoTipoproducto.descripcion?this.codigoPrincipioactivo=t.codigoPrincipioactivo._id:this.banderainsumo=!1},actualizarProducto:function(){var t=this,e=this,a=(this.$store.state.token,this.$store.state.usuario._id,this.ConsultaConcentracion(e.codigoConcentracion)),o="";a.then((function(a){if(o=a,t.ConsultaConcentracion(e.codigoConcentracion),!t.validar_guardar()){var i;i=t.banderainsumo?t.codigoPrincipioactivo:void 0;var r=t.descripcion_p;d.a.put("producto/actualizar",{_id:t.idActualizar,descripcion:r.toUpperCase()+" "+t.detalleConcentracion+o,fraccionCaja:t.fraccionCaja,contenidoNeto:t.contenidoNeto,detalleConcentracion:t.detalleConcentracion,codigoTipoproducto:t.codigoTipoproducto,codigoPrincipioactivo:i,codigoPresentacion:t.codigoPresentacion,codigoConcentracion:t.codigoConcentracion,codigoUsuario:t.$store.state.usuario._id}).then((function(t){200==t.status?tt.a.fire("Noticias!","Se actualizo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el ingreso","err"),e.listar_productos(),e.limpiarproductos()})).catch((function(t){console.log(t)}))}}))},listar_productos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("producto/list",a).then((function(e){t.ARR_producto=e.data})).catch((function(t){console.log(t)}))},limpiarproductos:function(){this.descripcion_p="",this.fraccionCaja=0,this.contenidoNeto="",this.detalleConcentracion="",this.codigoTipoproducto="",this.codigoPrincipioactivo="",this.codigoPresentacion="",this.codigoConcentracion="",this.banderainsumo=!0},ConsultaConcentracion:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e){var a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,a={Token:this.$store.state.token},o={headers:a},this.$store.state.usuario.codigoDistribuidor,t.next=6,d.a.get("concentracion/query?_id="+e,o);case 6:return i=t.sent,t.abrupt("return",i.data.descripcion);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),guardarProducto:function(){var t=this;if(!this.validar_guardar()){var e=this,a=this.ConsultaConcentracion(e.codigoConcentracion),o="";a.then((function(a){o=a;var i,r={Token:t.$store.state.token},s={headers:r};i=t.banderainsumo?t.codigoPrincipioactivo:void 0;var n=t.descripcion_p;d.a.post("producto/add",{descripcion:n.toUpperCase()+" "+t.detalleConcentracion+o,fraccionCaja:t.fraccionCaja,contenidoNeto:t.contenidoNeto,detalleConcentracion:t.detalleConcentracion,codigoTipoproducto:t.codigoTipoproducto,codigoPrincipioactivo:i,codigoPresentacion:t.codigoPresentacion,codigoConcentracion:t.codigoConcentracion,codigoUsuario:t.$store.state.usuario._id},s).then((function(t){200==t.status?(tt.a.fire("Noticias!","Se guardo correctamente el  producto.","success"),e.limpiarproductos()):tt.a.fire("Ops!","Hubo problemas al intentar guardar el producto","err"),e.listar_productos()})).catch((function(t){console.log(t)}))}))}},validar_guardar:function(){return this.valida=0,this.validaMensaje=[],isNaN(this.fraccionCaja)&&this.validaMensaje.push("Unidades x caja debe ser solo numero."),this.fraccionCaja<1&&this.validaMensaje.push("Ingresa la fraccion por caja"),0==this.descripcion_p.length&&this.validaMensaje.push("Debe ingresar la descripcion."),this.validaMensaje.length&&(this.valida=1),this.valida},validarInsumos:function(t){var e=this;this.tipoproductos.forEach((function(a){"MEDICINA"==a.text&&(a.value==t?e.banderainsumo=!0:e.banderainsumo=!1)}))},ObtenerTipoProductos:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("tipoproducto/list",o).then((function(a){e=a.data,e.map((function(e){t.tipoproductos.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},ObtenerPrincipios:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("principioactivo/list",o).then((function(a){e=a.data,e.map((function(e){t.principioactivos.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},ObtenerConcentraciones:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("concentracion/list",o).then((function(a){e=a.data,e.map((function(e){t.concentraciones.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},ObtenerPresentaciones:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("presentacion/list",o).then((function(a){e=a.data,e.map((function(e){t.presentaciones.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},actualizar_concentracion:function(t){if(!this.validarc()){var e=this,a=this.$store.state.usuario._id;d.a.put("concentracion/actualizar",{_id:t._id,descripcion:e.descripcion_c.toUpperCase(),codigoUsuario:a}).then((function(t){200==t.status?tt.a.fire("Noticias!","Se actualizo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el ingreso","err"),e.descripcion_c="",e.listar_concentracion()})).catch((function(t){console.log(t)}))}},eliminar_concentracion:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};tt.a.fire({title:"Estas seguro de eliminar esta concentración?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Eliminar",denyButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&d.a.delete("concentracion/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listar_concentracion()})).catch((function(t){console.log(t)}))}))},guardar_concentracion:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.validarc()||d.a.post("concentracion/add",{descripcion:t.toUpperCase(),codigoUsuario:this.$store.state.usuario._id},o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se guardo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar guardar el tipo de producto","err"),e.descripcion_c="",e.listar_concentracion()})).catch((function(t){console.log(t)}))},listar_concentracion:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("concentracion/list",a).then((function(e){t.ARR_concentracion=e.data})).catch((function(t){console.log(t)}))},validarc:function(){return this.valida=0,this.validaMensaje=[],0==this.descripcion_c.length&&this.validaMensaje.push("Debe ingresar la descripcion."),this.validaMensaje.length&&(this.valida=1),this.valida},actualizar_presentacion:function(t){var e=this,a=this.$store.state.usuario._id;this.validarp()||d.a.put("presentacion/actualizar",{_id:t._id,descripcion:e.descripcion_p.toUpperCase(),codigoUsuario:a}).then((function(t){200==t.status?tt.a.fire("Noticias!","Se actualizo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el ingreso","err"),e.listar_presentacion()})).catch((function(t){console.log(t)}))},eliminar_presentacion:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};tt.a.fire({title:"Estas seguro de eliminar este principio activo?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Eliminar",denyButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&d.a.delete("presentacion/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listar_presentacion()})).catch((function(t){console.log(t)}))}))},guardar_presentacion:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.validarp()||d.a.post("presentacion/add",{descripcion:t.toUpperCase(),codigoUsuario:this.$store.state.usuario._id},o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se guardo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar guardar el tipo de producto","err"),e.descripcion_p="",e.listar_presentacion()})).catch((function(t){console.log(t)}))},listar_presentacion:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("presentacion/list",a).then((function(e){t.ARR_presentacion=e.data})).catch((function(t){console.log(t)}))},validarp:function(){return this.valida=0,this.validaMensaje=[],0==this.descripcion_p.length&&this.validaMensaje.push("Debe ingresar la descripcion."),this.validaMensaje.length&&(this.valida=1),this.valida},actualizar_principiosactivos:function(t){var e=this;if(!this.validarpa()){var a=this.$store.state.usuario._id;d.a.put("principioactivo/actualizar",{_id:t._id,descripcion:e.descripcion_pa.toUpperCase(),codigoUsuario:a}).then((function(t){200==t.status?tt.a.fire("Noticias!","Se actualizo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el ingreso","err"),e.descripcion_pa="",e.listar_principiosactivos()})).catch((function(t){console.log(t)}))}},eliminar_principiosactivos:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};tt.a.fire({title:"Estas seguro de eliminar este principio activo?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Eliminar",denyButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&d.a.delete("principioactivo/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listar_principiosactivos()})).catch((function(t){console.log(t)}))}))},guardar_principiosactivos:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.validarpa()||d.a.post("principioactivo/add",{descripcion:t.toUpperCase(),codigoUsuario:this.$store.state.usuario._id},o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se guardo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar guardar el tipo de producto","err"),e.descripcion_pa="",e.listar_principiosactivos()})).catch((function(t){console.log(t)}))},listar_principiosactivos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("principioactivo/list",a).then((function(e){t.ARR_principioactivo=e.data})).catch((function(t){console.log(t)}))},validarpa:function(){return this.valida=0,this.validaMensaje=[],0==this.descripcion_pa.length&&this.validaMensaje.push("Debe ingresar la descripcion."),this.validaMensaje.length&&(this.valida=1),this.valida},actualizar_tipoproductos:function(t){var e=this,a=this.$store.state.usuario._id;this.validar()||d.a.put("tipoproducto/actualizar",{_id:t._id,descripcion:e.descripcion_tp.toUpperCase(),codigoUsuario:a}).then((function(t){200==t.status?tt.a.fire("Noticias!","Se actualizo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar actualizar el ingreso","err"),e.descripcion_tp="",e.listar_tipoproductos()})).catch((function(t){console.log(t)}))},eliminar_tipoproductos:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};tt.a.fire({title:"Estas seguro de eliminar este tipo de producto?",showDenyButton:!0,showCancelButton:!0,confirmButton:"btn btn-success",confirmButtonText:"Eliminar",denyButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&d.a.delete("tipoproducto/remove?_id="+t._id,o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se elimino correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar eliminar el tipo de producto","err"),e.listar_tipoproductos()})).catch((function(t){console.log(t)}))}))},guardar_tipoproductos:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.validar()||d.a.post("tipoproducto/add",{descripcion:t.toUpperCase(),codigoUsuario:this.$store.state.usuario._id},o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se guardo correctamente el tipo de producto.","success"):tt.a.fire("Ops!","Hubo problemas al intentar guardar el tipo de producto","err"),e.descripcion_tp="",e.listar_tipoproductos()})).catch((function(t){console.log(t)}))},listar_tipoproductos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("tipoproducto/list",a).then((function(e){t.ARR_tipoproducto=e.data})).catch((function(t){console.log(t)}))},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.descripcion_tp.length&&this.validaMensaje.push("Debe ingresar la descripcion."),this.validaMensaje.length&&(this.valida=1),this.valida},limpiar:function(){this.descripcion_tp="",this.ARR_tipoproducto=[],this.descripcion_pa="",this.ARR_principioactivo=[],this.descripcion_p="",this.ARR_presentacion=[],this.descripcion_c="",this.ARR_concentracion=[],this.search=""}}),bt),kt=St,Rt=a("c6a6"),Nt=a("2e4b"),Pt=a("e449"),yt=Object(m["a"])(kt,gt,xt,!1,null,null,null),Ft=yt.exports;h()(yt,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDatePicker:Nt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VMenu:Pt["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Facturas")]),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[0==t.btn_nuevo?a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){t.modoActualizar=0,t.modoVer=0,t.btn_nuevo=1,t.obtenerDatos()}}},[a("v-icon",[t._v("add")]),t._v("\n          Nuevo\n        ")],1):t._e()],1),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t.btn_nuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Punto emisión"},model:{value:t.ptoemision,callback:function(e){t.ptoemision=e},expression:"ptoemision"}})],1)],1),a("span",[t._v("Datos Comprador")]),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-radio-group",{attrs:{row:""},model:{value:t.tipoIdentificacion,callback:function(e){t.tipoIdentificacion=e},expression:"tipoIdentificacion"}},[a("v-radio",{attrs:{label:"Cedula",value:"05"}}),a("v-radio",{attrs:{label:"RUC",value:"04"}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Cédula/RUC",type:"number"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCliente(t.ruc_comprador)}},model:{value:t.ruc_comprador,callback:function(e){t.ruc_comprador=e},expression:"ruc_comprador"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Razon Social/Apellidos y Nombres"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCliente(t.razonsocial_comprador)}},model:{value:t.razonsocial_comprador,callback:function(e){t.razonsocial_comprador=e},expression:"razonsocial_comprador"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Dirección Comprador"},model:{value:t.direccion_comprador,callback:function(e){t.direccion_comprador=e},expression:"direccion_comprador"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Email",type:"email"},model:{value:t.email_comprador,callback:function(e){t.email_comprador=e},expression:"email_comprador"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Telefono"},model:{value:t.telefono_comprador,callback:function(e){t.telefono_comprador=e},expression:"telefono_comprador"}})],1)],1)],1),a("span",[t._v("Detalles de la factura")]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[t.modoVer?t._e():a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n          Nuevo detalle\n        ")],1)],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:"",lg6:"",x6:""}},[a("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCodigo(t.codigo)}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){t.dialog=1}}},[a("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-checkbox",{attrs:{label:"ES ACTA DE ENTREGA"},model:{value:t.isActaEntrega,callback:function(e){t.isActaEntrega=e},expression:"isActaEntrega"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.errorArticulo,expression:"errorArticulo"}],attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})])],1),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("\n                      delete\n                    ")])],1),a("td",[a("v-text-field",{staticStyle:{width:"150px"},model:{value:e.item.codigoBarra,callback:function(a){t.$set(e.item,"codigoBarra",a)},expression:"props.item.codigoBarra"}})],1),a("td",[a("v-text-field",{staticStyle:{width:"100px"},model:{value:e.item.codigoAuxiliar,callback:function(a){t.$set(e.item,"codigoAuxiliar",a)},expression:"props.item.codigoAuxiliar"}})],1),a("td",[a("v-text-field",{staticStyle:{width:"220px"},model:{value:e.item.descripcion,callback:function(a){t.$set(e.item,"descripcion",a)},expression:"props.item.descripcion"}})],1),a("td",[a("v-text-field",{staticStyle:{width:"200px"},model:{value:e.item.nombreComercial,callback:function(a){t.$set(e.item,"nombreComercial",a)},expression:"props.item.nombreComercial"}})],1),a("td",[a("v-text-field",{model:{value:e.item.registroSanitario,callback:function(a){t.$set(e.item,"registroSanitario",a)},expression:"props.item.registroSanitario"}})],1),a("td",[a("v-text-field",{staticStyle:{width:"240px"},model:{value:e.item.fechas,callback:function(a){t.$set(e.item,"fechas",a)},expression:"props.item.fechas"}})],1),a("td",[a("v-text-field",{staticClass:"centrar-text-stock",attrs:{disabled:""},model:{value:e.item.fraccionesTotales,callback:function(a){t.$set(e.item,"fraccionesTotales",a)},expression:"props.item.fraccionesTotales"}})],1),a("td",[a("v-text-field",{staticClass:"centrar-text",model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),a("td",[a("v-text-field",{model:{value:e.item.precioUni,callback:function(a){t.$set(e.item,"precioUni",a)},expression:"props.item.precioUni"}})],1),a("td",[a("v-checkbox",{model:{value:e.item.iva,callback:function(a){t.$set(e.item,"iva",a)},expression:"props.item.iva"}})],1),a("td",[a("v-text-field",{model:{value:e.item.descuento,callback:function(a){t.$set(e.item,"descuento",a)},expression:"props.item.descuento"}})],1),e.item.iva?a("td",{staticClass:"text-xs-right"},[t._v("\n                    "+t._s((e.item.cantidad*e.item.precioUni+e.item.cantidad*e.item.precioUni*.12).toFixed(6))+"\n                  ")]):a("td",{staticClass:"text-xs-right"},[t._v("\n                    "+t._s((e.item.cantidad*e.item.precioUni).toFixed(6))+"\n                  ")])]}}],null,!1,2929903028)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("span",[t._v("Forma de pago")]),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[t.modoVer?t._e():a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.Agregarformapago()}}},[a("v-icon",[t._v("add")]),t._v("\n          Nuevo detalle\n        ")],1)],1),a("v-layout",{attrs:{wrap:""}},[a("div",{attrs:{id:"formapago"}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraFormapago,items:t.detallesFP,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detallesFP,e.item)}}},[t._v("\n                      delete\n                    ")])],1),a("td",[a("v-autocomplete",{attrs:{items:t.formaspagos,label:"Forma pago"},model:{value:e.item.formaPago,callback:function(a){t.$set(e.item,"formaPago",a)},expression:"props.item.formaPago"}})],1),a("td",[a("v-text-field",{model:{value:e.item.total,callback:function(a){t.$set(e.item,"total",a)},expression:"props.item.total"}})],1),a("td",[a("v-autocomplete",{attrs:{items:t.tiempos,label:"Tiempo"},model:{value:e.item.unidadTiempo,callback:function(a){t.$set(e.item,"unidadTiempo",a)},expression:"props.item.unidadTiempo"}})],1),"NINGUNO"==e.item.unidadTiempo?a("td",[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.plazo,callback:function(a){t.$set(e.item,"plazo",a)},expression:"props.item.plazo"}})],1):a("td",[a("v-text-field",{model:{value:e.item.plazo,callback:function(a){t.$set(e.item,"plazo",a)},expression:"props.item.plazo"}})],1)]}}],null,!1,295451587)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-spacer"),a("div",{attrs:{id:"totales"}},[a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Subtotal:")]),t._v("\n            $\n            "+t._s(t.totalParcial=t.calcularSubtotal)+"\n          ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total descuento:")]),t._v("\n            $\n            "+t._s(t.totaldescuento=t.calcularDescuento)+"\n          ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Impuesto:")]),t._v("\n            $ "+t._s(t.totalImpuesto=t.calcularIva)+"\n          ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total:")]),t._v("\n            $ "+t._s(t.total=t.calcularTotal)+"\n          ")])],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs2:"",sm2:"",md2:"",lg2:"",xl2:""}},[t.modoActualizar?a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(e){return t.guardar()}}},[a("v-icon",[t._v("send")]),t._v("\n            Guardar y Enviar\n          ")],1):t._e()],1),a("v-divider"),a("v-flex",{attrs:{xs2:"",sm2:"",md2:"",lg2:"",xl2:""}},[t.modoActualizar?a("div",[t.modoVer?t._e():a("v-btn",{attrs:{color:"green"},nativeOn:{click:function(e){return t.actualizarlaFactura()}}},[a("v-icon",[t._v("forward_to_inbox")]),t._v("\n              Actualizar Borrador\n            ")],1)],1):a("div",[t.modoVer?t._e():a("v-btn",{attrs:{color:"orange"},nativeOn:{click:function(e){return t.guardarFactura()}}},[a("v-icon",[t._v("forward_to_inbox")]),t._v("\n              Guardar Borrador\n            ")],1)],1)]),a("v-flex"),a("v-flex",{attrs:{xs2:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-btn",{attrs:{color:"red"},nativeOn:{click:function(e){t.btn_nuevo=0,t.limpiar()}}},[a("v-icon",[t._v("arrow_back")]),t._v("\n            Atras")],1)],1)],1)],1):t._e(),0==t.btn_nuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.CabeceraFacturas,items:t.Facturas,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[1!=e.item.estado?a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.actualizarFactura(e.item)}}},[t._v("edit")]):t._e(),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verDetalleFactura(e.item)}}},[t._v("tab")]),e.item.estado?a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verificarComprobante(e.item._id,e.item.claveAcceso)}}},[t._v("published_with_changes")]):t._e(),e.item.estado?t._e():a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verificarComprobante2(e.item._id,e.item.claveAcceso)}}},[t._v("done_all")]),e.item.estado?[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(2,e.item)}}},[t._v("\n                block\n              ")])]:t._e()],2),a("td",{staticClass:"blue--text"},[t._v("\n            "+t._s(e.item.numComprobante)+"\n          ")]),e.item.claveAcceso?a("td",{staticClass:"blue--text"},[t._v("\n            "+t._s(e.item.claveAcceso)+"\n          ")]):a("td",{staticClass:"red--text"},[t._v("\n            No autorizado.\n          ")]),a("td",[t._v("\n            "+t._s(e.item.codigoUsuario.nombres)+"\n          ")]),a("td",[t._v("$"+t._s(e.item.total))]),a("td",[t._v("\n            "+t._s(t.formatearFecha(e.item.createdAt))+"\n          ")]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"green--text"},[t._v("Aceptado")])]):a("div",[a("span",{staticClass:"orange--text"},[t._v("Pendiente a envio")])])])]}}],null,!1,3281895513)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulosnombres(t.texto)}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.AddDeta(e.item)}}},[t._v("\n                        add\n                      ")])],1),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoBarra))]),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoLote))]),a("td",{},[t._v(t._s(e.item.nombreComercial))]),a("td",{staticClass:"purple--text"},[t._v(t._s(e.item.codigoProducto.fraccionCaja))]),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.fraccionesTotales))])]}}])})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"350"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Enviar para autorizar factura")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Actualizar Item")]):t._e(),a("v-card-text",[t._v("\n        Estás a punto de\n        "),1==t.adAccion?a("span",[t._v("Enviar ")]):t._e(),2==t.adAccion?a("span",[t._v("actualizar")]):t._e(),t._v("\n        la factura "+t._s(t.adNombre)+" a autorizar.\n      ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"blue darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("\n          Enviar\n        ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"red darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("\n          Anular\n        ")]):t._e()],1)],1)],1)],1)},Mt=[],Vt=a("c1df"),wt=a.n(Vt),Lt=(a("8baf"),a("0da4"),{data:function(){return{adModal:0,adModalD:0,adAccion:0,adAccionD:0,adNombre:"",adNombreD:"",adId:"",adIdD:"",descripcionD:"",id:"",IdActualizar:"",modoActualizar:0,modoVer:0,isActaEntrega:!1,CabeceraFacturas:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"#comprobante",value:"numComprobante",sortable:!1},{text:"Clave de Acceso",value:"claveAcceso",sortable:!1},{text:"Usuario",value:"codigoUsuario",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Fecha",value:"createdAt",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],Facturas:[],facturascontadas:0,search:"",btn_nuevo:0,codigo:"",errorArticulo:"",totalParcial:0,totaldescuento:0,totalImpuesto:0,total:0,_idCliente:"",tipoIdentificacion:"",direccion_comprador:"",telefono_comprador:"NN",email_comprador:"",razonsocial_comprador:"CONSUMIDOR FINAL",ruc_comprador:"9999999999999",numComprobante:0,ptoemision:"",idDatos:"",cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Codigo barras",value:"codigoBarra",sortable:!1},{text:"Codigo de lote",value:"codigoAuxiliar",sortable:!1},{text:"Descripcion de producto",value:"descripcion",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1},{text:"Registro Sanitario",value:"registroSanitario",sortable:!1},{text:"Fechas de elaboracion",value:"fecha",sortable:!1},{text:"Stock Actual",value:"stock",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Pecio Unitario",value:"precioUni",sortable:!1},{text:"Iva",value:"iva",sortable:!1},{text:"Dcto.",value:"descuento",sortable:!1},{text:"Subtotal",value:"subtotal",sortable:!1}],detalles:[],cabeceraFormapago:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Forma de pago",value:"formapago",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Plazo",value:"plazo",sortable:!1},{text:"Tiempo",value:"unidadTiempo",sortable:!1}],detallesFP:[],formaspagos:[{text:"SIN UTILIZACION DEL SISTEMA FINANCIERO",value:"01"},{text:"COMPENSACIÓN DE DEUDAS",value:"15"},{text:"TARJETA DE DÉBITO",value:"16"},{text:"DINERO ELECTRÓNICO",value:"17"},{text:"TARJETA PREPAGO",value:"18"},{text:"TARJETA DE CRÉDITO",value:"19"},{text:"OTROS CON UTILIZACION DEL SISTEMA FINANCIERO",value:"20"},{text:"ENDOSO DE TÍTULOS",value:"21"}],tiempos:["NINGUNO","dias","meses","años"],validaMensaje:[],valida:0,dialog:0,detalleXml:[],detalleXmlFP:[],datosDistribuidores:[],texto:"",articulos:[],cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Codigo Barras",value:"codigoBarras",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!0},{text:"F*Caja",value:"codigoProducto",sortable:!1},{text:"Stock",value:"fraccionesTotales",sortable:!0}]}},watch:{},computed:{calcularTotal:function(){var t=parseFloat(this.calcularSubtotal)+parseFloat(this.calcularIva)-parseFloat(this.calcularDescuento);return t.toFixed(2)},calcularIva:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=this.detalles[e];a=parseInt(r.cantidad),o=parseFloat(r.precioUni),i=a*o,0!=r.iva&&(t+=.12*i)}return t.toFixed(2)},calcularDescuento:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=0,s=this.detalles[e];a=parseInt(s.cantidad),o=parseFloat(s.precioUni),i=parseInt(s.descuento),r=a*o*i/100,t+=r}return t.toFixed(2)},calcularSubtotal:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=this.detalles[e];a=parseInt(r.cantidad),o=parseFloat(r.precioUni),i=a*o,t+=i}return t.toFixed(2)}},methods:{actualizarClave:function(t,e,a){var o=this;this.$store.state.token;d.a.put("factura/actualizarC",{_id:t,claveAcceso:e,numero:a}).then((function(t){200==t.status&&(o.limpiar(),o.btn_nuevo=0,o.listarFacturas())})).catch((function(t){console.log(t)}))},actualizarlaFactura:function(){var t=this;this.$store.state.token;d.a.put("factura/actualizar",{_id:this.IdActualizar,detalles:this.detalles,formaPago:this.detallesFP,subTotal:this.totalParcial,total:this.total,totalImpuesto:this.totalImpuesto,totalDescuento:this.totaldescuento,codigoCliente:this._idCliente}).then((function(e){200==e.status?(tt.a.fire("Noticias!","Se actualizo el borrador de la factura.","success"),t.limpiar(),t.btn_nuevo=0,t.listarFacturas()):tt.a.fire("Noticias!","Hubo algun error al actualizar el borrador de la factura.","error")})).catch((function(t){console.log(t)}))},actualizarFactura:function(t){this.IdActualizar=t._id,this._idCliente=t.codigoCliente._id,this.modoActualizar=1,this.btn_nuevo=1,this.tipoIdentificacion=t.codigoCliente.tipoDocumento,this.isActaEntrega=t.isActaEntrega,this.direccion_comprador=t.codigoCliente.direccion,this.telefono_comprador=t.codigoCliente.telefono,this.email_comprador=t.codigoCliente.email,this.razonsocial_comprador=t.codigoCliente.nombres,this.ruc_comprador=t.codigoCliente.numDocumento,this.numComprobante=t.numComprobante,this.ptoemision=t.ptoEmision,this.contarFacturasAut(),this.listarDetalles(t._id)},verDetalleFactura:function(t){this.modoVer=1,this.btn_nuevo=1,this.tipoIdentificacion=t.codigoCliente.tipoDocumento,this.direccion_comprador=t.codigoCliente.direccion,this.telefono_comprador=t.codigoCliente.telefono,this.email_comprador=t.codigoCliente.email,this.razonsocial_comprador=t.codigoCliente.nombres,this.ruc_comprador=t.codigoCliente.numDocumento,this.numComprobante=t.numComprobante,this.ptoemision=t.ptoEmision,this.isActaEntrega=t.isActaEntrega,this.listarDetalles(t._id)},listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("factura/query?_id="+t,o).then((function(t){e.detalles=t.data.detalles,e.detallesFP=t.data.formaPago})).catch((function(t){console.log(t)}))},listarFacturas:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.get("factura/list?codigoDistribuidor="+o+"&codigoUsuario="+i,a).then((function(e){206==e.status?tt.a.fire("Aviso",e.data.message,"error"):t.Facturas=e.data})).catch((function(t){console.log(t)}))},listarArticulosnombres:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/busca?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):e.articulos=t.data})).catch((function(t){console.log(t)}))},validar_guardar:function(){this.valida=0,this.validaMensaje=[],0==this.numComprobante.length&&this.validaMensaje.push("Debe ingresar el numero de comprobante."),0==this.ptoemision.length&&this.validaMensaje.push("Debe ingresar el punto de emision."),0==this.ruc_comprador.length&&this.validaMensaje.push("Debe ingresar el numero de RUC del cliente."),0==this.razonsocial_comprador.length&&this.validaMensaje.push("Falta razon social del proveedor."),0==this.direccion_comprador.length&&this.validaMensaje.push("Falta direccion del cliente."),0==this.email_comprador.length&&this.validaMensaje.push("Falta el email del cliente."),0==this.telefono_comprador.length&&this.validaMensaje.push("Falta el telefono del cliente."),0==this.detalles.length&&this.validaMensaje.push("Debe ingresar al menos un detalle a la factura."),0==this.detallesFP.length&&this.validaMensaje.push("Debe ingresar al menos un detalle a la forma de pago.");for(var t=0;t<this.detalles.length;t++){var e=this.detalles[t];0!=e.cantidad&&0!=e.cantidad.length||this.validaMensaje.push("Cantidad no puede ser un valor vacio."),parseInt(e.cantidad)<0&&this.validaMensaje.push("Cantidad no puede ser un valor negativo."),0!=e.precioUni&&0!=e.precioUni.length||this.validaMensaje.push("P. unitario no puede ser un valor vacio."),parseInt(e.precioUni)<0&&this.validaMensaje.push("P. unitario no puede ser un valor negativo."),0==e.descuento.length&&this.validaMensaje.push("Descuento no puede ser un valor vacio."),parseInt(e.descuento)<0&&this.validaMensaje.push("Descuento no puede ser un valor negativo."),0==e.codigoBarra.length&&this.validaMensaje.push("Debe ingresar el codigo de barras."),0==e.codigoAuxiliar.length&&this.validaMensaje.push("Debe ingresar el codigo auxiliar."),0==e.descripcion.length&&this.validaMensaje.push("Debe ingresar la descripcion del producto."),0==e.nombreComercial.length&&this.validaMensaje.push("Debe ingresar el nombre comercial."),0==e.registroSanitario.length&&this.validaMensaje.push("Debe ingresar el registro sanitario."),0==e.fechas.length&&this.validaMensaje.push("Debe ingresar las fechas.")}return this.validaMensaje.length&&(this.valida=1),this.valida},guardarFactura:function(){if(!this.validar_guardar()){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.post("factura/add",{numComprobante:0,ptoEmision:this.ptoemision,subTotal:this.totalParcial,total:this.total,totalImpuesto:this.totalImpuesto,totalDescuento:this.totaldescuento,detalles:this.detalles,formaPago:this.detallesFP,codigoCliente:this._idCliente,codigoBodega:this.codigoBodega,codigoDistribuidor:o,codigoUsuario:i,isActaEntrega:this.isActaEntrega},a).then((function(e){200==e.status?(tt.a.fire("Noticias!","Se guardo un borrador de la factura.","success"),t.listarFacturas(),t.btn_nuevo=0,t.limpiar()):tt.a.fire("Ops!","Hubo problemas al intentar guardar la compra","err")})).catch((function(t){console.log(t)}))}},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;void 0==o||d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},buscarCodigo:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/buscaCodigo?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):t.data.length>1?tt.a.fire("Aviso","Se estan mostrando mas de un resultado \n deberia buscar en pantalla.","error"):e.AddDeta(t.data)})).catch((function(t){console.log(t)}))},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},AddDeta:function(t){console.log(t),this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(t.fraccionesTotales<=0?tt.a.fire("Fallo!","No hay stock para "+t.nombreComercial,"error"):this.detalles.unshift({_id:t._id,codigoBarra:t.codigoBarra,codigoAuxiliar:t.codigoLote,descripcion:t.codigoProducto.descripcion+" ",nombreComercial:t.nombreComercial,registroSanitario:t.registroSanitario,fechas:"FE: ".concat(t.fechaElaboracion.split("T")[0]," FC: ").concat(t.fechaCaducidad.split("T")[0]),cantidad:0,precioUni:t.punit,iva:t.iva,descuento:t.descuento,fraccionesTotales:t.fraccionesTotales}),this.texto="",this.codigo="")},buscarCliente:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("cliente/consulta?data="+t,o).then((function(a){0==a.data.length?(tt.a.fire("Aviso","No hay datos para:".concat(t),"error"),e.tipoIdentificacion="",e.direccion_comprador="NN",e.telefono_comprador="NN",e.email_comprador="tuahorrocomprobantes@gmail.com",e.razonsocial_comprador="CONSUMIDOR FINAL",e.ruc_comprador="9999999999999"):(e.tipoIdentificacion=a.data.tipoDocumento,e.direccion_comprador=a.data.direccion,e.telefono_comprador=a.data.telefono,e.email_comprador=a.data.email,e.razonsocial_comprador=a.data.nombres,e.ruc_comprador=a.data.numDocumento,e._idCliente=a.data._id)})).catch((function(t){console.log(t)}))},datosDistribuidor:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,t.next=6,d.a.get("distribuidor/query?_id="+o,a);case 6:return i=t.sent,t.abrupt("return",i.data);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),guardar:function(){var t=this;this.generardetalle_xml(),this.generardetallePago_xml();var e=this.datosDistribuidor(),a="",o="",i="",r="";0!=parseFloat(this.totalImpuesto)?(i="2",r="12"):(i="0",r=0),e.then((function(e){e.establecimientos.forEach((function(t){"MATRIZ"==t.tipoEstablecimiento&&(a=t.direccionEstablecimiento,o=t.numEstablecimiento)})),t.guardarXml(e.razonSocial,e.nombreComercial,e.ruc,a,o,t.ptoemision,t.facturascontadas,a,t.tipoIdentificacion,t.razonsocial_comprador,t.ruc_comprador,t.direccion_comprador,t.totalParcial,t.totaldescuento,"2",i,t.totalParcial,r,t.totalImpuesto,t.total,t.email_comprador,t.direccion_comprador,t.telefono_comprador,t.isActaEntrega)})).catch((function(t){console.log(t)}))},guardarXml:function(t,e,a,o,i,r,s,n,c,l,u,v,m,p,h,f,b,g,x,C,_,A,E,D){for(var O=this,I=(this.$store.state.token,[]),T=0;T<this.detalles.length;T++){var S=this.detalles[T],k=0,R=0,N=0,P=0,y=0;k=parseInt(S.cantidad),R=parseFloat(S.precioUni),y=k*R,N=y.toFixed(2),0!=this.detalles[T].iva?(2,(.12*N).toFixed(2),12):(0,0,0);var F=[];F=[{codigoBarras:this.detalles[T].codigoBarra,codigoLote:this.detalles[T].codigoAuxiliar,producto:this.detalles[T].descripcion,nombreComercial:this.detalles[T].nombreComercial,fechas:this.detalles[T].fechas,registroSanitario:this.detalles[T].registroSanitario,cantidad:k,precio:R,descuento:P,total:N}],I.push(F)}var j=O.formatearFecha(wt()().format());d.a.post("factura/emitirFactura",{api_key:"API_10425_11398_6578dd450c24a",codigoDoc:"01",emisor:{manejo_interno_secuencia:"NO",secuencial:s,fecha_emision:j},comprador:{tipo_identificacion:c,identificacion:u,razon_social:l,direccion:v,telefono:null,celular:E,correo:_},items:this.detalleXml,pagos:this.detalleXmlFP}).then((function(t){if(t.data.creado){var e=t.data.claveacceso,a=s;O.actualizarClave(O.IdActualizar,e,a),O.verificarComprobante2(O.IdActualizar,e),O.actualizarConteo(O.facturascontadas)}else tt.a.fire("Error",t.data.errors.error,"error")})).catch((function(t){tt.a.fire("Error","Ocurrio un error al tratar de guardar la venta: "+t,"error")}))},generardetallePago_xml:function(){for(var t=0;t<this.detallesFP.length;t++)this.detalleXmlFP[t]={tipo:this.detallesFP[t].formaPago}},generardetalle_xml:function(){for(var t=0;t<this.detalles.length;t++){var e=this.detalles[t],a=0,o=0,i=0,r=0,s=0,n=0;a=parseInt(e.cantidad),o=parseFloat(e.precioUni),n=a*o,i=n.toFixed(2),0!=this.detalles[t].iva?(2,(.12*i).toFixed(2),s=2):(0,0,s=0),this.detalleXml[t]={codigo_principal:this.detalles[t].codigoBarra,codigo_auxiliar:this.detalles[t].codigoAuxiliar,tipoproducto:1,tipo_iva:s,descripcion:this.detalles[t].descripcion+" - "+this.detalles[t].nombreComercial+" - "+this.detalles[t].fechas,cantidad:a,precio_unitario:o,descuento:r,tipo_ice:0,valor_ice:0,tarifa_ice:0}}},Agregarformapago:function(){var t=this;t.detallesFP.unshift({formaPago:"01",total:t.total,plazo:0,unidadTiempo:"NINGUNO"})},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},AgregarDetalle:function(){var t=this;t.detalles.unshift({codigoBarra:"",codigoAuxiliar:"",descripcion:"",nombreComercial:"",registroSanitario:"",fechas:"",cantidad:0,precioUni:0,iva:0,descuento:0})},crearPDF_SLocal:function(t,e,a,o,i,r,s,n,c,l,u,v,m,p,h,f,b,g){d.a.post("http://localhost:10000/api/pdf/pdf",{claveAcceso:t,numComprobante:e,fecha:a,nombreComercial:o,dirMatriz:i,dirFarmacia:r,clienteDireccion:s,clienteDocumento:n,clienteNombre:c,detalles:{detalle:l},clienteEmail:u,clienteTelefono:v,subtotal:m,descuento:p,iva:h,total:f,razonSocial:b,ruc:g}).then((function(t){})).catch((function(t){console.log(t)}))},formatearFecha:function(t){if(t)return wt()(String(t)).format("YYYY/MM/DD")},contarFacturasAut:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.get("data/contar?codigoUsuario="+i+"&codigoDistribuidor="+o,a).then((function(e){t.facturascontadas=e.data})).catch((function(t){console.log(t)}))},obtenerDatos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.get("data/query?codigoUsuario="+i+"&codigoDistribuidor="+o+"&documento=FACTURA",a).then((function(e){t.ptoemision=e.data.ptoEmision,t.idDatos=e.data._id})).catch((function(t){console.log(t)}))},actualizarConteo:function(t){var e=this;d.a.put("data/actualizarSecuencial",{_id:this.idDatos,documento:"FACTURA",numero:t}).then((function(t){200==t.status?(e.obtenerDatos(),e.limpiar(),tt.a.fire("Noticias","Se guardó correctamente.","success")):tt.a.fire("Error","Hubo algun error al momento de guardar la venta.","error")})).catch((function(t){console.log(t)}))},limpiar:function(){this.modoVer=0,this.detallesFP=[],this.detalles=[],this.detalleXml=[],this.totalParcial=0,this.totaldescuento=0,this.totalImpuesto=0,this.total=0,this.numComprobante=0,this.tipoIdentificacion="",this.direccion_comprador="",this.telefono_comprador="NN",this.email_comprador="--@gmail.com",this.razonsocial_comprador="CONSUMIDOR FINAL",this.ruc_comprador="9999999999999"},limpiarbusqueda:function(){this.texto="",this.articulos=[]},close:function(){this.dialog=0,this.limpiarbusqueda()},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.numComprobante,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.put("factura/activate",{_id:t},o).then((function(t){e.adModal=0,e.adAccion=0,e.adNombre="",e.adId="",e.listarFacturas()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("factura/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listarFacturas()})).catch((function(t){console.log(t)}))},verificarComprobante:function(t,e){var a=this;d.a.post("factura/verificarComprobante",{api_key:"API_10425_11398_6578dd450c24a",claveacceso:e}).then((function(t){var e=t.data;if("Autorizado"===e.estado_texto){tt.a.fire(e.estado_texto,"Comprobante autorizado.","success");var o=document.createElement("a");o.href=e.enlace_pdf,o.target="_blank",o.download=a.pdfFileName,document.body.appendChild(o),o.click(),document.body.removeChild(o)}else tt.a.fire(e.estado_texto,e.motivo,"info")})).catch((function(t){tt.a.fire("Error","Ocurrio un error al tratar de verificar el comprobante: "+t,"error")}))},verificarComprobante2:function(t,e){var a=this,o=this;d.a.post("factura/verificarComprobante",{api_key:"API_10425_11398_6578dd450c24a",claveacceso:e}).then((function(e){var i=e.data;if("Autorizado"===i.estado_texto){o.activar(t);var r=document.createElement("a");r.href=i.enlace_pdf,r.target="_blank",r.download=a.pdfFileName,document.body.appendChild(r),r.click(),document.body.removeChild(r)}else tt.a.fire(i.estado_texto,i.motivo,"info")})).catch((function(t){tt.a.fire("Error","Ocurrio un error al tratar de guardar la venta: "+t,"error")}))}},props:{},created:function(){this.obtenerDatos(),this.obtenerBodega(),this.listarFacturas()}}),Ut=Lt,$t=(a("3c3d"),a("ac7c")),Bt=a("67b6"),zt=a("43a6"),Gt=Object(m["a"])(Ut,jt,Mt,!1,null,null,null),Ht=Gt.exports;h()(Gt,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VCheckbox:$t["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VRadio:Bt["a"],VRadioGroup:zt["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Bodegas")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Código númerico"},model:{value:t.codigoNumerico,callback:function(e){t.codigoNumerico=e},expression:"codigoNumerico"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-autocomplete",{attrs:{items:t.distribuidores,label:"Distribuidor"},model:{value:t.codigoDistribuidor,callback:function(e){t.codigoDistribuidor=e},expression:"codigoDistribuidor"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.bodegas,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.codigoNumerico))]),a("td",[t._v(t._s(e.item.descripcion))]),a("td",[t._v(t._s(e.item.codigoDistribuidor.razonSocial))]),a("td",[t._v(t._s(e.item.codigoUsuario.nombres))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},Yt=[],Jt={data:function(){return{codigoNumerico:"",descripcion:"",distribuidores:[],codigoDistribuidor:"",headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Código númerico",value:"codigoNumerico",sortable:!0},{text:"Descripcion",value:"descripcion",sortable:!0},{text:"Distribuidor",value:"codigoDistribuidor.razonSocial",sortable:!0},{text:"Usuario creador",value:"codigoUsuario.nombres",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],bodegas:[],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",editedIndex:-1,_id:"",dialog:!1,search:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{},props:{},methods:{eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("bodega/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.codigoNumerico.length&&this.validaMensaje.push("*Código númerico no puede estar vacío."),0==this.descripcion.length&&this.validaMensaje.push("*Descripcion no puede estar vacío."),0==this.codigoDistribuidor.length&&this.validaMensaje.push("*Distribuidor no puede estar vacío."),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("bodega/actualizar",{_id:this._id,codigoNumerico:this.codigoNumerico,descripcion:this.descripcion,codigoDistribuidor:this.codigoDistribuidor,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("bodega/add",{codigoNumerico:this.codigoNumerico,descripcion:this.descripcion,codigoDistribuidor:this.codigoDistribuidor,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},obtenerDistribuidores:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("distribuidor/list",o).then((function(a){e=a.data,e.map((function(e){t.distribuidores.push({text:e.razonSocial,value:e._id})}))})).catch((function(t){console.log(t)}))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("bodega/list",a).then((function(e){t.bodegas=e.data})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.descripcion="",this.codigoDistribuidor="",this.codigoNumerico="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},editItem:function(t){this.descripcion=t.descripcion,this.codigoNumerico=t.codigoNumerico,this.codigoDistribuidor=t.codigoDistribuidor._id,this._id=t._id,this.dialog=!0,this.editedIndex=1}},created:function(){this.listar(),this.obtenerDistribuidores()}},Xt=Jt,Zt=Object(m["a"])(Xt,qt,Yt,!1,null,null,null),Qt=Zt.exports;h()(Zt,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Distribuidores")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"900px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-checkbox",{attrs:{label:"Obligado a llevar contabilidad?"},model:{value:t.obligadoContabilidad,callback:function(e){t.obligadoContabilidad=e},expression:"obligadoContabilidad"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"RUC"},model:{value:t.ruc,callback:function(e){t.ruc=e},expression:"ruc"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"Razon Social"},model:{value:t.razonSocial,callback:function(e){t.razonSocial=e},expression:"razonSocial"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"Nombre Comercial"},model:{value:t.nombreComercial,callback:function(e){t.nombreComercial=e},expression:"nombreComercial"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Fecha de inicio de actividades"},model:{value:t.fechaInicioAct,callback:function(e){t.fechaInicioAct=e},expression:"fechaInicioAct"}})],1),a("v-flex",{attrs:{xs12:"",sm7:"",md7:""}},[a("v-text-field",{attrs:{label:"Direccion"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-flex",{attrs:{xs12:"",sm7:"",md7:""}},[a("v-text-field",{attrs:{label:"Correo"},model:{value:t.correo,callback:function(e){t.correo=e},expression:"correo"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n                                   Nuevo establecimiento\n                                   ")],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[-1!=t.editedIndex?a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarEstablecimiento(e.item)}}},[t._v("delete")]):a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[a("v-text-field",{model:{value:e.item.numEstablecimiento,callback:function(a){t.$set(e.item,"numEstablecimiento",a)},expression:"props.item.numEstablecimiento"}})],1),a("td",[a("v-autocomplete",{attrs:{items:t.tiposestablecimientos,label:"Tipo local"},model:{value:e.item.tipoEstablecimiento,callback:function(a){t.$set(e.item,"tipoEstablecimiento",a)},expression:"props.item.tipoEstablecimiento"}})],1),a("td",[a("v-text-field",{model:{value:e.item.nombreComercialEstablecimiento,callback:function(a){t.$set(e.item,"nombreComercialEstablecimiento",a)},expression:"props.item.nombreComercialEstablecimiento"}})],1),a("td",[a("v-text-field",{model:{value:e.item.direccionEstablecimiento,callback:function(a){t.$set(e.item,"direccionEstablecimiento",a)},expression:"props.item.direccionEstablecimiento"}})],1)]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.distribuidores,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.ruc))]),a("td",[t._v(t._s(e.item.razonSocial))]),a("td",[t._v(t._s(e.item.nombreComercial))]),a("td",[t._v(t._s(e.item.correo))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},Wt=[],te={data:function(){return{distribuidores:[],correo:"",direccion:"",fechaInicioAct:"",nombreComercial:"",razonSocial:"",ruc:"",tiposestablecimientos:["MATRIZ","LOCAL","LOCAL COMERCIAL"],obligadoContabilidad:0,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Núm. establecimiento",value:"numEstablecimiento",sortable:!1},{text:"Tipo local",value:"tipoEstablecimiento",sortable:!1},{text:"Nombre comercial estab.",value:"nombreComercialEstablecimiento",sortable:!1},{text:"Dir. estab.",value:"direccionEstablecimiento",sortable:!1}],detalles:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"RUC",value:"ruc",sortable:!0},{text:"RAZON SOCIAL",value:"razonSocial",sortable:!0},{text:"NOMBRE COMERCIAL",value:"nombreComercial",sortable:!0},{text:"Correo",value:"correo",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",editedIndex:-1,_id:"",dialog:!1,search:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{},props:{},methods:{eliminarEstablecimiento:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("distribuidor/removeEstablecimiento?_id="+this._id+"&codigoEstablecimiento="+t._id,o).then((function(t){e.listarDetalle(e._id)})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},AgregarDetalle:function(){var t=this;t.detalles.unshift({numEstablecimiento:"",tipoEstablecimiento:"",nombreComercialEstablecimiento:"",direccionEstablecimiento:""})},eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("distribuidor/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},validar:function(){var t=this;return this.valida=0,this.validaMensaje=[],0==this.ruc.length&&this.validaMensaje.push("*RUC no puede estar vacío."),0==this.nombreComercial.length&&this.validaMensaje.push("*Nombre Comercial no puede estar vacío."),0==this.razonSocial.length&&this.validaMensaje.push("*Razon social no puede estar vacío."),0==this.fechaInicioAct.length&&this.validaMensaje.push("*Fecha no puede estar vacío."),0==this.direccion.length&&this.validaMensaje.push("*Direccion no puede estar vacío."),0==this.correo.length&&this.validaMensaje.push("*Correo no puede estar vacío."),this.detalles.forEach((function(e){0==e.numEstablecimiento.length&&t.validaMensaje.push("*Numero de establecimiento no puede estar vacío."),0==e.tipoEstablecimiento.length&&t.validaMensaje.push("*Tipo local no puede estar vacío."),0==e.nombreComercialEstablecimiento.length&&t.validaMensaje.push("*Nombre comercial estab. no puede estar vacío."),0==e.direccionEstablecimiento.length&&t.validaMensaje.push("*Direccion establecimiento no puede estar vacío.")})),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("distribuidor/actualizar",{_id:this._id,obligadoContabilidad:this.obligadoContabilidad,ruc:this.ruc,razonSocial:this.razonSocial,nombreComercial:this.nombreComercial,fechaInicioAct:this.fechaInicioAct,direccion:this.direccion,correo:this.correo,establecimientos:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("distribuidor/add",{obligadoContabilidad:this.obligadoContabilidad,ruc:this.ruc,razonSocial:this.razonSocial,nombreComercial:this.nombreComercial,fechaInicioAct:this.fechaInicioAct,direccion:this.direccion,correo:this.correo,establecimientos:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("distribuidor/list",a).then((function(e){t.distribuidores=e.data})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.ruc="",this.nombreComercial="",this.razonSocial="",this.obligadoContabilidad=0,this.direccion="",this.correo="",this.fechaInicioAct="",this.detalles=[],this.valida=0,this.validaMensaje=[],this.editedIndex=-1},editItem:function(t){this._id=t._id,this.ruc=t.ruc,this.nombreComercial=t.nombreComercial,this.razonSocial=t.razonSocial,this.correo=t.correo,this.direccion=t.direccion,this.fechaInicioAct=t.fechaInicioAct,this.obligadoContabilidad=t.obligadoContabilidad,this.listarDetalle(t._id),this._id=t._id,this.dialog=!0,this.editedIndex=1},listarDetalle:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("distribuidor/query?_id="+t,o).then((function(t){e.detalles=t.data.establecimientos})).catch((function(t){console.log(t)}))}},created:function(){this.listar()}},ee=te,ae=Object(m["a"])(ee,Kt,Wt,!1,null,null,null),oe=ae.exports;h()(ae,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VCheckbox:$t["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Fabricantes")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"RUC"},model:{value:t.ruc,callback:function(e){t.ruc=e},expression:"ruc"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Razon Social"},model:{value:t.razonsocial,callback:function(e){t.razonsocial=e},expression:"razonsocial"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Direccion"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("span",[t._v("CONTACTO")]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Nombre de contacto"},model:{value:t.nombresC,callback:function(e){t.nombresC=e},expression:"nombresC"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Telefono de contacto"},model:{value:t.telefonoC,callback:function(e){t.telefonoC=e},expression:"telefonoC"}})],1),a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Correo de contacto"},model:{value:t.correoC,callback:function(e){t.correoC=e},expression:"correoC"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Activar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Item")]):t._e(),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("activar")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar")]):t._e(),t._v("\n            el item "+t._s(t.adNombre)+"\n          ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("Activar")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("Desactivar")]):t._e()],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cliente,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{directives:[{name:"show",rawName:"v-show",value:t.esGuardaAlmacen,expression:"esGuardaAlmacen"}],staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("\n            edit\n          ")]),a("v-icon",{directives:[{name:"show",rawName:"v-show",value:t.esGuardaAlmacen,expression:"esGuardaAlmacen"}],staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("\n            delete\n          ")])],1),a("td",[t._v(t._s(e.item.razonsocial))]),a("td",[t._v(t._s(e.item.ruc))]),a("td",[t._v(t._s(e.item.direccion))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},re=[],se={data:function(){return{search:"",cliente:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Razon Social",value:"razonsocial",sortable:!0},{text:"RUC",value:"ruc",sortable:!0},{text:"Direccion",value:"direccion",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],editedIndex:-1,_id:"",dialog:!1,ruc:"",razonsocial:"",direccion:"",nombresC:"",telefonoC:"",correoC:"",contacto:[],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"},esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("fabricante/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("fabricante/list",a).then((function(e){t.cliente=e.data})).catch((function(t){console.log(t)}))},limpiar:function(){this._id="",this.nombresC="",this.correoC="",this.telefonoC="",this.direccion="",this.razonsocial="",this.ruc="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?(this.contacto.push({nombres:this.nombresC,telefono:this.telefonoC,correo:this.correoC}),d.a.put("fabricante/actualizar",{_id:this._id,ruc:t.ruc,razonsocial:t.razonsocial,direccion:t.direccion,contacto:t.contacto,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))):(this.contacto.push({nombres:this.nombresC,telefono:this.telefonoC,correo:this.correoC}),d.a.post("fabricante/add",{ruc:t.ruc,razonsocial:t.razonsocial,direccion:t.direccion,contacto:t.contacto,codigoUsuario:this.$store.state.usuario._id}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))))},editItem:function(t){var e=this;this._id=t._id,this.ruc=t.ruc,this.razonsocial=t.razonsocial,this.direccion=t.direccion,t.contacto.forEach((function(t){e.nombresC=t.nombres,e.correoC=t.correo,e.telefonoC=t.telefono})),this.dialog=!0,this.editedIndex=1},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombres,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this;d.a.put("persona/activate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this;d.a.put("persona/deactivate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()}}},ne=se,ce=Object(m["a"])(ne,ie,re,!1,null,null,null),le=ce.exports;h()(ce,{VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Usuarios")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"900px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"Cedula"},model:{value:t.numDocumento,callback:function(e){t.numDocumento=e},expression:"numDocumento"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-text-field",{attrs:{label:"Nombres"},model:{value:t.nombres,callback:function(e){t.nombres=e},expression:"nombres"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-autocomplete",{attrs:{items:t.roles,label:"Rol"},model:{value:t.codigoRol,callback:function(e){t.codigoRol=e},expression:"codigoRol"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Telefono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-flex",{attrs:{xs12:"",sm7:"",md7:""}},[a("v-text-field",{attrs:{label:"Direccion"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-flex",{attrs:{xs12:"",sm7:"",md7:""}},[a("v-text-field",{attrs:{label:"Correo"},model:{value:t.correo,callback:function(e){t.correo=e},expression:"correo"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:""}},[a("v-text-field",{attrs:{label:"Fecha de nacimiento"},model:{value:t.fechaNacimiento,callback:function(e){t.fechaNacimiento=e},expression:"fechaNacimiento"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n                    Nuevo establecimiento\n                  ")],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[-1!=t.editedIndex?a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarEstablecimiento(e.item)}}},[t._v("delete")]):a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[a("v-text-field",{model:{value:e.item.usuario,callback:function(a){t.$set(e.item,"usuario",a)},expression:"props.item.usuario"}})],1),a("td",[a("v-text-field",{model:{value:e.item.clave,callback:function(a){t.$set(e.item,"clave",a)},expression:"props.item.clave"}})],1),0==t.nuevodetalle?a("td",[t._v("\n                              "+t._s(e.item.codigoDistribuidor.razonSocial)+"\n                            ")]):t.nuevodetalle?a("td",[a("v-autocomplete",{attrs:{items:t.distribuidores,label:"Distribuidor"},model:{value:e.item.codigoDistribuidor,callback:function(a){t.$set(e.item,"codigoDistribuidor",a)},expression:"props.item.codigoDistribuidor"}})],1):t._e()]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.usuarioes,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.numDocumento))]),a("td",[t._v(t._s(e.item.nombres))]),e.item.codigoRol?a("td",[t._v("\n          "+t._s(e.item.codigoRol.descripcion)+"\n        ")]):t._e(),a("td",[t._v(t._s(e.item.correo))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},ue=[],ve=(a("c0e9"),{data:function(){return{nuevodetalle:0,fechaNacimiento:"",usuarioes:[],correo:"",direccion:"",codigoRol:"",numDocumento:"",nombres:"",telefono:"",roles:[],distribuidores:[],obligadoContabilidad:0,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Usuario",value:"usuario",sortable:!1},{text:"Clave",value:"clave",sortable:!1},{text:"Distribuidor",value:"codigoDistribuidor.razonSocial",sortable:!1}],detalles:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Cedula",value:"numDocumento",sortable:!0},{text:"Nombres",value:"nombres",sortable:!0},{text:"Rol",value:"codigoRol",sortable:!0},{text:"Correo",value:"correo",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",editedIndex:-1,_id:"",dialog:!1,search:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{},props:{},methods:{obtenerRoles:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("rol/list",o).then((function(a){e=a.data,e.map((function(e){t.roles.push({text:e.descripcion,value:e._id})}))})).catch((function(t){console.log(t)}))},obtenerDistribuidores:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("distribuidor/list",o).then((function(a){e=a.data,e.map((function(e){t.distribuidores.push({text:e.razonSocial,value:e._id})}))})).catch((function(t){console.log(t)}))},eliminarEstablecimiento:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("usuario/removeEstablecimiento?_id="+this._id+"&codigoEstablecimiento="+t._id,o).then((function(t){e.listarDetalle(e._id)})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},AgregarDetalle:function(){var t=this;t.nuevodetalle=1,t.detalles.unshift({usuario:"",clave:"",codigoDistribuidor:""})},eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("usuario/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},validar:function(){var t=this;return this.valida=0,this.validaMensaje=[],0==this.numDocumento.length&&this.validaMensaje.push("*Cedula no puede estar vacío."),0==this.nombres.length&&this.validaMensaje.push("*Nombres no puede estar vacío."),0==this.codigoRol.length&&this.validaMensaje.push("*Rol no puede estar vacío."),0==this.telefono.length&&this.validaMensaje.push("*Telefono no puede estar vacío."),0==this.direccion.length&&this.validaMensaje.push("*Direccion no puede estar vacío."),0==this.correo.length&&this.validaMensaje.push("*Correo no puede estar vacío."),0==this.fechaNacimiento.length&&this.validaMensaje.push("*Fecha nacimiento no puede estar vacío."),this.detalles.forEach((function(e){0==e.usuario.length&&t.validaMensaje.push("*Usuario no puede estar vacío."),0==e.clave.length&&t.validaMensaje.push("*Clave no puede estar vacío."),0==e.codigoDistribuidor.length&&t.validaMensaje.push("*Distribuidor no puede estar vacío.")})),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("usuario/actualizar",{_id:this._id,numDocumento:this.numDocumento,nombres:this.nombres,direccion:this.direccion,telefono:this.telefono,correo:this.correo,codigoRol:this.codigoRol,fechaNacimiento:this.fechaNacimiento,login:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("usuario/add",{numDocumento:this.numDocumento,nombres:this.nombres,direccion:this.direccion,telefono:this.telefono,correo:this.correo,fechaNacimiento:this.fechaNacimiento,codigoRol:this.codigoRol,login:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("usuario/list",a).then((function(e){t.usuarioes=e.data})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.nuevodetalle=0,this.numDocumento="",this.nombres="",this.correo="",this.telefono="",this.fechaNacimiento="",this.direccion="",this.codigoRol="",this.detalles=[],this.valida=0,this.validaMensaje=[],this.editedIndex=-1},editItem:function(t){this._id=t._id,this.numDocumento=t.numDocumento,this.nombres=t.nombres,this.razonSocial=t.razonSocial,this.correo=t.correo,this.direccion=t.direccion,this.telefono=t.telefono,this.codigoRol=t.codigoRol._id,this.fechaNacimiento=this.formatearFecha(t.fechaNacimiento),this.listarDetalle(t._id),this._id=t._id,this.dialog=!0,this.editedIndex=1},listarDetalle:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("usuario/query?_id="+t,o).then((function(t){e.detalles=t.data.login})).catch((function(t){console.log(t)}))},formatearFecha:function(t){if(t)return wt()(String(t)).format("MM/DD/YYYY")}},created:function(){this.listar(),this.obtenerDistribuidores(),this.obtenerRoles()}}),me=ve,pe=Object(m["a"])(me,de,ue,!1,null,null,null),he=pe.exports;h()(pe,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Clientes")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs4:"",sm4:"",md4:""}},[a("v-autocomplete",{attrs:{items:t.tipoDocumentos,label:"Tipo documento"},model:{value:t.tipoDocumento,callback:function(e){t.tipoDocumento=e},expression:"tipoDocumento"}})],1),a("v-flex",{attrs:{xs8:"",sm8:"",md8:""}},[a("v-text-field",{attrs:{label:"# documento"},model:{value:t.ruc,callback:function(e){t.ruc=e},expression:"ruc"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Nombres/Razon Social"},model:{value:t.razonsocial,callback:function(e){t.razonsocial=e},expression:"razonsocial"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Telefono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Correo"},model:{value:t.correo,callback:function(e){t.correo=e},expression:"correo"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Direccion"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Activar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Item")]):t._e(),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("activar")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar")]):t._e(),t._v("\n            el item "+t._s(t.adNombre)+"\n          ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("Activar")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("Desactivar")]):t._e()],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cliente,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.nombres))]),a("td",[t._v(t._s(e.item.numDocumento))]),a("td",[t._v(t._s(e.item.direccion))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},be=[],ge={data:function(){return{correo:"",telefono:"",tipoDocumentos:[{text:"CEDULA",value:"05"},{text:"RUC",value:"04"}],tipoDocumento:"",search:"",cliente:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Razon Social",value:"nombres",sortable:!0},{text:"# Documento",value:"numDocumento",sortable:!0},{text:"Direccion",value:"direccion",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],editedIndex:-1,_id:"",dialog:!1,ruc:"",razonsocial:"",direccion:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("cliente/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("cliente/list",a).then((function(e){t.cliente=e.data})).catch((function(t){console.log(t)}))},limpiar:function(){this._id="",this.direccion="",this.razonsocial="",this.ruc="",this.telefono="",this.correo="",this.tipoDocumento="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.ruc.length&&this.validaMensaje.push("*RUC no puede estar vacío."),0==this.razonsocial.length&&this.validaMensaje.push("*Razon Social no puede estar vacío."),0==this.direccion.length&&this.validaMensaje.push("*Direccion no puede estar vacío."),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("cliente/actualizar",{_id:this._id,tipoDocumento:t.tipoDocumento,numDocumento:t.ruc,nombres:t.razonsocial,direccion:t.direccion,telefono:t.telefono,email:t.correo}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("cliente/add",{tipoDocumento:t.tipoDocumento,numDocumento:t.ruc,nombres:t.razonsocial,direccion:t.direccion,telefono:t.telefono,email:t.correo}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},editItem:function(t){this._id=t._id,this.ruc=t.numDocumento,this.razonsocial=t.nombres,this.direccion=t.direccion,this.telefono=t.telefono,this.correo=t.email,this.tipoDocumento=t.tipoDocumento,this.dialog=!0,this.editedIndex=1},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombres,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this;d.a.put("persona/activate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this;d.a.put("persona/deactivate",{_id:this.adId}).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()}}},xe=ge,Ce=Object(m["a"])(xe,fe,be,!1,null,null,null),_e=Ce.exports;h()(Ce,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Compras")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[t.verNuevo?t._e():a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.esGuardaAlmacen,expression:"esGuardaAlmacen"}],staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.verNuevo=1}}},[t._v("\n          Nuevo\n        ")])]],2),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-text-field",{attrs:{label:"Numero Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante="string"===typeof e?e.trim():e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:"",lg6:"",xl6:""}},[a("v-text-field",{attrs:{label:"Clave de acceso"},model:{value:t.claveAcceso,callback:function(e){t.claveAcceso="string"===typeof e?e.trim():e},expression:"claveAcceso"}})],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:""}},[a("v-dialog",{ref:"dialog2",attrs:{"return-value":t.fechaFactura,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.fechaFactura=e},"update:return-value":function(e){t.fechaFactura=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Fecha de factura","prepend-icon":"event",readonly:""},model:{value:t.fechaFactura,callback:function(e){t.fechaFactura=e},expression:"fechaFactura"}},"v-text-field",i,!1),o))]}}],null,!1,899545956),model:{value:t.modal5,callback:function(e){t.modal5=e},expression:"modal5"}},[a("v-date-picker",{attrs:{scrollable:""},model:{value:t.fechaFactura,callback:function(e){t.fechaFactura=e},expression:"fechaFactura"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.modal5=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"success"},on:{click:function(e){return t.$refs.dialog2.save(t.fechaFactura)}}},[t._v("Aceptar")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm9:"",md9:"",lg9:"",xl9:""}},[a("v-textarea",{attrs:{label:"Descripcion de la compra"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{staticStyle:{display:"flex","align-items":"center"},attrs:{xs12:"",sm3:"",md3:""}},[a("v-dialog",{ref:"dialog3",attrs:{"return-value":t.fechaIngresoBodega,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.fechaIngresoBodega=e},"update:return-value":function(e){t.fechaIngresoBodega=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Fecha de Ingreso a Bodega","prepend-icon":"event",readonly:""},model:{value:t.fechaIngresoBodega,callback:function(e){t.fechaIngresoBodega=e},expression:"fechaIngresoBodega"}},"v-text-field",i,!1),o))]}}],null,!1,1917571685),model:{value:t.modal6,callback:function(e){t.modal6=e},expression:"modal6"}},[a("v-date-picker",{attrs:{scrollable:""},model:{value:t.fechaIngresoBodega,callback:function(e){t.fechaIngresoBodega=e},expression:"fechaIngresoBodega"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.modal6=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"success"},on:{click:function(e){return t.$refs.dialog3.save(t.fechaIngresoBodega)}}},[t._v("\n                    Aceptar\n                  ")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:"",lg6:"",xl6:""}},[a("v-autocomplete",{attrs:{disabled:t.isUpdating,items:t.listProveedor,chips:"",color:"blue-grey lighten-2",label:"Seleccionar Proveedor","item-text":"[razonsocial]","item-value":"[razonsocial]",dense:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{attrs:{selected:e.selected,close:""},on:{input:function(e){t.proveedorSelected=[]}}},[t._v("\n                  "+t._s(e.item.razonsocial)+"\n                ")])]}},{key:"item",fn:function(e){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.razonsocial)}})],1)]]}}],null,!1,2326060967),model:{value:t.proveedorSelected,callback:function(e){t.proveedorSelected=e},expression:"proveedorSelected"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{staticStyle:{"margin-top":"14px"},attrs:{label:"Ruc Proveedor",disabled:""},model:{value:t.ruc_proveedor,callback:function(e){t.ruc_proveedor="string"===typeof e?e.trim():e},expression:"ruc_proveedor"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{staticStyle:{"margin-top":"14px"},attrs:{label:"Direccion",disabled:""},model:{value:t.direccion_Proveedor,callback:function(e){t.direccion_Proveedor="string"===typeof e?e.trim():e},expression:"direccion_Proveedor"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}}),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",x8:""}},[a("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCodigo(t.codigo)}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){t.dialog=1}}},[a("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.errorArticulo,expression:"errorArticulo"}],attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("\n                      delete\n                    ")])],1),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoBarra))]),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoLote))]),a("td",{staticClass:"text-xs-center blue--text"},[t._v(t._s(e.item.producto))]),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{staticStyle:{width:"60px"},attrs:{type:"number"},model:{value:e.item.fracciones,callback:function(a){t.$set(e.item,"fracciones",a)},expression:"props.item.fracciones"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{type:"number"},model:{value:e.item.bonificacion,callback:function(a){t.$set(e.item,"bonificacion",a)},expression:"props.item.bonificacion"}})],1),a("td",{staticClass:"text-xs-center green--text"},[t._v("\n                    "+t._s(e.item.fxcaja)+"\n                  ")]),a("td",{staticClass:"text-xs-center green--text"},[t._v("\n                    "+t._s(e.item.fraccionesTotales=parseInt(e.item.cantidad)+parseInt(e.item.bonificacion)+parseInt(e.item.fracciones))+"\n                  ")]),a("td",{staticClass:"text-xs-center green--text"},[a("v-text-field",{staticClass:"centrar-textt",staticStyle:{width:"100px"},attrs:{prefix:"$",type:"number"},on:{change:function(e){return t.calcularCostoNeto()}},model:{value:e.item.pcompra,callback:function(a){t.$set(e.item,"pcompra",a)},expression:"props.item.pcompra"}})],1),e.item.iva?a("td",{staticClass:"text-xs-center green--text"},[a("span",[t._v("SI")])]):a("td",{staticClass:"text-xs-center green--text"},[a("span",[t._v("NO")])]),a("td",{staticClass:"text-xs-center green--text"},[a("v-text-field",{staticStyle:{width:"100px"},attrs:{type:"number",prefix:"$"},on:{change:function(e){return t.calcularCostoNeto()}},model:{value:e.item.descuento,callback:function(a){t.$set(e.item,"descuento",a)},expression:"props.item.descuento"}})],1),(e.item.iva,a("td",{staticClass:"text-xs-center green--text"},[t._v("\n                    $"+t._s((parseFloat(e.item.fracciones)*parseFloat(e.item.pcompra)-parseFloat(e.item.descuento)).toFixed(2))+"\n                  ")]))]}}],null,!1,3128039837)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2),a("span",[t._v("Forma de pago")]),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.Agregarformapago()}}},[a("v-icon",[t._v("add")]),t._v("\n                  Nuevo detalle\n                ")],1)],1),a("v-layout",{attrs:{wrap:""}},[a("div",{attrs:{id:"formapago"}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraFormapago,items:t.detallesFP,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detallesFP,e.item)}}},[t._v("\n                              delete\n                            ")])],1),a("td",[a("v-autocomplete",{attrs:{items:t.formaspagos,label:"Forma pago"},model:{value:e.item.formaPago,callback:function(a){t.$set(e.item,"formaPago",a)},expression:"props.item.formaPago"}})],1),a("td",[a("v-text-field",{model:{value:e.item.total,callback:function(a){t.$set(e.item,"total",a)},expression:"props.item.total"}})],1),a("td",[a("v-autocomplete",{attrs:{items:t.tiempos,label:"Tiempo"},model:{value:e.item.unidadTiempo,callback:function(a){t.$set(e.item,"unidadTiempo",a)},expression:"props.item.unidadTiempo"}})],1),"NINGUNO"==e.item.unidadTiempo?a("td",[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.plazo,callback:function(a){t.$set(e.item,"plazo",a)},expression:"props.item.plazo"}})],1):a("td",[a("v-text-field",{model:{value:e.item.plazo,callback:function(a){t.$set(e.item,"plazo",a)},expression:"props.item.plazo"}})],1)]}}],null,!1,3191963587)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-spacer"),a("div",{attrs:{id:"totales"}},[a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Sub Total:")]),t._v("\n                    $"+t._s(t.subtotal=t.calcularSubtotal)+"\n                  ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Impuesto:")]),t._v("\n                    $"+t._s(t.totalimpuesto=t.calcularIva)+"\n                  ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Descuento:")]),t._v("\n                    $"+t._s(t.totaldescuento=t.calcularDescuento)+"\n                  ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total:")]),t._v("\n                    $"+t._s(t.total=t.calcularTotal)+"\n                  ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total retenido:")]),t._v("\n                    $"+t._s(t.totalRet)+"\n                  ")])],1)],1)]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("\n              Cancelar\n            ")]),0!=t.verDetalle||t.editando?t._e():a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[t._v("\n              Guardar\n            ")])],1)],1)],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Activar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Item")]):t._e(),a("v-card-text",[t._v("\n          Estás a punto de\n          "),1==t.adAccion?a("span",[t._v("activar")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar")]):t._e(),t._v("\n          el item "+t._s(t.adNombre)+"\n        ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("Activar")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("Desactivar")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulosnombres(t.texto)}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.agregarDetalle(e.item)}}},[t._v("\n                          add\n                        ")])],1),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoBarra))]),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoLote))]),a("td",{},[t._v(t._s(e.item.nombreComercial))]),a("td",{},[t._v(t._s(e.item.codigoProducto.fraccionCaja))]),a("td",{},[t._v(t._s(e.item.fraccionesTotales))]),a("td",{},[t._v(t._s(e.item.codigoFabricante.razonsocial))])]}}])})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),t.verNuevo?t._e():a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraCompras,items:t.compras,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verDetalleC(e.item)}}},[t._v("tab")]),t.esGuardaAlmacen?[e.item.estado?[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(2,e.item)}}},[t._v("block")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(1,e.item)}}},[t._v("check")])]]:t._e()],2),a("td",{staticClass:"blue--text"},[t._v(" "+t._s(e.item.descripcion.toUpperCase())+" ")]),a("td",[t._v(" "+t._s(e.item.codigoProveedor.razonsocial)+" ")]),a("td",[t._v(" "+t._s(e.item.numComprobante)+" ")]),e.item.claveAcceso?a("td",[t._v(" "+t._s(e.item.claveAcceso)+" ")]):a("td"),a("td",[t._v("$"+t._s(e.item.subTotal))]),a("td",[t._v("$"+t._s(e.item.total))]),e.item.totalRetenido?a("td",[t._v("$"+t._s(e.item.totalRetenido))]):a("td",{staticClass:"red--text"},[t._v("NO REGISTRA RETENCION")]),a("td",[t._v("$"+t._s(e.item.totalimpuesto))]),a("td",[t._v("$"+t._s(e.item.totaldescuento))]),a("td",[t._v("\n          "+t._s(t.formatearFecha(e.item.fechaFactura))+"\n        ")]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"green--text"},[t._v("Aceptado")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Anulado")])])])]}}],null,!1,988109440)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},Ee=[],De=(a("7514"),{name:"IndexCompras",computed:{calcularTotal:function(){var t=parseFloat(this.calcularSubtotal)+parseFloat(this.calcularIva);return t.toFixed(2)},calcularDescuento:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=this.detalles[e];t+=parseFloat(a.descuento)}return t.toFixed(2)},calcularIva:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=0,s=this.detalles[e];s.iva&&(a=parseFloat(s.fracciones),o=parseFloat(s.pcompra),i=parseFloat(s.descuento),r=a*o-i,t+=r)}return t*=.12,t.toFixed(2)},calcularSubtotal:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=0,s=this.detalles[e];a=parseFloat(s.fracciones),o=parseFloat(s.pcompra),i=parseFloat(s.descuento),r=a*o-i,t+=r}return t.toFixed(2)},esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol}},watch:{isUpdating:function(t){var e=this;t&&setTimeout((function(){return e.isUpdating=!1}),3e3)},proveedorSelected:function(t,e){if(0==t.length)this.ruc_proveedor="",this.razonSocial_Proveedor="",this.direccion_Proveedor="",this._idProveedor="";else{var a=this.listProveedor.find((function(e){return e.razonsocial==t}));this.ruc_proveedor=a.ruc,this.razonSocial_Proveedor=a.razonsocial,this.direccion_Proveedor=a.direccion,this._idProveedor=a._id}},verNuevo:function(t,e){1!=t||this.editando||this.getProveedores()}},data:function(){return{editando:!1,autoUpdate:!0,proveedorSelected:[],isUpdating:!1,listProveedor:[],modal5:!1,modal6:!1,cabeceraFormapago:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Forma de pago",value:"formapago",sortable:!1},{text:"Total a pagar",value:"total",sortable:!1},{text:"Plazo en:",value:"plazo",sortable:!1},{text:"Tiempo en:",value:"unidadTiempo",sortable:!1}],detallesFP:[],formaspagos:[{text:"SIN UTILIZACION DEL SISTEMA FINANCIERO",value:"01"},{text:"COMPENSACIÓN DE DEUDAS",value:"15"},{text:"TARJETA DE DÉBITO",value:"16"},{text:"DINERO ELECTRÓNICO",value:"17"},{text:"TARJETA PREPAGO",value:"18"},{text:"TARJETA DE CRÉDITO",value:"19"},{text:"OTROS CON UTILIZACION DEL SISTEMA FINANCIERO",value:"20"},{text:"ENDOSO DE TÍTULOS",value:"21"}],tiempos:["NINGUNO","dias","meses","años"],totalRet:0,cabeceraCompras:[{text:"Opciones",value:"borrar",sortable:!1},{text:"DESCRIPCION",value:"descripcion",sortable:!1},{text:"Proveedor",value:"razonsocial",sortable:!0},{text:"# COMPROBANTE",value:"numComprobante",sortable:!1},{text:"Clave de acceso",value:"claveAcceso",sortable:!1},{text:"Sub Total",value:"subTotal",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Total retenido",value:"totalRetenido",sortable:!1},{text:"Impuestos",value:"totalimpuesto",sortable:!1},{text:"Descuentos",value:"totaldescuento",sortable:!1},{text:"Fecha de emision",value:"fechaFactura",sortable:!0},{text:"Estado",value:"estado",sortable:!0}],compras:[],claveAcceso:"",_idProveedor:"",texto:"",articulos:[],cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Codigo Barras",value:"codigoBarra",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1},{text:"F x Caja",value:"fraccionCaja",sortable:!1},{text:"Stock",value:"fraccionesTotales",sortable:!1},{text:"Laboratorio",value:"codigoFabricante.descripcion",sortable:!1}],dialog:0,total:0,totalimpuesto:0,totaldescuento:0,subtotal:0,search:"",verDetalle:0,verNuevo:0,validaMensaje:[],valida:!1,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Codigo Barras",value:"codigoBarra",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Producto",value:"producto",sortable:!1},{text:"Unidades",value:"fracciones",sortable:!1},{text:"Bonificacion",value:"bonificacion",sortable:!1},{text:"U * Caja",value:"fxcaja",sortable:!1},{text:"U Totales",value:"fraccionesTotales",sortable:!1},{text:"P Compra",value:"pcompra",sortable:!1},{text:"IVA?",value:"iva",sortable:!1},{text:"Descuento",value:"descuento",sortable:!1},{text:"Sub Total",value:"subtotal",sortable:!1}],detalles:[],codigo:"",errorArticulo:"",numComprobante:"",fechaFactura:"",fechaIngresoBodega:"",descripcion:"",direccion_Proveedor:"",razonSocial_Proveedor:"",ruc_proveedor:"",codigoBodega:"",adModal:0,adAccion:0,adNombre:"",adId:""}},methods:{getProveedores:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this,o={Token:this.$store.state.token},i={headers:o};d.a.get("proveedor/list",i).then((function(o){a.listProveedor=o.data,t&&(a.proveedorSelected=e)})).catch((function(t){console.log(t)}))},calcularCostoNeto:function(){this.detalles.forEach((function(t){var e=parseFloat(t.fracciones),a=parseFloat(t.descuento);if(t.iva){var o=parseInt(e)*parseFloat(t.pcompra)*.12,i=parseFloat(e)*parseFloat(t.pcompra)-a+o;console.log(i);var r=parseFloat(i)/parseFloat(t.fraccionesTotales);t.costoNeto=parseFloat(r).toFixed(2)}else{var s=parseFloat(e)*parseFloat(t.pcompra)-a,n=parseFloat(s)/parseFloat(t.fraccionesTotales);t.costoNeto=parseFloat(n).toFixed(2)}}))},Agregarformapago:function(){var t=this;t.detallesFP.unshift({formaPago:"01",total:this.total,plazo:0,unidadTiempo:"NINGUNO"})},listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("compras/query?_id="+t,o).then((function(t){e.detalles=t.data.detalles,e.detallesFP=t.data.formaPago})).catch((function(t){console.log(t)}))},verDetalleC:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),this.claveAcceso=e.claveAcceso,this.totalRet=e.totalRetenido,this.verNuevo=1,this.editando=!0,this.numComprobante=e.numComprobante,this.descripcion=e.descripcion,this.fechaFactura=this.formatearFecha(e.fechaFactura),this.fechaIngresoBodega=this.formatearFecha(e.fechaIngresoBodega),this.listarDetalles(e._id),t.next=12,this.getProveedores(!0,e.codigoProveedor.razonsocial);case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),formatearFecha:function(t){if(t)return wt()(String(t)).format("YYYY-MM-DD")},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("compras/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.compras=e.data:console.log(e)})).catch((function(t){console.log(t)}))},ocultarNuevo:function(){this.editando=!1,this.proveedorSelected="",this.verNuevo=0,this.limpiar()},limpiar:function(){this.detallesFP=[],this.claveAcceso="",this.direccion_Proveedor="",this.razonSocial_Proveedor="",this.ruc_proveedor="",this.numComprobante="",this.fechaFactura="",this.descripcion="",this.errorArticulo="",this.total=0,this.totalimpuesto=0,this.totaldescuento=0,this.subtotal=0,this._idProveedor="",this.detalles=[],this.valida=0,this.validaMensaje=[]},limpiarbusqueda:function(){this.texto="",this.articulos=[]},close:function(){this.dialog=0,this.limpiarbusqueda()},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;void 0==o||d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},listarArticulosnombres:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/busca?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):(console.log(t.data),e.articulos=t.data)})).catch((function(t){console.log(t)}))},validar_guardar:function(){this.valida=0,this.validaMensaje=[],0==this.numComprobante.length&&this.validaMensaje.push("Debe ingresar el numero de comprobante."),0==this.fechaFactura.length&&this.validaMensaje.push("Debe ingresar la fecha de emision de la factura."),0==this.descripcion.length&&this.validaMensaje.push("Debe ingresar la descripcion de la compra"),0==this.ruc_proveedor.length&&this.validaMensaje.push("Debe ingresar el numero de RUC del proveedor."),0==this.razonSocial_Proveedor.length&&this.validaMensaje.push("Falta razon social del proveedor."),0==this.direccion_Proveedor.length&&this.validaMensaje.push("Falta direccion de proveedor."),0==this.detalles.length&&this.validaMensaje.push("Debe ingresar al menos un detalle a la factura de compra.");for(var t=0;t<this.detalles.length;t++){var e=this.detalles[t];0==e.cantidad.length&&this.validaMensaje.push("CANTIDAD no puede ser un valor vacio."),parseInt(e.cantidad)<0&&this.validaMensaje.push("CANTIDAD no puede ser un valor negativo."),0==e.fracciones.length&&this.validaMensaje.push("FRACCIONES no puede ser un valor vacio."),parseInt(e.fracciones)<0&&this.validaMensaje.push("FRACCIONES no puede ser un valor negativo."),0==e.bonificacion.length&&this.validaMensaje.push("BONIFICACION no puede ser un valor vacio."),parseInt(e.bonificacion)<0&&this.validaMensaje.push("BONIFICACION no puede ser un valor negativo."),0!=e.pvm&&0!=e.pvm.length||this.validaMensaje.push("PVM no puede ser un valor vacio."),0!=e.punit&&0!=e.punit.length||this.validaMensaje.push("P. UNIT no puede ser un valor vacio."),0==e.descuento.length&&this.validaMensaje.push("DESCUENTO no puede ser un valor vacio."),e.pvm<0&&this.validaMensaje.push("PVM no puede ser negativo."),e.pvp<0&&this.validaMensaje.push("PVP no puede ser negativo."),e.punit<0&&this.validaMensaje.push("P. UNIT no puede ser negativo."),e.descuento<0&&this.validaMensaje.push("DESCUENTO no puede ser negativo.")}return this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){if(!this.validar_guardar()){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id,r=new Date(this.fechaFactura+" 05:00:00"),s=new Date(this.fechaIngresoBodega+" 05:00:00");d.a.post("compras/add",{claveAcceso:this.claveAcceso.trim(),numComprobante:this.numComprobante.trim(),fechaFactura:r.toISOString(),fechaIngresoBodega:s.toISOString(),subTotal:this.subtotal,total:this.total,totalImpuesto:this.totalimpuesto,totalDescuento:this.totaldescuento,detalles:this.detalles,formaPago:this.detallesFP,descripcion:this.descripcion,codigoProveedor:this._idProveedor,codigoBodega:this.codigoBodega,codigoDistribuidor:o,codigoUsuario:i},a).then((function(e){200==e.status?(t.detallesFP.forEach((function(a){0!=a.plazo&&t.generarCuentaPorPagar(a.total,a.unidadTiempo,a.plazo,e.data._id,t._idProveedor,o,i,t.total,t.numComprobante,t.fechaFactura,t.descripcion)})),tt.a.fire("Noticias!","Se guardo correctamente la compra.","success")):tt.a.fire("Ops!","Hubo problemas al intentar guardar la compra","error"),t.limpiar(),t.ocultarNuevo(),t.listar()})).catch((function(t){console.log(t),tt.a.fire("Ops!",t.response.data.message,"error")}))}},obtenerConteoCTaPC:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,e={Token:this.$store.state.token},a={headers:e},this.$store.state.usuario.codigoDistribuidor,t.next=6,d.a.get("cuentasporpagar/contar",a);case 6:return o=t.sent,t.abrupt("return",o.data);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),generarCuentaPorPagar:function(t,e,a,o,i,r,s,n,c,l,u){var v={Token:this.$store.state.token},m={headers:v},p=this.obtenerConteoCTaPC(),h="";p.then((function(v){h=v,d.a.post("cuentasporpagar/add",{numComprobante:h,plazo:a,totalFormaPago:t,totalPagado:0,unidadTiempo:e,codigoCompra:o,codigoProveedor:i,codigoDistribuidor:r,codigoUsuario:s,totalFactura:n,numComprobanteFactura:c,fechaFactura:l,descripcion:u},m).then((function(t){})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!=a&&t.splice(a,1)},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},agregarDetalle:function(t){this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(this.detalles.unshift({_id:t._id,codigoLote:t.codigoLote,codigoBarra:t.codigoBarra,producto:t.nombreComercial,cantidad:0,fracciones:0,bonificacion:0,fxcaja:t.codigoProducto.fraccionCaja,fraccionesTotales:t.fraccionesTotales,costoNeto:0,pcompra:0,pvp:t.pvp,pvm:t.pvm,punit:t.punit,descuento:0,iva:t.iva}),this.codigo="")},buscarCodigo:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/buscaCodigo?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){console.log(t.data),206==t.status?tt.a.fire("Aviso",t.data.message,"error"):t.data.length>1?tt.a.fire("Aviso","Se estan mostrando mas de un resultado \n deberia buscar en pantalla.","error"):e.agregarDetalle(t.data)})).catch((function(t){console.log(t)}))},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.numComprobante,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("compras/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("compras/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))}},created:function(){this.listar(),this.obtenerBodega()}}),Oe=De,Ie=(a("dd16"),a("cc20")),Te=a("a844"),Se=Object(m["a"])(Oe,Ae,Ee,!1,null,null,null),ke=Se.exports;h()(Se,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VChip:Ie["a"],VContainer:C["a"],VDataTable:vt["a"],VDatePicker:Nt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VListTileContent:R["a"],VListTileTitle:R["b"],VSpacer:y["a"],VTextField:it["a"],VTextarea:Te["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Cuarentena")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),void 0],2),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-text-field",{attrs:{label:"Fecha Emi. Fact."},model:{value:t.fechaFactura,callback:function(e){t.fechaFactura=e},expression:"fechaFactura"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:"",lg5:"",xl5:""}},[a("v-text-field",{attrs:{label:"Descripcion de la compra"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[e.item.estado?[a("v-icon",{staticClass:"red--text",attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(1,e.item)}}},[t._v("\n                        save\n                      ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(2,e.item)}}},[t._v("save")])]],2),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.producto)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.fracciones,callback:function(a){t.$set(e.item,"fracciones",a)},expression:"props.item.fracciones"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.bonificacion,callback:function(a){t.$set(e.item,"bonificacion",a)},expression:"props.item.bonificacion"}})],1),a("td",[e.item.estado?a("div",[a("span",{staticClass:"green--text"},[t._v("Aceptado")])]):a("div",[a("span",{staticClass:"orange--text"},[t._v("En espera")])])]),a("td",[a("v-autocomplete",{directives:[{name:"show",rawName:"v-show",value:t.esQuimico||t.esGuardaAlmacen,expression:"esQuimico || esGuardaAlmacen"}],attrs:{items:t.accion,label:"Estado curentena"},model:{value:e.item.estado,callback:function(a){t.$set(e.item,"estado",a)},expression:"props.item.estado"}})],1),a("td",{directives:[{name:"show",rawName:"v-show",value:t.esQuimico,expression:"esQuimico"}]},[e.item.estado?a("div",[a("span",{staticClass:"green--text"},[t._v("LISTO PARA ASIGNAR PERCHA PERCHA")])]):a("div",[a("v-text-field",{model:{value:e.item.descripcion,callback:function(a){t.$set(e.item,"descripcion",a)},expression:"props.item.descripcion"}})],1)])]}}],null,!1,5644052)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("Atras")])],1)],1)],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Actualizar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Actualizar Item")]):t._e(),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("actualizar")]):t._e(),2==t.adAccion?a("span",[t._v("actualizar")]):t._e(),t._v("\n            el item "+t._s(t.adNombre)+"\n          ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"blue darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("ACTUALIZAR")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"blue darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("ACTUALIZAR")]):t._e()],1)],1)],1),t.verNuevo?t._e():a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraCompras,items:t.compras,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2 ",attrs:{small:""},on:{click:function(a){return t.verDetalleC(e.item)}}},[t._v("tab")])],1),a("td",{staticClass:" blue--text"},[t._v("\n          "+t._s(e.item.codigoProveedor?e.item.codigoProveedor.razonsocial:"No se agrego proveedor")+"\n        ")]),a("td",{staticClass:" blue--text"},[t._v(t._s(e.item.descripcion.toUpperCase()))]),a("td",[t._v(t._s(e.item.numComprobante))]),a("td",[t._v(t._s(t.formatearFecha(e.item.createdAt)))])]}}],null,!1,185535670)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},Ne=[],Pe={data:function(){return{cabeceraCompras:[{text:"Opciones",value:"borrar",sortable:!1},{text:"PROVEEDOR",value:"proveedor",sortable:!0},{text:"DESCRIPCION",value:"descripcion",sortable:!1},{text:"# COMPROBANTE",value:"numComprobante",sortable:!1},{text:"Fecha",value:"createdAt",sortable:!0}],compras:[],cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Codigo Barras",value:"codigoBarras",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1}],dialog:0,verNuevo:0,validaMensaje:[],valida:!1,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Producto",value:"producto",sortable:!1},{text:"Unidades",value:"fracciones",sortable:!1},{text:"Bonificacion",value:"bonificacion",sortable:!1},{text:"Estado",value:"estado",sortable:!1},{text:"Accion",value:"accion",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!1}],accion:[{text:"Aprobado",value:1},{text:"No Aprobado",value:0}],detalles:[],numComprobante:"",fechaFactura:"",descripcion:"",search:"",adModal:0,adModalD:0,adAccion:0,adAccionD:0,adNombre:"",adNombreD:"",adId:"",adIdD:"",descripcionD:"",cuarentena_id:""}},computed:{esQuimico:function(){return"6425b4e63015a625b227f4b7"==this.$store.state.usuario.rol},esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol}},methods:{ocultarNuevo:function(){this.verNuevo=0},listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("cuarentena/query?_id="+t,o).then((function(t){e.detalles=t.data.detalles})).catch((function(t){console.log(t)}))},verDetalleC:function(t){this.cuarentena_id=t._id,this.verNuevo=1,this.numComprobante=t.numComprobante,this.descripcion=t.descripcion,this.fechaFactura=this.formatearFecha(t.createdAt),this.listarDetalles(t._id)},formatearFecha:function(t){if(t)return wt()(String(t)).format("MM/DD/YYYY")},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("cuarentena/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.compras=e.data:console.log(e)})).catch((function(t){console.log(t)}))},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.producto,this.adId=e._id,this.descripcionD=e.descripcion,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("cuarentena/activateD",{_id:this.adId,cuarentena_id:this.cuarentena_id,numComprobante:this.numComprobante},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId=""})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("cuarentena/deactivateD",{_id:this.adId,descripcion:this.descripcionD,cuarentena_id:this.cuarentena_id,numComprobante:this.numComprobante},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId=""})).catch((function(t){console.log(t)}))}},created:function(){this.listar()}},ye=Pe,Fe=Object(m["a"])(ye,Re,Ne,!1,null,null,null),je=Fe.exports;h()(Fe,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Asignar Perchas")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:"",disabled:""},on:{click:function(e){t.verNuevo=1}}},[t._v("\n          Nuevo\n        ")])]],2),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-text-field",{attrs:{label:"Fecha Emi. Fact."},model:{value:t.fechaFactura,callback:function(e){t.fechaFactura=e},expression:"fechaFactura"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:"",lg5:"",xl5:""}},[a("v-text-field",{attrs:{label:"Descripcion de la compra"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.producto)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.fracciones,callback:function(a){t.$set(e.item,"fracciones",a)},expression:"props.item.fracciones"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.bonificacion,callback:function(a){t.$set(e.item,"bonificacion",a)},expression:"props.item.bonificacion"}})],1),e.item.estado?[a("td",[a("v-autocomplete",{directives:[{name:"show",rawName:"v-show",value:t.esGuardaAlmacen,expression:"esGuardaAlmacen"}],attrs:{multiple:"",items:t.perchas,label:"Asignación de perchas"},model:{value:e.item.percha,callback:function(a){t.$set(e.item,"percha",a)},expression:"props.item.percha"}})],1),t.existeRefriSelected(e.item)?a("td",[a("v-text-field",{attrs:{type:"number"},model:{value:e.item.temperatura,callback:function(a){t.$set(e.item,"temperatura",a)},expression:"props.item.temperatura"}})],1):t._e()]:a("td",{staticClass:"text-md-center",staticStyle:{color:"#827717"}},[a("h4",[t._v("Este articulo aun no pasa la cuarentena")])])]}}],null,!1,1921763625)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("\n              Cancelar\n            ")]),0==t.verDetalle&&0==t.estado?a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[t._v("\n              ACTUALIZAR\n            ")]):t._e()],1)],1)],1):t._e()],1),t.verNuevo?t._e():a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraCompras,items:t.compras,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verDetalleC(e.item)}}},[t._v("tab")])],1),a("td",{staticClass:" blue--text"},[t._v(" "+t._s(e.item.descripcion.toUpperCase())+" ")]),a("td",[t._v(" "+t._s(e.item.numComprobante)+" ")]),a("td",[t._v(" "+t._s(t.formatearFecha(e.item.createdAt))+" ")])]}}],null,!1,3921701448)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},Ve=[],we=(a("6b54"),a("6762"),a("2fdb"),a("7618")),Le={name:"asignacionPerchas",computed:{esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol}},data:function(){return{perchas:[],cabeceraCompras:[{text:"Opciones",value:"borrar",sortable:!1},{text:"DESCRIPCION",value:"descripcion",sortable:!1},{text:"# COMPROBANTE",value:"numComprobante",sortable:!1},{text:"Fecha",value:"createdAt",sortable:!0}],compras:[],articulos:[],cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Codigo Barras",value:"codigoBarras",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1}],search:"",verDetalle:0,verNuevo:0,validaMensaje:[],valida:!1,cabeceraDetalles:[{text:"Producto",value:"producto",sortable:!1},{text:"Unidades",value:"unidades",sortable:!1},{text:"Bonificacion",value:"bonificacion",sortable:!1},{text:"Asignar percha",value:"asignarPercha",sortable:!1},{text:"Temperatura",value:"temperatura"}],accion:[{text:"Aprobado",value:1},{text:"No Aprobado",value:0}],detalles:[],codigo:"",errorArticulo:"",numComprobante:"",fechaFactura:"",descripcion:"",codigoBodega:"",adModal:0,adModalD:0,adAccion:0,adAccionD:0,adNombre:"",adId:"",descripcionD:"",id:"",estado:0}},methods:{listar_perchas:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=[];d.a.get("perchas/list",a).then((function(e){var a=e.data;a.forEach((function(t){var e=t.niveles;e.forEach((function(e){o.push(t.descripcion+"-"+e.nivel)}))})),t.perchas=o})).catch((function(t){console.log(t)}))},listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("asignacionpercha/query?_id="+t,o).then((function(t){e.detalles=t.data.detalles})).catch((function(t){console.log(t)}))},verDetalleC:function(t){this.verNuevo=1,this.numComprobante=t.numComprobante,this.descripcion=t.descripcion,this.estado=t.estado,this.fechaFactura=this.formatearFecha(t.createdAt),this.listarDetalles(t._id),this.id=t._id},formatearFecha:function(t){if(t)return wt()(String(t)).format("DD/MM/YYYY")},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("asignacionpercha/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.compras=e.data:console.log(e)})).catch((function(t){console.log(t)}))},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},limpiar:function(){this.numComprobante="",this.fechaFactura="",this.descripcion="",this.errorArticulo="",this.total=0,this.detalles=[],this.estado=0,this.valida=0,this.validaMensaje=[]},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;void 0==o||d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},existeRefriSelected:function(t){var e=!1;return"object"==Object(we["a"])(t.percha)&&(e=t.percha.some((function(t){return t.includes("REFRI")}))),e},guardar:function(){var t=!1,e=this,a={Token:this.$store.state.token},o={headers:a},i=this.$store.state.usuario.codigoDistribuidor,r=this.$store.state.usuario._id;this.detalles.map((function(e,a){e.percha.some((function(t){return t.includes("REFRI")}))?e.temperatura||(tt.a.fire("Noticias!","Debes agregar la temperatura en la fila ".concat(a+1),"warning"),t=!0):e.temperatura=null})),t||(this.detalles.map((function(t){t.percha=t.percha.toString()})),d.a.put("asignacionpercha/actualizar",{_id:this.id,numComprobante:this.numComprobante,fechaFactura:this.fechaFactura,detalles:this.detalles,descripcion:this.descripcion,codigoBodega:this.codigoBodega,codigoDistribuidor:i,codigoUsuario:r},o).then((function(t){200==t.status?tt.a.fire("Noticias!","Se asignado percha correctamente.","success"):tt.a.fire("Ops!","Hubo problemas al intentar asignar percha.","err"),e.limpiar(),e.ocultarNuevo()})).catch((function(t){console.log(t)})))},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},agregarDetalle:function(t){this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(this.detalles.unshift({_id:t._id,producto:t.nombreComercial,cantidad:0,fracciones:0,bonificacion:0,fxcaja:t.codigoProducto.fraccionCaja,fraccionesTotales:t.fraccionesTotales,costoNeto:0,pvp:t.pvp,pvm:t.pvm,punit:t.punit,descuento:t.descuento,iva:t.iva}),this.codigo="")}},created:function(){this.listar(),this.obtenerBodega(),this.listar_perchas()}},Ue=Le,$e=Object(m["a"])(Ue,Me,Ve,!1,null,null,null),Be=$e.exports;h()($e,{VAutocomplete:Rt["a"],VBtn:b["a"],VContainer:C["a"],VDataTable:vt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Retenciones")])],1),a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Punto emisión"},model:{value:t.ptoemision,callback:function(e){t.ptoemision=e},expression:"ptoemision"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Periodo fiscal/Mes",disabled:""},model:{value:t.pfMes,callback:function(e){t.pfMes=e},expression:"pfMes"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Periodo fiscal/Año",disabled:""},model:{value:t.pfAnio,callback:function(e){t.pfAnio=e},expression:"pfAnio"}})],1)],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-autocomplete",{attrs:{items:t.documentos,label:"Tipo de documento"},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},["01"==t.documento?a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){return t.mostrarModalcomprobantes()}}},[a("v-icon",{attrs:{dark:""}},[t._v("list")])],1):t._e()],1),t.documento?a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"cod. tipo doc.",disabled:""},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}})],1):a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"cod. tipo doc."},model:{value:t.otrotipodoc,callback:function(e){t.otrotipodoc=e},expression:"otrotipodoc"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Numero de comprobante"},model:{value:t.claveAccesodig,callback:function(e){t.claveAccesodig=e},expression:"claveAccesodig"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"SubTotal comprobante"},model:{value:t.subtotalComprobante,callback:function(e){t.subtotalComprobante=e},expression:"subtotalComprobante"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Total I.V.A."},model:{value:t.totaliva,callback:function(e){t.totaliva=e},expression:"totaliva"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Total comprobante",disabled:""},model:{value:t.totalComprobante,callback:function(e){t.totalComprobante=e},expression:"totalComprobante"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Fecha emision"},model:{value:t.fechaEmisionComprobante,callback:function(e){t.fechaEmisionComprobante=e},expression:"fechaEmisionComprobante"}})],1)],1),a("span",[t._v("Datos del sujeto retenido")]),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-radio-group",{attrs:{row:""},model:{value:t.tipoIdentificacion,callback:function(e){t.tipoIdentificacion=e},expression:"tipoIdentificacion"}},[a("v-radio",{attrs:{label:"Cedula",value:"05"}}),a("v-radio",{attrs:{label:"RUC",value:"04"}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Cédula/RUC",type:"number"},model:{value:t.ruc_sretenido,callback:function(e){t.ruc_sretenido=e},expression:"ruc_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Razon Social/Apellidos y Nombres"},model:{value:t.razonsocial_sretenido,callback:function(e){t.razonsocial_sretenido=e},expression:"razonsocial_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Dirección sretenido"},model:{value:t.direccion_sretenido,callback:function(e){t.direccion_sretenido=e},expression:"direccion_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Email",type:"email"},model:{value:t.email_sretenido,callback:function(e){t.email_sretenido=e},expression:"email_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Telefono"},model:{value:t.telefono_sretenido,callback:function(e){t.telefono_sretenido=e},expression:"telefono_sretenido"}})],1)],1)],1),a("span",[t._v("Impuestos")]),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs3:"",sm3:"",md3:"",lg3:"",xl3:""}},[a("v-autocomplete",{attrs:{items:t.impuestos,label:"Tipo de documento"},model:{value:t.impuesto,callback:function(e){t.impuesto=e},expression:"impuesto"}})],1),a("v-flex",{attrs:{xs3:"",sm3:"",md3:"",lg3:"",xl3:""}},[2==t.impuesto?a("v-autocomplete",{attrs:{items:t.ivaDetalle,label:"I.V.A"},on:{change:function(e){return t.calcularvaloraretener()}},model:{value:t.codigoRetencion,callback:function(e){t.codigoRetencion=e},expression:"codigoRetencion"}}):1==t.impuesto?a("v-autocomplete",{attrs:{items:t.irDetalle,label:"Impuesto a la renta"},on:{change:function(e){return t.calcularvaloraretener()}},model:{value:t.codigoRetencion,callback:function(e){t.codigoRetencion=e},expression:"codigoRetencion"}}):t._e()],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"% de retencion"},model:{value:t.porcentajeRetencion,callback:function(e){t.porcentajeRetencion=e},expression:"porcentajeRetencion"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Valor retenido",disabled:""},model:{value:t.valorRetenido,callback:function(e){t.valorRetenido=e},expression:"valorRetenido"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n              Agregar a detalle\n            ")],1)],1)],1)],1),a("span",[t._v("Detalles del comprobante de retencion")]),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.codigo))]),a("td",[t._v(t._s(e.item.codigoRetencion))]),a("td",[t._v(t._s(e.item.baseImponible))]),a("td",[t._v(t._s(e.item.porcentajeRetener))]),a("td",[t._v(t._s(e.item.valorRetenido))]),a("td",[t._v(t._s(e.item.codDocSustento))]),a("td",[t._v(t._s(e.item.numDocSustento))]),a("td",[t._v(t._s(e.item.fechaEmisionDocSustento))])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[a("v-icon",[t._v("save")]),t._v("\n          Guardar")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.modalComprobantes,callback:function(e){t.modalComprobantes=e},expression:"modalComprobantes"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un comprobante")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraComprobantes,items:t.comprobantes,search:t.texto},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.cargarInformacion(e.item)}}},[t._v("add")])],1),a("td",[t._v(t._s(e.item.numComprobante))]),a("td",[t._v(t._s(e.item.descripcion))]),a("td",[t._v("$"+t._s(e.item.subTotal))]),a("td",[t._v("$"+t._s(e.item.total))]),a("td",[t._v(t._s(t.formatearFecha(e.item.fechaFactura)))])]}}])})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.cerrarModalcomprobantes}},[t._v("Cancelar")])],1)],1)],1)],1)],1)},Ge=[],He={created:function(){this.periodoFiscal(),this.obtenerDatos()},methods:{limpiar:function(){this._idProveedor="",this._idCompra="",this.totaliva=0,this.fechaEmisionComprobante="",this.otrotipodoc=0,this.porcentajeRetencion=0,this.valorRetenido=0,this.codigoRetencion="",this.impuesto="",this.totalComprobante=0,this.subtotalComprobante=0,this.claveAccesodig="",this.buscar="",this.texto="",this.tipoBusqueda="",this.tipoIdentificacion="",this.direccion_sretenido="",this.telefono_sretenido="",this.email_sretenido="",this.razonsocial_sretenido="",this.ruc_sretenido="",this.detalles=[],this.documento=""},guardarRegistro:function(t,e,a,o,i,r,s,n){var c=this,l={Token:this.$store.state.token},u={headers:l},v=this.$store.state.usuario.codigoDistribuidor,m=this.$store.state.usuario._id;d.a.post("retenciones/add",{secuencial:t,ptoEmi:e,totalImpuesto:a,subtotal:o,total:i,impuestos:r,periodoFiscal:s,claveAcceso:n,codigoCompra:c._idCompra,codigoUsuario:m,codigoProveedor:c._idProveedor,codigoDistribuidor:v},u).then((function(t){200==t.status||tt.a.fire("Error",t.data,"error")})).catch((function(t){console.log(t),tt.a.fire("Error",t,"error")}))},validar:function(){return this.valida=0,this.validaMensaje=[],0==this.numComprobante.length&&this.validaMensaje.push("*Debe ingresar el numero de comprobante."),0==this.ptoemision.length&&this.validaMensaje.push("*Debe ingresar el punto de emision."),0==this.claveAccesodig.length&&this.validaMensaje.push("*Debe ingresar la clave de acceso del comprobante a retener."),0==this.fechaEmisionComprobante.length&&this.validaMensaje.push("*Debe ingresar la fecha de emision del comprobante."),0==this.ruc_sretenido.length&&this.validaMensaje.push("*Debe ingresar el ruc del sujeto a retener."),0==this.razonsocial_sretenido.length&&this.validaMensaje.push("*Debe ingresar la razón social del sujeto a retener."),0==this.direccion_sretenido.length&&this.validaMensaje.push("*Debe ingresar la dirección del sujeto a retener."),0==this.email_sretenido.length&&this.validaMensaje.push("*Debe ingresar el email del sujeto a retener."),0==this.telefono_sretenido.length&&this.validaMensaje.push("*Debe ingresar el telefono del sujeto a retener."),this.validaMensaje.length&&(this.valida=1),this.valida},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},crearXML:function(t,e,a,o,i,r,s,n,c,l,u,v,m,p,h,f){var b=this,g=this,x={Token:this.$store.state.token},C={headers:x};d.a.post("http://localhost:10000/api/xml/xml_retencion",{infoTributaria:{razonSocial:t,nombreComercial:e,ruc:a,dirMatriz:s,estab:o,ptoEmi:i,secuencial:r},infoCompRetencion:{dirEstablecimiento:n,tipoIdentificacionSujetoRetenido:c,razonSocialSujetoRetenido:l,identificacionSujetoRetenido:u,periodoFiscal:v},impuestos:{impuesto:m},emailSujetoRetenido:p,dirSujetoRetenido:h,telfSujetoRetenido:f},C).then((function(o){if(200==o.status){tt.a.fire("Notificación","Se generó correctamente la transacción.","success");var c=g.formatearFecha(wt()().format()),d=o.data[0],x=o.data[1];g.crearPDF_SLocal(d,x,c,e,s,n,h,u,l,m,p,f,t,a,v),g.guardarRegistro(r,i,b.totaliva,b.subtotalComprobante,b.totalComprobante,m,v,d),g.actualizarConteo(),g.limpiar()}else tt.a.fire("Error",o.data,"error")})).catch((function(t){console.log(t)}))},guardar:function(){var t=this,e=this.datosDistribuidor(),a="",o="",i=this.pfMes+"/"+this.pfAnio;e.then((function(e){e.establecimientos.forEach((function(t){"MATRIZ"==t.tipoEstablecimiento&&(a=t.direccionEstablecimiento,o=t.numEstablecimiento)})),t.crearXML(e.razonSocial,e.nombreComercial,e.ruc,o,t.ptoemision,t.numComprobante,a,a,t.tipoIdentificacion,t.razonsocial_sretenido,t.ruc_sretenido,i,t.detalles,t.email_sretenido,t.direccion_sretenido,t.telefono_sretenido)})).catch((function(t){console.log(t)}))},datosDistribuidor:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,t.next=6,d.a.get("distribuidor/query?_id="+o,a);case 6:return i=t.sent,t.abrupt("return",i.data);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),obtenerDatos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.get("data/query?codigoUsuario="+i+"&codigoDistribuidor="+o+"&documento=RETENCION",a).then((function(e){t.numComprobante=e.data.secuencial,t.ptoemision=e.data.ptoEmision,t.idDatos=e.data._id})).catch((function(t){console.log(t)}))},AgregarDetalle:function(){if(!this.validar()){var t=this,e="";e=0==this.documento?this.otrotipodoc:this.documento,t.detalles.unshift({codigo:this.impuesto,codigoRetencion:this.codigoRetencion[0],baseImponible:this.subtotalComprobante,porcentajeRetener:this.porcentajeRetencion,valorRetenido:this.valorRetenido,codDocSustento:e,numDocSustento:this.claveAccesodig,fechaEmisionDocSustento:this.fechaEmisionComprobante})}},calcularvaloraretener:function(){this.porcentajeRetencion=this.codigoRetencion[1],2==this.impuesto?0==this.totaliva.length||0==parseFloat(this.totaliva)?tt.a.fire("Error","El valor en total iva no puede ser 0 o vacio.","error"):this.valorRetenido=(parseFloat(this.totaliva)*parseFloat(this.porcentajeRetencion)/100).toFixed(2):0==this.subtotalComprobante.length||0==parseFloat(this.subtotalComprobante)?tt.a.fire("Error","El valor de subtotal de comprobante no puede ser 0 o vacio.","error"):this.valorRetenido=(parseFloat(this.subtotalComprobante)*parseFloat(this.porcentajeRetencion)/100).toFixed(2)},periodoFiscal:function(){this.pfMes=wt()().format("MM"),this.pfAnio=wt()().format("YYYY")},cargarInformacion:function(t){var e=this,a=t.codigoProveedor.ruc.length;this._idCompra=t._id,this._idProveedor=t.codigoProveedor._id,10==a?this.tipoIdentificacion="05":13==a&&(this.tipoIdentificacion="04"),this.totaliva=t.totalImpuesto,this.fechaEmisionComprobante=t.fechaFactura,this.subtotalComprobante=t.subTotal,this.totalComprobante=t.total,this.ruc_sretenido=t.codigoProveedor.ruc,this.razonsocial_sretenido=t.codigoProveedor.razonsocial,this.direccion_sretenido=t.codigoProveedor.direccion;var o=t.claveAcceso;this.claveAccesodig=o.substr(-15),t.codigoProveedor.contacto.forEach((function(t){e.email_sretenido=t.correo,e.telefono_sretenido=t.telefono})),this.cerrarModalcomprobantes()},listarComprobantes:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("compras/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.comprobantes=e.data:console.log(e)})).catch((function(t){console.log(t)}))},cerrarModalcomprobantes:function(){this.modalComprobantes=0},mostrarModalcomprobantes:function(){this.listarComprobantes(),this.modalComprobantes=1},formatearFecha:function(t){if(t)return wt()(String(t)).format("DD/MM/YYYY")},crearPDF_SLocal:function(t,e,a,o,i,r,s,n,c,l,u,v,m,p,h){d.a.post("http://localhost:10000/api/pdf/pdfR",{claveAcceso:t,numComprobante:e,fecha:a,nombreComercial:o,dirMatriz:i,dirSucursal:r,clienteDireccion:s,clienteDocumento:n,clienteNombre:c,detalles:{detalle:l},clienteEmail:u,clienteTelefono:v,razonSocial:m,ruc:p,periodoFiscal:h}).then((function(t){})).catch((function(t){console.log(t)}))},actualizarConteo:function(){var t=this;console.log(t.idDatos),d.a.put("data/actualizarSecuencial",{_id:t.idDatos,documento:"RETENCION"}).then((function(e){200==e.status?(t.obtenerDatos(),t.limpiar(),tt.a.fire("Noticias","Se guardó correctamente.","success")):tt.a.fire("Error","Hubo algun error al momento de guardar la venta.","error")})).catch((function(t){console.log(t)}))}},props:{},watch:{},data:function(){return{_idProveedor:"",_idCompra:"",totaliva:0,fechaEmisionComprobante:"",otrotipodoc:0,porcentajeRetencion:0,valorRetenido:0,codigoRetencion:"",impuestos:[{text:"I.V.A.",value:"2"},{text:"Impuesto a la renta",value:"1"}],irDetalle:[{text:"303 - HONORARIOS PROFESIONALES Y DEMAS PAGOS POR SERVICIOS RELACIONADOS CON EL TITULO PROFESIONAL",value:["303",10]},{text:"304 - SERVICIOS PREDOMINA EL INTELECTO NO RELACIONADOS CON EL TITULO PROFESIONAL",value:["304",8]},{text:"304A - COMISIONES Y DEMAS PAGOS POR SERVICIOS PREDOMINA INTELECTO NO RELACIONADOS CON EL TITULO PROFESIONAL",value:["304A",8]},{text:"304B - PAGOS A NOTARIOS Y REGISTRADORES DE LA PROPIEDAD Y MERCANTIL POR SUS ACTIVIDADES EJERCIDAS COMO TALES",value:["304B",8]},{text:"304C - PAGOS A DEPORTISTAS, ENTRENADORES, ARBITROS, MIEMBROS DEL CUERPO TECNICO POR SUS ACTIVIDADES EJERCIDAD COMO TALES",value:["304C",8]},{text:"304D - PAGOS A ARTISTAS POR SUS ACTIVIDADES EJERCIDAD COMO TALES",value:["304D",8]},{text:"304E - HONORARIOS Y DEMAS PAGOS POR SERVICIOS DE DOCENCIA",value:["304E",8]},{text:"307 - SERVICIOS PREDOMINA LA MANO DE OBRA",value:["307",2]},{text:"308 - UTILIZACION O APROVECHAMIENTO DE LA IMAGEN O RENOMBRE",value:["308",10]},{text:"309 - SERVICIOS PRESTADOS POR MEDIOS DE COMUNICACION Y AGENCIAS DE PUBLICIDAD",value:["309",1]},{text:"310 - SERVICIOS DE TRANSPORTE PRIVADO DE PASAJEROS O TRANSPORTE PUBLICO O PRIVADO DE CARGA",value:["310",1]},{text:"311 - POR PAGOS A TRAVES DE LIQUIDACION DE COMPRA (NIVEL CULTURAL O RUSTICIDAD)",value:["311",2]},{text:"312 - TRANSFERENCIA DE BIENES MUEBLES DE NATURALEZA CORPORAL",value:["312",1]},{text:"312A - COMPRA DE BIENES DE ORIGEN AGRICOLA, AVICOLA, PECUARIO, APICOLA, CUNICULA, BIOACUATICO, Y FORESTAL",value:["312A",1]},{text:"314A - REGALIAS OIR CIBCEOTI DE FRANQUICIAS DE ACUERDO A LA LEY DE PROPIEDAD INTELECTUAL - PAGO A PERSONAS NATURALES",value:["314A",8]},{text:"314B - CANONES, DERECHOS DE AUTOR, MARCAS, PATENTES Y SIMILARES DE ACUERDO A LA LEY DE PROPIEDAD INTELECTUAL PAGO A PERSONAS NATURALES",value:["314B",8]},{text:"314C - REGALIAS POR CONCEPTO DE FRANQUICIAS DE ACUERDO A LEY DE PROPIEDAD INTELECTUAL PAGO A SOCIEDADES",value:["314C",8]},{text:"314D - CANONES, DERECHOS DE AUTOR, MARCAS, PATENTES Y SIMILARES DE ACUERDO A LEY DE PROPIEDAD INTELECTUAL PAGO A SOCIEDADES",value:["314D",8]},{text:"319 - CUOTAS DE ARRENDAMIENTO MERCANTIL, INCLUSIVE LA DE OPCION DE COMPRA",value:["319",1]},{text:"320 - POR ARRENDAMIENTO BIENES INMUEBLES",value:["320",8]},{text:"322 - SEGUROS Y REASEGUROS (PRIMAS Y CESIONES)",value:["322",1]},{text:"323 - POR RENDIMIENTOS FINANCIEROS PAGADOS A NATURALES Y SOCIEDADES (NO A IFIS)",value:["323",2]},{text:"323A - POR RF: DEPOSITOS CTA. CORRIENTE",value:["323A",2]},{text:"323B1 - POR RF: DEPOSITOS CTA. AHORROS SOCIEDADES",value:["323B1",2]},{text:"323E - POR RF: DEPOSITO A PLAZO FIJO GRAVADOS",value:["323E",2]},{text:"323E2 - POR RF: DEPOSITO A PLAZO FIJO EXENTOS",value:["323E2",0]},{text:"323F - POR RENDIMIENTOS FINANCIEROS: OPERACIONES DE REPORTO - REPOS",value:["323F",2]},{text:"323G - POR RF: INVERSIONES (CAPTACIONES) RENDIMIENTOS DISTINTOS DE AQUELLOS PAGADOS A IFIS",value:["323G",2]},{text:"323H - POR RF: OBLIGACIONES",value:["323H",2]},{text:"323I - POR RF: BONOS CONVERTIBLE EN ACCIONES",value:["323I",2]},{text:"323M - POR RF: INVERSIONES EN TITULOS VALORES EN RENTA FIJA GRAVADOS",value:["323M",2]},{text:"323N - POR RF: INVERSIONES EN TITULOS VALORE EN RENTA FIJA EXENTOS",value:["323N",0]},{text:"323O - POR RF: INTERESES PAGADOS A BANCOS Y OTRAS ENTIDADES SOMETIDAS AL CONTROL DE LA SUPERINTENDENCIA DE BANCOS Y DE LA EPS",value:["323O",0]},{text:"323P - POR RF: INTERESES PAGADOS POR ENTIDADES DEL SECTOR PUBLICO A FAVOR DE SUJETOS PASIVOS",value:["323P",2]},{text:"323Q - POR RF: OTROS INTERESES Y RENDIMIENTOS FINANCIEROS GRAVADOS",value:["323Q",2]},{text:"323R - POR RF: OTROS INTERESES Y RENDIMIENTOS FINANCIEROS EXENTOS",value:["323R",0]},{text:"324A - POR RF: INTERESES EN OPERACIONES DE CREDITO ENTRE INSTITUCIONES DEL SISTEMA FINANCIERO Y ENTIDADES ECONOMIA POPULAR Y SOLIDARIA ",value:["324A",1]},{text:"324B - POR RF: POR INVERSIONES ENTRE INSTITUCIONES DEL SISTEMA FINANCIERO Y ENTIDADES ECONOMIA POPULAR Y SOLIDARIA",value:["324B",1]},{text:"325 - ANTICIPO DIVIDENDOS",value:["325",22]},{text:"325A - DIVIDENDOS ANTICIPADOS PRESTAMOS ACCIONISTAS, BENEFICIARIOS O PARTICIPES",value:["325A",22]},{text:"326 - DIVIDENDOS DISTRIBUIDOS QUE CORRESPONDAN AL IMPUESTO A LA RENTA UNICO ESTABLECIDO EN EL ART. 27 DE LA LRTI",value:["326",0]},{text:"327 - DIVIDENDOS DISTRIBUIDOS A PERSONAS NATURALES RESIDENTES",value:["327",0]},{text:"328 - DIVIDENDOS DISTRIBUIDOS A SOCIEDADES RESIDENTES",value:["328",0]},{text:"329 - DIVIDENDOS DISTRIBUIDOS A FIDEICOMISOS RESIDENTES",value:["329",0]},{text:"330 - DIVIDENTOS GRAVADOS DISTRIBUIDOS EN ACCIONES (REINVERSIONES DE UTILIDADES SIN DERECHO A REDUCCION TARIFA IR)",value:["330",0]},{text:"331 - DIVIDENDOS EXENTOS DISTRIBUIDOS EN ACCIONES (REINVERSION DE UTILIDADES CON DERECHO A REDUCCION TARIFA IR)",value:["331",0]},{text:"332 - OTRAS COMPRAS DE BIENES Y SERVICIOS NO SUJETAS A RETENCION",value:["332",0]},{text:"332A - POR LA ENAJENACION OCASIONAL DE ACCIONES O PARTICIPACIONES Y TITULOS VALORES",value:["332A",0]},{text:"332B - COMPRA DE BIENES INMUEBLES",value:["332B",0]},{text:"332C - TRANSPORTE PUBLICO DE PASAJEROS",value:["332C",0]},{text:"332D - PAGOS EN EL PAIS POR TRANS. DE PASAJ O TRANS. INTERN. DE CARGA, A CIAS NACIONALES O EXTRANJERAS DE AVIACION O MARITIMAS",value:["332D",0]},{text:"332E - VALORES ENTREGADOS POR LAS COOPERATIVAS DE TRASNPORTE A SUS SOCIOS",value:["332E",0]},{text:"332F - COMPRAVENTA DE DIVISAS DISTINTAS AL DOLAR DE LOS ESTADOS UNIDOS DE AMERICA",value:["332F",0]},{text:"332G - PAGOS CON TARJETA DE CREDITO",value:["332G",0]},{text:"332H - PAGOS AL EXTERIOR TARJETA DE CREDITO REPORTADA POR LA EMISORA DE TARJETA DE CREDITO, SOLO RECAP",value:["332H",0]},{text:"332I - PAGO A TRAVES DE CONVENIO DE DEBITO (CLIENTES IFIS)",value:["332I",0]},{text:"333 - ENAJENACION DE DERECHOS REPRESENTATIVOS DE CAPITAL Y OTROS DERECHOS COTIZADOS EN BOLSA ECUATORIANA",value:["333",.2]},{text:"334 - ENAJENACION DE DERECHOS REPRESENTATIVOS DE CAPITAL Y OTROS DERECHOS NO COTIZADOS EN BOLSA ECUATORIANA",value:["334",1]},{text:"335 - POR LOTERIAS, RIFAS, APUESTAS Y SIMILARES",value:["335",15]},{text:"336 - POR VENTA DE COMBUSTIBLES A COMERCIALIZADORAS",value:["336",.2]},{text:"337 - POR VENTA DE COMBUSTIBLES A DISTRIBUIDORES",value:["337",.3]},{text:"338 - COMPRA LOCAL DE BANANO A PRODUCTOR",value:["338",0]},{text:"323G - POR RF: INVERSIONES (CAPTACIONES) RENDIMIENTOS DISTINTOS DE AQUELLOS PAGADOS A IFIS",value:["323G",2]},{text:"323H - POR RF: OBLIGACIONES",value:["323H",2]},{text:"323I - POR RF: BONOS CONVERTIBLE EN ACCIONES",value:["323I",2]},{text:"323M - POR RF: INVERSIONES EN TITULOS VALORES EN RENTA FIJA GRAVADOS",value:["323M",2]},{text:"323N - POR RF: INVERSIONES EN TITULOS VALORE EN RENTA FIJA EXENTOS",value:["323N",0]},{text:"323O - POR RF: INTERESES PAGADOS A BANCOS Y OTRAS ENTIDADES SOMETIDAS AL CONTROL DE LA SUPERINTENDENCIA DE BANCOS Y DE LA EPS",value:["323O",0]},{text:"323P - POR RF: INTERESES PAGADOS POR ENTIDADES DEL SECTOR PUBLICO A FAVOR DE SUJETOS PASIVOS",value:["323P",2]},{text:"323N - POR RF: INVERSIONES EN TITULOS VALORE EN RENTA FIJA EXENTOS",value:["323N",0]}],ivaDetalle:[{text:"1 - 30%",value:["1",30]},{text:"2 - 70%",value:["2",70]},{text:"3 - 100%",value:["3",100]},{text:"5 - 100% VALOR RETENIDO DISTRIBUIDOR",value:["5",100]},{text:"6 - 100% VALOR RETENIDO VOCEADORES VARIOS",value:["6",100]},{text:"7 - 0%",value:["7",0]},{text:"8 - 0% NO PROCEDE RETENCION",value:["1",30]},{text:"9 - 10%",value:["9",10]},{text:"10 - 20%",value:["10",20]}],impuesto:"",totalComprobante:0,subtotalComprobante:0,claveAccesodig:"",pfAnio:"",pfMes:"",buscar:"",texto:"",tipoBusqueda:"",comprobantes:[],cabeceraComprobantes:[{text:"Opciones",value:"opciones"},{text:"Num Comprobante",value:"numComprobante"},{text:"Descripcion",value:"descripcion"},{text:"SubTotal",value:"subTotal"},{text:"Total",value:"total"},{text:"Fecha de emision",value:"fechaFactura",sorteable:"true"}],numComprobante:"",ptoemision:"",idDatos:"",tipoIdentificacion:"",direccion_sretenido:"",telefono_sretenido:"",email_sretenido:"",razonsocial_sretenido:"",ruc_sretenido:"",detalles:[],cabeceraDetalles:[{text:"Opciones",value:"opciones"},{text:"Codigo",value:"codigo"},{text:"Codigo retencion",value:"codigoRetener"},{text:"Base imponible",value:"baseImponible"},{text:"Porcentaje a retener",value:"porcentajeReneter"},{text:"Valor retenido",value:"valorRetenido"},{text:"Codigo doc.sust.",value:"codDocSustento"},{text:"Num. doc. sust.",value:"numDocSustento"},{text:"F. emis. doc. sust",value:"fechaEmisionDocSustento"}],modalComprobantes:0,documentos:[{text:"FACTURA",value:"01"},{text:"NOTA DEBITO",value:"05"},{text:"LIQ. COMPRAS",value:"03"},{text:"OTRO",value:0}],documento:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",editedIndex:-1,_id:"",dialog:!1,search:""}}},qe=He,Ye=Object(m["a"])(qe,ze,Ge,!1,null,null,null),Je=Ye.exports;h()(Ye,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VRadio:Bt["a"],VRadioGroup:zt["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var Xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Secuenciales")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"900px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm3:"",md3:""}},[a("v-text-field",{attrs:{label:"Punto de emision"},model:{value:t.ptoEmision,callback:function(e){t.ptoEmision=e},expression:"ptoEmision"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}}),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-autocomplete",{attrs:{items:t.usuarios,label:"Usuario"},model:{value:t.codigoUsuario,callback:function(e){t.codigoUsuario=e},expression:"codigoUsuario"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md5:""}},[a("v-autocomplete",{attrs:{items:t.distribuidores,label:"Distribuidor"},model:{value:t.codigoDistribuidor,callback:function(e){t.codigoDistribuidor=e},expression:"codigoDistribuidor"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n                    Nuevo establecimiento\n                  ")],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[a("v-text-field",{model:{value:e.item.secuencial,callback:function(a){t.$set(e.item,"secuencial",a)},expression:"props.item.secuencial"}})],1),a("td",[a("v-text-field",{model:{value:e.item.documento,callback:function(a){t.$set(e.item,"documento",a)},expression:"props.item.documento"}})],1)]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.data,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminar(e.item)}}},[t._v("delete")])],1),a("td",[t._v(t._s(e.item.codigoUsuario.nombres))]),a("td",[t._v(t._s(e.item.codigoDistribuidor.razonSocial))]),a("td",[t._v("00"+t._s(e.item.ptoEmision))])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("RECARGAR")])]},proxy:!0}])})],1)],1)},Ze=[],Qe={data:function(){return{data:[],ptoEmision:0,codigoDistribuidor:"",codigoUsuario:"",usuarios:[],distribuidores:[],obligadoContabilidad:0,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Secuencial",value:"secuencial",sortable:!1},{text:"Documento",value:"documento",sortable:!1}],detalles:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Usuario",value:"codigoUsuario",sortable:!0},{text:"Distribuidor",value:"codigoDistribuidor",sortable:!0},{text:"Pto. Emision",value:"ptoEmision",sortable:!0}],valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",editedIndex:-1,_id:"",dialog:!1,search:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{},props:{},methods:{obtenerUsuarios:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("usuario/list",o).then((function(a){e=a.data,e.map((function(e){t.usuarios.push({text:e.nombres,value:e._id})}))})).catch((function(t){console.log(t)}))},obtenerDistribuidores:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("distribuidor/list",o).then((function(a){e=a.data,e.map((function(e){t.distribuidores.push({text:e.nombreComercial,value:e._id})}))})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},AgregarDetalle:function(){var t=this;t.detalles.unshift({secuencial:"",documento:""})},eliminar:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.delete("DATA/remove?_id="+t._id,o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))},validar:function(){var t=this;return this.valida=0,this.validaMensaje=[],0==this.ptoEmision.length&&this.validaMensaje.push("*Pto Emision no puede estar vacío."),0==this.codigoDistribuidor.length&&this.validaMensaje.push("*Distribuidor no puede estar vacío."),0==this.codigoUsuario.length&&this.validaMensaje.push("*Usuario no puede estar vacío."),this.detalles.forEach((function(e){0==e.secuencial.length&&t.validaMensaje.push("*Secuencial no puede estar vacío."),0==e.documento.length&&t.validaMensaje.push("*Documento no puede estar vacío.")})),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("data/actualizar",{_id:this._id,ptoEmision:this.ptoEmision,codigoUsuario:this.codigoUsuario,codigoDistribuidor:this.codigoDistribuidor,secuenciales:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("data/add",{ptoEmision:this.ptoEmision,codigoUsuario:this.codigoUsuario,codigoDistribuidor:this.codigoDistribuidor,secuenciales:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.get("data/list",a).then((function(e){t.data=e.data})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.codigoDistribuidor="",this.codigoUsuario="",this.ptoEmision="",this.detalles=[],this.valida=0,this.validaMensaje=[],this.editedIndex=-1},editItem:function(t){this._id=t._id,this.ptoEmision=t.ptoEmision,this.codigoUsuario=t.codigoUsuario._id,this.codigoDistribuidor=t.codigoDistribuidor._id,this.listarDetalle(t._id),this.dialog=!0,this.editedIndex=1},listarDetalle:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("data/queryId?_id="+t,o).then((function(t){e.detalles=t.data.secuenciales})).catch((function(t){console.log(t)}))},formatearFecha:function(t){if(t)return wt()(String(t)).format("MM/DD/YYYY")}},created:function(){this.listar(),this.obtenerDistribuidores(),this.obtenerUsuarios()}},Ke=Qe,We=Object(m["a"])(Ke,Xe,Ze,!1,null,null,null),ta=We.exports;h()(We,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Perchas")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Percha"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.AgregarDetalle()}}},[a("v-icon",[t._v("add")]),t._v("\n                    Nuevo nivel\n                  ")],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),a("td",[a("v-text-field",{model:{value:e.item.nivel,callback:function(a){t.$set(e.item,"nivel",a)},expression:"props.item.nivel"}})],1)]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1),t.verNuevo?t._e():a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabecera,items:t.perchas,"items-per-page":5,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verDetalle(e.item)}}},[t._v("tab")])],1),a("td",{staticClass:"blue--text"},[t._v("\n          "+t._s(e.item.descripcion)+"\n        ")])]}}],null,!1,3812771943)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},aa=[],oa={created:function(){this.listar()},methods:{validar:function(){var t=this;return this.valida=0,this.validaMensaje=[],0==this.descripcion.length&&this.validaMensaje.push("*Descripcion no puede estar vacío."),this.detalles.forEach((function(e){0==e.nivel.length&&t.validaMensaje.push("*Nivel no puede estar vacío.")})),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this;this.validar()||(this.editedIndex>-1?d.a.put("perchas/actualizar",{_id:this._id,descripcion:this.descripcion,niveles:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):d.a.post("perchas/add",{descripcion:this.descripcion,niveles:this.detalles}).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},verDetalle:function(t){var e=this;this.dialog=!0,this.editedIndex=1,this._id=t._id,this.descripcion=t.descripcion;var a={Token:this.$store.state.token},o={headers:a};d.a.get("perchas/query?_id="+t._id,o).then((function(t){e.detalles=t.data.niveles})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},AgregarDetalle:function(){var t=this;t.detalles.push({nivel:""})},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("perchas/list",a).then((function(e){200==e.status?t.perchas=e.data:console.log(e)})).catch((function(t){console.log(t)}))},limpiar:function(){this.descripcion="",this.detalles=[],this.editedIndex=-1},close:function(){this.dialog=!1,this.limpiar()}},props:{},watch:{},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},data:function(){return{descripcion:"",cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Nivel",value:"nivel",sortable:!1}],detalles:[],search:"",cabecera:[{text:"Niveles",value:"niveles",sortable:!1},{text:"Descripcion",value:"descripcion",sortable:!1}],perchas:[],verNuevo:0,editedIndex:-1,dialog:!1,valida:0,validaMensaje:[]}}},ia=oa,ra=Object(m["a"])(ia,ea,aa,!1,null,null,null),sa=ra.exports;h()(ra,{VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Consulta retenciones")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-btn",{staticClass:"info",on:{click:function(e){return t.abrirFiltro()}}},[t._v("FILTRAR")]),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[t.verNuevo?a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:"",disabled:""},on:{click:function(e){t.verNuevo=1}}},[t._v("Nuevo")]):t._e()]],2),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{readonly:"",label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{readonly:"",label:"Punto emisión"},model:{value:t.ptoemision,callback:function(e){t.ptoemision=e},expression:"ptoemision"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Periodo fiscal/Mes",readonly:""},model:{value:t.pfMes,callback:function(e){t.pfMes=e},expression:"pfMes"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Periodo fiscal/Año",readonly:""},model:{value:t.pfAnio,callback:function(e){t.pfAnio=e},expression:"pfAnio"}})],1)],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-autocomplete",{attrs:{readonly:"",items:t.documentos,label:"Tipo de documento"},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}})],1),t.documento?a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"cod. tipo doc.",readonly:""},model:{value:t.documento,callback:function(e){t.documento=e},expression:"documento"}})],1):a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"cod. tipo doc."},model:{value:t.otrotipodoc,callback:function(e){t.otrotipodoc=e},expression:"otrotipodoc"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{readonly:"",label:"Numero de comprobante"},model:{value:t.claveAccesodig,callback:function(e){t.claveAccesodig=e},expression:"claveAccesodig"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{readonly:"",label:"SubTotal comprobante"},model:{value:t.subtotalComprobante,callback:function(e){t.subtotalComprobante=e},expression:"subtotalComprobante"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{readonly:"",label:"Total I.V.A."},model:{value:t.totaliva,callback:function(e){t.totaliva=e},expression:"totaliva"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{label:"Total comprobante",readonly:""},model:{value:t.totalComprobante,callback:function(e){t.totalComprobante=e},expression:"totalComprobante"}})],1),a("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}},[a("v-text-field",{attrs:{readonly:"",label:"Fecha emision"},model:{value:t.fechaEmisionComprobante,callback:function(e){t.fechaEmisionComprobante=e},expression:"fechaEmisionComprobante"}})],1)],1),a("span",[t._v("Datos del sujeto retenido")]),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-radio-group",{attrs:{readonly:"",row:""},model:{value:t.tipoIdentificacion,callback:function(e){t.tipoIdentificacion=e},expression:"tipoIdentificacion"}},[a("v-radio",{attrs:{label:"Cedula",value:"05"}}),a("v-radio",{attrs:{label:"RUC",value:"04"}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{readonly:"",label:"Cédula/RUC",type:"number"},model:{value:t.ruc_sretenido,callback:function(e){t.ruc_sretenido=e},expression:"ruc_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{readonly:"",label:"Razon Social/Apellidos y Nombres"},model:{value:t.razonsocial_sretenido,callback:function(e){t.razonsocial_sretenido=e},expression:"razonsocial_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{readonly:"",label:"Dirección sretenido"},model:{value:t.direccion_sretenido,callback:function(e){t.direccion_sretenido=e},expression:"direccion_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{readonly:"",label:"Email",type:"email"},model:{value:t.email_sretenido,callback:function(e){t.email_sretenido=e},expression:"email_sretenido"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{readonly:"",label:"Telefono"},model:{value:t.telefono_sretenido,callback:function(e){t.telefono_sretenido=e},expression:"telefono_sretenido"}})],1)],1)],1),a("span",[t._v("Detalles del comprobante de retencion")]),a("div",{attrs:{id:"comprador"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.codigo))]),a("td",[t._v(t._s(e.item.codigoRetencion))]),a("td",[t._v(t._s(e.item.baseImponible))]),a("td",[t._v(t._s(e.item.porcentajeRetener))]),a("td",[t._v(t._s(e.item.valorRetenido))]),a("td",[t._v(t._s(e.item.codDocSustento))]),a("td",[t._v(t._s(e.item.numDocSustento))]),a("td",[t._v(t._s(e.item.fechaEmisionDocSustento))])]}}],null,!1,2159434980)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1)],1),a("v-btn",{staticClass:"primary",on:{click:function(e){t.verNuevo=0}}},[t._v("Atras")])],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"700px"},model:{value:t.filtroModal,callback:function(e){t.filtroModal=e},expression:"filtroModal"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Filtre su busqueda ")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-dialog",{ref:"dialog2",attrs:{"return-value":t.finicio,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.finicio=e},"update:return-value":function(e){t.finicio=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Fecha de inicio","prepend-icon":"event",readonly:""},model:{value:t.finicio,callback:function(e){t.finicio=e},expression:"finicio"}},"v-text-field",i,!1),o))]}}]),model:{value:t.modal5,callback:function(e){t.modal5=e},expression:"modal5"}},[a("v-date-picker",{attrs:{scrollable:""},model:{value:t.finicio,callback:function(e){t.finicio=e},expression:"finicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.modal5=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"success"},on:{click:function(e){return t.$refs.dialog2.save(t.finicio)}}},[t._v("Aceptar")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-dialog",{ref:"dialog3",attrs:{"return-value":t.ffin,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.ffin=e},"update:return-value":function(e){t.ffin=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Fecha de fin","prepend-icon":"event",readonly:""},model:{value:t.ffin,callback:function(e){t.ffin=e},expression:"ffin"}},"v-text-field",i,!1),o))]}}]),model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[a("v-date-picker",{attrs:{scrollable:""},model:{value:t.ffin,callback:function(e){t.ffin=e},expression:"ffin"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.modal2=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"success"},on:{click:function(e){return t.$refs.dialog3.save(t.ffin)}}},[t._v("Aceptar")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:"",l12:""}},[0==t.proveedor.length?a("div",[a("v-text-field",{attrs:{label:"# comprobante"},model:{value:t.comprobanteBusqueda,callback:function(e){t.comprobanteBusqueda=e},expression:"comprobanteBusqueda"}})],1):a("div",[a("v-text-field",{attrs:{disabled:"",label:"# comprobante"},model:{value:t.comprobanteBusqueda,callback:function(e){t.comprobanteBusqueda=e},expression:"comprobanteBusqueda"}})],1)]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:"",l12:""}},[0==t.comprobanteBusqueda.length?a("div",[a("v-autocomplete",{attrs:{items:t.proveedores,label:"Proveedores"},model:{value:t.proveedor,callback:function(e){t.proveedor=e},expression:"proveedor"}})],1):a("div",[a("v-autocomplete",{attrs:{items:t.proveedores,disabled:"",label:"Proveedores"},model:{value:t.proveedor,callback:function(e){t.proveedor=e},expression:"proveedor"}})],1)])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"primary",on:{click:function(e){return t.buscarF(t.proveedor,t.comprobanteBusqueda,t.finicio,t.ffin)}}},[t._v("Buscar")]),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.cerrarFiltro()}}},[t._v("Cancelar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Activar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Item")]):t._e(),a("v-card-text",[t._v("\n          Estás a punto de\n          "),1==t.adAccion?a("span",[t._v("activar")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar")]):t._e(),t._v("\n          el item "+t._s(t.adNombre)+"\n        ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("Cancelar")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("Activar")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("Desactivar")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulosnombres(t.texto)}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.agregarDetalle(e.item)}}},[t._v("add")])],1),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoBarra))]),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoLote))]),a("td",{},[t._v(t._s(e.item.nombreComercial))])]}}])})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),t.verNuevo?t._e():a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraCompras,items:t.compras,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verDetalleC(e.item)}}},[t._v("tab")]),e.item.estado?[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(2,e.item)}}},[t._v("block")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(1,e.item)}}},[t._v("check")])]],2),a("td",{staticClass:"blue--text"},[e.item.codigoCompra?a("div",[t._v(t._s(e.item.codigoCompra.descripcion))]):a("div",{staticClass:"red--text"},[t._v("NO DEFINIDO")])]),a("td",[e.item.codigoCompra?a("div",[t._v(t._s(e.item.codigoCompra.numComprobante))]):a("div",{staticClass:"red--text"},[t._v("NO DEFINIDO")])]),a("td",[t._v("\n          "+t._s(e.item.secuencial)+"\n        ")]),e.item.claveAcceso?a("td",[t._v("\n          "+t._s(e.item.claveAcceso)+"\n        ")]):a("td"),a("td",[t._v("$"+t._s(e.item.total))]),a("td",[t._v("\n          "+t._s(t.formatearFecha(e.item.createdAt))+"\n        ")]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"green--text"},[t._v("Aceptado")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Anulado")])])])]}}],null,!1,3897355321)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},ca=[],la={computed:{calcularTotal:function(){var t=parseFloat(this.calcularSubtotal)+parseFloat(this.calcularIva)-parseFloat(this.calcularDescuento);return t.toFixed(2)},calcularDescuento:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=0,s=this.detalles[e];a=parseInt(s.fraccionesTotales),o=parseFloat(s.punit),i=parseFloat(s.descuento),r=a*o*i/100,t+=r}return t.toFixed(2)},calcularIva:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=this.detalles[e];a=parseInt(r.fraccionesTotales),o=parseFloat(r.punit),i=a*o,0!=r.iva&&(t+=.12*i)}return t.toFixed(2)},calcularSubtotal:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=this.detalles[e];a=parseInt(r.fraccionesTotales),o=parseFloat(r.punit),i=a*o,t+=i}return t.toFixed(2)}},watch:{},data:function(){var t;return t={comprobanteBusqueda:"",proveedores:[],proveedor:"",finicio:"",ffin:"",modal5:!1,modal2:!1,cabeceraFormapago:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Forma de pago",value:"formapago",sortable:!1},{text:"Total a pagar",value:"total",sortable:!1},{text:"Plazo en:",value:"plazo",sortable:!1},{text:"Tiempo en:",value:"unidadTiempo",sortable:!1}],detallesFP:[],formaspagos:[{text:"SIN UTILIZACION DEL SISTEMA FINANCIERO",value:"01"},{text:"COMPENSACIÓN DE DEUDAS",value:"15"},{text:"TARJETA DE DÉBITO",value:"16"},{text:"DINERO ELECTRÓNICO",value:"17"},{text:"TARJETA PREPAGO",value:"18"},{text:"TARJETA DE CRÉDITO",value:"19"},{text:"OTROS CON UTILIZACION DEL SISTEMA FINANCIERO",value:"20"},{text:"ENDOSO DE TÍTULOS",value:"21"}],tiempos:["NINGUNO","dias","meses","años"],totalRet:0,cabeceraCompras:[{text:"Opciones",value:"borrar",sortable:!1},{text:"DESCRIPCION",value:"descripcion",sortable:!1},{text:"# COMPROBANTE",value:"codigoCompra.numComprobante",sortable:!1},{text:"# RETENCION",value:"secuencial",sortable:!1},{text:"Clave de acceso",value:"claveAcceso",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Fecha de emision",value:"fechaFactura",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],compras:[],claveAcceso:"",_idProveedor:"",texto:"",articulos:[],cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Codigo Barras",value:"codigoBarras",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1}],dialog:0,total:0,totalimpuesto:0,totaldescuento:0,subtotal:0,search:"",verDetalle:0,verNuevo:0,validaMensaje:[],valida:!1,codigo:"",errorArticulo:"",numComprobante:"",fechaFactura:"",descripcion:"",direccion_Proveedor:"",razonSocial_Proveedor:"",ruc_proveedor:"",codigoBodega:""},Object(Ct["a"])(t,"_idProveedor",""),Object(Ct["a"])(t,"_idCompra",""),Object(Ct["a"])(t,"totaliva",0),Object(Ct["a"])(t,"fechaEmisionComprobante",""),Object(Ct["a"])(t,"otrotipodoc",0),Object(Ct["a"])(t,"porcentajeRetencion",0),Object(Ct["a"])(t,"valorRetenido",0),Object(Ct["a"])(t,"codigoRetencion",""),Object(Ct["a"])(t,"impuestos",[{text:"I.V.A.",value:"2"},{text:"Impuesto a la renta",value:"1"}]),Object(Ct["a"])(t,"irDetalle",[{text:"303 - HONORARIOS PROFESIONALES Y DEMAS PAGOS POR SERVICIOS RELACIONADOS CON EL TITULO PROFESIONAL",value:["303",10]},{text:"304 - SERVICIOS PREDOMINA EL INTELECTO NO RELACIONADOS CON EL TITULO PROFESIONAL",value:["304",8]},{text:"304A - COMISIONES Y DEMAS PAGOS POR SERVICIOS PREDOMINA INTELECTO NO RELACIONADOS CON EL TITULO PROFESIONAL",value:["304A",8]},{text:"304B - PAGOS A NOTARIOS Y REGISTRADORES DE LA PROPIEDAD Y MERCANTIL POR SUS ACTIVIDADES EJERCIDAS COMO TALES",value:["304B",8]},{text:"304C - PAGOS A DEPORTISTAS, ENTRENADORES, ARBITROS, MIEMBROS DEL CUERPO TECNICO POR SUS ACTIVIDADES EJERCIDAD COMO TALES",value:["304C",8]},{text:"304D - PAGOS A ARTISTAS POR SUS ACTIVIDADES EJERCIDAD COMO TALES",value:["304D",8]},{text:"304E - HONORARIOS Y DEMAS PAGOS POR SERVICIOS DE DOCENCIA",value:["304E",8]},{text:"307 - SERVICIOS PREDOMINA LA MANO DE OBRA",value:["307",2]},{text:"308 - UTILIZACION O APROVECHAMIENTO DE LA IMAGEN O RENOMBRE",value:["308",10]},{text:"309 - SERVICIOS PRESTADOS POR MEDIOS DE COMUNICACION Y AGENCIAS DE PUBLICIDAD",value:["309",1]},{text:"310 - SERVICIOS DE TRANSPORTE PRIVADO DE PASAJEROS O TRANSPORTE PUBLICO O PRIVADO DE CARGA",value:["310",1]},{text:"311 - POR PAGOS A TRAVES DE LIQUIDACION DE COMPRA (NIVEL CULTURAL O RUSTICIDAD)",value:["311",2]},{text:"312 - TRANSFERENCIA DE BIENES MUEBLES DE NATURALEZA CORPORAL",value:["312",1]},{text:"312A - COMPRA DE BIENES DE ORIGEN AGRICOLA, AVICOLA, PECUARIO, APICOLA, CUNICULA, BIOACUATICO, Y FORESTAL",value:["312A",1]},{text:"314A - REGALIAS OIR CIBCEOTI DE FRANQUICIAS DE ACUERDO A LA LEY DE PROPIEDAD INTELECTUAL - PAGO A PERSONAS NATURALES",value:["314A",8]},{text:"314B - CANONES, DERECHOS DE AUTOR, MARCAS, PATENTES Y SIMILARES DE ACUERDO A LA LEY DE PROPIEDAD INTELECTUAL PAGO A PERSONAS NATURALES",value:["314B",8]},{text:"314C - REGALIAS POR CONCEPTO DE FRANQUICIAS DE ACUERDO A LEY DE PROPIEDAD INTELECTUAL PAGO A SOCIEDADES",value:["314C",8]},{text:"314D - CANONES, DERECHOS DE AUTOR, MARCAS, PATENTES Y SIMILARES DE ACUERDO A LEY DE PROPIEDAD INTELECTUAL PAGO A SOCIEDADES",value:["314D",8]},{text:"319 - CUOTAS DE ARRENDAMIENTO MERCANTIL, INCLUSIVE LA DE OPCION DE COMPRA",value:["319",1]},{text:"320 - POR ARRENDAMIENTO BIENES INMUEBLES",value:["320",8]},{text:"322 - SEGUROS Y REASEGUROS (PRIMAS Y CESIONES)",value:["322",1]},{text:"323 - POR RENDIMIENTOS FINANCIEROS PAGADOS A NATURALES Y SOCIEDADES (NO A IFIS)",value:["323",2]},{text:"323A - POR RF: DEPOSITOS CTA. CORRIENTE",value:["323A",2]},{text:"323B1 - POR RF: DEPOSITOS CTA. AHORROS SOCIEDADES",value:["323B1",2]},{text:"323E - POR RF: DEPOSITO A PLAZO FIJO GRAVADOS",value:["323E",2]},{text:"323E2 - POR RF: DEPOSITO A PLAZO FIJO EXENTOS",value:["323E2",0]},{text:"323F - POR RENDIMIENTOS FINANCIEROS: OPERACIONES DE REPORTO - REPOS",value:["323F",2]},{text:"323G - POR RF: INVERSIONES (CAPTACIONES) RENDIMIENTOS DISTINTOS DE AQUELLOS PAGADOS A IFIS",value:["323G",2]},{text:"323H - POR RF: OBLIGACIONES",value:["323H",2]},{text:"323I - POR RF: BONOS CONVERTIBLE EN ACCIONES",value:["323I",2]},{text:"323M - POR RF: INVERSIONES EN TITULOS VALORES EN RENTA FIJA GRAVADOS",value:["323M",2]},{text:"323N - POR RF: INVERSIONES EN TITULOS VALORE EN RENTA FIJA EXENTOS",value:["323N",0]},{text:"323O - POR RF: INTERESES PAGADOS A BANCOS Y OTRAS ENTIDADES SOMETIDAS AL CONTROL DE LA SUPERINTENDENCIA DE BANCOS Y DE LA EPS",value:["323O",0]},{text:"323P - POR RF: INTERESES PAGADOS POR ENTIDADES DEL SECTOR PUBLICO A FAVOR DE SUJETOS PASIVOS",value:["323P",2]},{text:"323Q - POR RF: OTROS INTERESES Y RENDIMIENTOS FINANCIEROS GRAVADOS",value:["323Q",2]},{text:"323R - POR RF: OTROS INTERESES Y RENDIMIENTOS FINANCIEROS EXENTOS",value:["323R",0]},{text:"324A - POR RF: INTERESES EN OPERACIONES DE CREDITO ENTRE INSTITUCIONES DEL SISTEMA FINANCIERO Y ENTIDADES ECONOMIA POPULAR Y SOLIDARIA ",value:["324A",1]},{text:"324B - POR RF: POR INVERSIONES ENTRE INSTITUCIONES DEL SISTEMA FINANCIERO Y ENTIDADES ECONOMIA POPULAR Y SOLIDARIA",value:["324B",1]},{text:"325 - ANTICIPO DIVIDENDOS",value:["325",22]},{text:"325A - DIVIDENDOS ANTICIPADOS PRESTAMOS ACCIONISTAS, BENEFICIARIOS O PARTICIPES",value:["325A",22]},{text:"326 - DIVIDENDOS DISTRIBUIDOS QUE CORRESPONDAN AL IMPUESTO A LA RENTA UNICO ESTABLECIDO EN EL ART. 27 DE LA LRTI",value:["326",0]},{text:"327 - DIVIDENDOS DISTRIBUIDOS A PERSONAS NATURALES RESIDENTES",value:["327",0]},{text:"328 - DIVIDENDOS DISTRIBUIDOS A SOCIEDADES RESIDENTES",value:["328",0]},{text:"329 - DIVIDENDOS DISTRIBUIDOS A FIDEICOMISOS RESIDENTES",value:["329",0]},{text:"330 - DIVIDENTOS GRAVADOS DISTRIBUIDOS EN ACCIONES (REINVERSIONES DE UTILIDADES SIN DERECHO A REDUCCION TARIFA IR)",value:["330",0]},{text:"331 - DIVIDENDOS EXENTOS DISTRIBUIDOS EN ACCIONES (REINVERSION DE UTILIDADES CON DERECHO A REDUCCION TARIFA IR)",value:["331",0]},{text:"332 - OTRAS COMPRAS DE BIENES Y SERVICIOS NO SUJETAS A RETENCION",value:["332",0]},{text:"332A - POR LA ENAJENACION OCASIONAL DE ACCIONES O PARTICIPACIONES Y TITULOS VALORES",value:["332A",0]},{text:"332B - COMPRA DE BIENES INMUEBLES",value:["332B",0]},{text:"332C - TRANSPORTE PUBLICO DE PASAJEROS",value:["332C",0]},{text:"332D - PAGOS EN EL PAIS POR TRANS. DE PASAJ O TRANS. INTERN. DE CARGA, A CIAS NACIONALES O EXTRANJERAS DE AVIACION O MARITIMAS",value:["332D",0]},{text:"332E - VALORES ENTREGADOS POR LAS COOPERATIVAS DE TRASNPORTE A SUS SOCIOS",value:["332E",0]},{text:"332F - COMPRAVENTA DE DIVISAS DISTINTAS AL DOLAR DE LOS ESTADOS UNIDOS DE AMERICA",value:["332F",0]},{text:"332G - PAGOS CON TARJETA DE CREDITO",value:["332G",0]},{text:"332H - PAGOS AL EXTERIOR TARJETA DE CREDITO REPORTADA POR LA EMISORA DE TARJETA DE CREDITO, SOLO RECAP",value:["332H",0]},{text:"332I - PAGO A TRAVES DE CONVENIO DE DEBITO (CLIENTES IFIS)",value:["332I",0]},{text:"333 - ENAJENACION DE DERECHOS REPRESENTATIVOS DE CAPITAL Y OTROS DERECHOS COTIZADOS EN BOLSA ECUATORIANA",value:["333",.2]},{text:"334 - ENAJENACION DE DERECHOS REPRESENTATIVOS DE CAPITAL Y OTROS DERECHOS NO COTIZADOS EN BOLSA ECUATORIANA",value:["334",1]},{text:"335 - POR LOTERIAS, RIFAS, APUESTAS Y SIMILARES",value:["335",15]},{text:"336 - POR VENTA DE COMBUSTIBLES A COMERCIALIZADORAS",value:["336",.2]},{text:"337 - POR VENTA DE COMBUSTIBLES A DISTRIBUIDORES",value:["337",.3]},{text:"338 - COMPRA LOCAL DE BANANO A PRODUCTOR",value:["338",0]},{text:"323G - POR RF: INVERSIONES (CAPTACIONES) RENDIMIENTOS DISTINTOS DE AQUELLOS PAGADOS A IFIS",value:["323G",2]},{text:"323H - POR RF: OBLIGACIONES",value:["323H",2]},{text:"323I - POR RF: BONOS CONVERTIBLE EN ACCIONES",value:["323I",2]},{text:"323M - POR RF: INVERSIONES EN TITULOS VALORES EN RENTA FIJA GRAVADOS",value:["323M",2]},{text:"323N - POR RF: INVERSIONES EN TITULOS VALORE EN RENTA FIJA EXENTOS",value:["323N",0]},{text:"323O - POR RF: INTERESES PAGADOS A BANCOS Y OTRAS ENTIDADES SOMETIDAS AL CONTROL DE LA SUPERINTENDENCIA DE BANCOS Y DE LA EPS",value:["323O",0]},{text:"323P - POR RF: INTERESES PAGADOS POR ENTIDADES DEL SECTOR PUBLICO A FAVOR DE SUJETOS PASIVOS",value:["323P",2]},{text:"323N - POR RF: INVERSIONES EN TITULOS VALORE EN RENTA FIJA EXENTOS",value:["323N",0]}]),Object(Ct["a"])(t,"ivaDetalle",[{text:"1 - 30%",value:["1",30]},{text:"2 - 70%",value:["2",70]},{text:"3 - 100%",value:["3",100]},{text:"5 - 100% VALOR RETENIDO DISTRIBUIDOR",value:["5",100]},{text:"6 - 100% VALOR RETENIDO VOCEADORES VARIOS",value:["6",100]},{text:"7 - 0%",value:["7",0]},{text:"8 - 0% NO PROCEDE RETENCION",value:["1",30]},{text:"9 - 10%",value:["9",10]},{text:"10 - 20%",value:["10",20]}]),Object(Ct["a"])(t,"impuesto",""),Object(Ct["a"])(t,"totalComprobante",0),Object(Ct["a"])(t,"subtotalComprobante",0),Object(Ct["a"])(t,"claveAccesodig",""),Object(Ct["a"])(t,"pfAnio",""),Object(Ct["a"])(t,"pfMes",""),Object(Ct["a"])(t,"buscar",""),Object(Ct["a"])(t,"texto",""),Object(Ct["a"])(t,"tipoBusqueda",""),Object(Ct["a"])(t,"comprobantes",[]),Object(Ct["a"])(t,"cabeceraComprobantes",[{text:"Opciones",value:"opciones"},{text:"Num Comprobante",value:"numComprobante"},{text:"Descripcion",value:"descripcion"},{text:"SubTotal",value:"subTotal"},{text:"Total",value:"total"},{text:"Fecha de emision",value:"fechaFactura",sorteable:"true"}]),Object(Ct["a"])(t,"numComprobante",""),Object(Ct["a"])(t,"ptoemision",""),Object(Ct["a"])(t,"idDatos",""),Object(Ct["a"])(t,"tipoIdentificacion",""),Object(Ct["a"])(t,"direccion_sretenido",""),Object(Ct["a"])(t,"telefono_sretenido",""),Object(Ct["a"])(t,"email_sretenido",""),Object(Ct["a"])(t,"razonsocial_sretenido",""),Object(Ct["a"])(t,"ruc_sretenido",""),Object(Ct["a"])(t,"detalles",[]),Object(Ct["a"])(t,"cabeceraDetalles",[{text:"Codigo",value:"codigo"},{text:"Codigo retencion",value:"codigoRetener"},{text:"Base imponible",value:"baseImponible"},{text:"Porcentaje a retener",value:"porcentajeReneter"},{text:"Valor retenido",value:"valorRetenido"},{text:"Codigo doc.sust.",value:"codDocSustento"},{text:"Num. doc. sust.",value:"numDocSustento"},{text:"F. emis. doc. sust",value:"fechaEmisionDocSustento"}]),Object(Ct["a"])(t,"modalComprobantes",0),Object(Ct["a"])(t,"documentos",[{text:"FACTURA",value:"01"},{text:"NOTA DEBITO",value:"05"},{text:"LIQ. COMPRAS",value:"03"},{text:"OTRO",value:0}]),Object(Ct["a"])(t,"documento",""),Object(Ct["a"])(t,"valida",0),Object(Ct["a"])(t,"validaMensaje",[]),Object(Ct["a"])(t,"adModal",0),Object(Ct["a"])(t,"adAccion",0),Object(Ct["a"])(t,"adNombre",""),Object(Ct["a"])(t,"adId",""),Object(Ct["a"])(t,"editedIndex",-1),Object(Ct["a"])(t,"_id",""),Object(Ct["a"])(t,"dialog",!1),Object(Ct["a"])(t,"search",""),Object(Ct["a"])(t,"filtroModal",0),t},props:{},methods:{buscarF:function(t,e,a,o){var i=this;i.compras=[];var r={Token:this.$store.state.token},s={headers:r},n=a,c=new Date(n+" 00:00:01"),l=o,u=new Date(l+" 23:59:59");d.a.get("retenciones/buscar?finicio="+c.toISOString()+"&ffin="+u.toISOString()+"&numComprobante="+e+"&codigoProveedor="+t,s).then((function(t){209==t.status?tt.a.fire("Aviso",t.data.message,"error"):(i.compras=t.data,i.cerrarFiltro())})).catch((function(t){console.log(t)}))},obetenerProveedores:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("proveedor/list",o).then((function(a){e=a.data,e.map((function(e){t.proveedores.push({text:e.razonsocial,value:e._id})}))})).catch((function(t){console.log(t)}))},abrirFiltro:function(){this.filtroModal=1},cerrarFiltro:function(){this.filtroModal=0,this.limpiarFiltro()},limpiarFiltro:function(){this.proveedor="",this.comprobanteBusqueda=""},Agregarformapago:function(){var t=this;t.detallesFP.unshift({formaPago:"01",total:this.total,plazo:0,unidadTiempo:"NINGUNO"})},listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("retenciones/query?_id="+t,o).then((function(t){e.detalles=t.data.impuestos,e.detalles.forEach((function(t,a){e.documento=t.codDocSustento,e.claveAccesodig=t.numDocSustento,e.fechaEmisionComprobante=t.fechaEmisionDocSustento}))})).catch((function(t){console.log(t)}))},verDetalleC:function(t){var e=this;this.verNuevo=1,this.numComprobante=t.secuencial,this.ptoemision=t.ptoEmi,this.pfMes=wt()().format("MM"),this.pfAnio=wt()().format("YYYY"),this.subtotalComprobante=t.subtotal,this.totaliva=t.totalImpuesto,this.totalComprobante=t.total;var a=t.codigoProveedor.ruc.length;10==a?this.tipoIdentificacion="05":13==a&&(this.tipoIdentificacion="04"),this.ruc_sretenido=t.codigoProveedor.ruc,this.razonsocial_sretenido=t.codigoProveedor.razonsocial,this.direccion_sretenido=t.codigoProveedor.direccion,t.codigoProveedor.contacto.forEach((function(t){e.email_sretenido=t.correo,e.telefono_sretenido=t.telefono})),this.listarDetalles(t._id)},formatearFecha:function(t){if(t)return wt()(String(t)).format("MM/DD/YYYY")},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("retenciones/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.compras=e.data:console.log(e)})).catch((function(t){console.log(t)}))},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},limpiar:function(){this.detallesFP=[],this.claveAcceso="",this.direccion_Proveedor="",this.razonSocial_Proveedor="",this.ruc_proveedor="",this.numComprobante="",this.fechaFactura="",this.descripcion="",this.errorArticulo="",this.total=0,this.totalimpuesto=0,this.totaldescuento=0,this.subtotal=0,this._idProveedor="",this.detalles=[],this.valida=0,this.validaMensaje=[]},limpiarbusqueda:function(){this.texto="",this.articulos=[]},close:function(){this.dialog=0,this.limpiarbusqueda()},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;void 0==o||d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},listarArticulosnombres:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/busca?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):e.articulos=t.data})).catch((function(t){console.log(t)}))},validar_guardar:function(){this.valida=0,this.validaMensaje=[],0==this.numComprobante.length&&this.validaMensaje.push("Debe ingresar el numero de comprobante."),0==this.fechaFactura.length&&this.validaMensaje.push("Debe ingresar la fecha de emision de la factura."),0==this.descripcion.length&&this.validaMensaje.push("Debe ingresar la descripcion de la compra"),0==this.ruc_proveedor.length&&this.validaMensaje.push("Debe ingresar el numero de RUC del proveedor."),0==this.razonSocial_Proveedor.length&&this.validaMensaje.push("Falta razon social del proveedor."),0==this.direccion_Proveedor.length&&this.validaMensaje.push("Falta direccion de proveedor."),0==this.detalles.length&&this.validaMensaje.push("Debe ingresar al menos un detalle a la factura de compra.");for(var t=0;t<this.detalles.length;t++){var e=this.detalles[t];0==e.cantidad.length&&this.validaMensaje.push("CANTIDAD no puede ser un valor vacio."),parseInt(e.cantidad)<0&&this.validaMensaje.push("CANTIDAD no puede ser un valor negativo."),0==e.fracciones.length&&this.validaMensaje.push("FRACCIONES no puede ser un valor vacio."),parseInt(e.fracciones)<0&&this.validaMensaje.push("FRACCIONES no puede ser un valor negativo."),0==e.bonificacion.length&&this.validaMensaje.push("BONIFICACION no puede ser un valor vacio."),parseInt(e.bonificacion)<0&&this.validaMensaje.push("BONIFICACION no puede ser un valor negativo."),0!=e.pvm&&0!=e.pvm.length||this.validaMensaje.push("PVM no puede ser un valor vacio."),0!=e.pvp&&0!=e.pvp.length||this.validaMensaje.push("PVP no puede ser un valor vacio."),0!=e.punit&&0!=e.punit.length||this.validaMensaje.push("P. UNIT no puede ser un valor vacio."),0==e.descuento.length&&this.validaMensaje.push("DESCUENTO no puede ser un valor vacio."),e.pvm<0&&this.validaMensaje.push("PVM no puede ser negativo."),e.pvp<0&&this.validaMensaje.push("PVP no puede ser negativo."),e.punit<0&&this.validaMensaje.push("P. UNIT no puede ser negativo."),e.descuento<0&&this.validaMensaje.push("DESCUENTO no puede ser negativo.")}return this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){if(!this.validar_guardar()){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id;d.a.post("compras/add",{claveAcceso:this.claveAcceso,numComprobante:this.numComprobante,fechaFactura:this.fechaFactura,subTotal:this.subtotal,total:this.total,totalImpuesto:this.totalimpuesto,totalDescuento:this.totaldescuento,detalles:this.detalles,formaPago:this.detallesFP,descripcion:this.descripcion,codigoProveedor:this._idProveedor,codigoBodega:this.codigoBodega,codigoDistribuidor:o,codigoUsuario:i},a).then((function(e){200==e.status?(t.detallesFP.forEach((function(e){0!=e.plazo&&t.generarCuentaPorPagar(e.total,e.unidadTiempo,e.plazo,t._idProveedor,o,i,t.total,t.numComprobante,t.fechaFactura,t.descripcion)})),tt.a.fire("Noticias!","Se guardo correctamente la compra.","success")):tt.a.fire("Ops!","Hubo problemas al intentar guardar la compra","err"),t.limpiar(),t.ocultarNuevo(),t.listar()})).catch((function(t){console.log(t)}))}},obtenerConteoCTaPC:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,e={Token:this.$store.state.token},a={headers:e},this.$store.state.usuario.codigoDistribuidor,t.next=6,d.a.get("cuentasporpagar/contar",a);case 6:return o=t.sent,t.abrupt("return",o.data);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),generarCuentaPorPagar:function(t,e,a,o,i,r,s,n,c,l){var u={Token:this.$store.state.token},v={headers:u},m=this.obtenerConteoCTaPC(),p="";m.then((function(u){p=u,d.a.post("cuentasporpagar/add",{numComprobante:p,plazo:a,totalFormaPago:t,unidadTiempo:e,codigoProveedor:o,codigoDistribuidor:i,codigoUsuario:r,totalFactura:s,numComprobanteFactura:n,fechaFactura:c,descripcion:l},v).then((function(t){})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!=a&&t.splice(a,1)},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},agregarDetalle:function(t){this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(this.detalles.unshift({_id:t._id,producto:t.nombreComercial,cantidad:0,fracciones:0,bonificacion:0,fxcaja:t.codigoProducto.fraccionCaja,fraccionesTotales:t.fraccionesTotales,costoNeto:0,pvp:t.pvp,pvm:t.pvm,punit:t.punit,descuento:t.descuento,iva:t.iva}),this.codigo="")},buscarCodigo:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/buscaCodigo?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):t.data.length>1?tt.a.fire("Aviso","Se estan mostrando mas de un resultado \n deberia buscar en pantalla.","error"):e.agregarDetalle(t.data)})).catch((function(t){console.log(t)}))},buscarProveedor:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("proveedor/consulta?data="+t,o).then((function(t){206==t.status?tt.a.fire("Error",t.data.message,"error"):(e.direccion_Proveedor=t.data.direccion,e.razonSocial_Proveedor=t.data.razonsocial,e._idProveedor=t.data._id)})).catch((function(t){console.log(t)}))},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.numComprobante,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("retenciones/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("retenciones/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))}},created:function(){this.listar(),this.obtenerBodega(),this.obetenerProveedores()}},da=la,ua=Object(m["a"])(da,na,ca,!1,null,null,null),va=ua.exports;h()(ua,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDatePicker:Nt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VRadio:Bt["a"],VRadioGroup:zt["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var ma=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Consulta cuentas por pagar")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),[a("v-btn",{staticClass:"mb-2",attrs:{color:"success",dark:""},on:{click:function(e){return t.abrirFiltroModal()}}},[t._v("Filtro")])],a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer")],2),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDatos,items:t.datos,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verDetalle(e.item)}}},[t._v("tab")]),e.item.estado?[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(2,e.item)}}},[t._v("block")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(1,e.item)}}},[t._v("check")])]],2),a("td",[t._v(t._s(e.item.numComprobante))]),a("td",[t._v(t._s(e.item.numComprobanteFactura))]),a("td",[t._v(t._s(e.item.codigoProveedor.razonsocial))]),a("td",[t._v(t._s(e.item.descripcion))]),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.plazo+e.item.unidadTiempo))]),a("td",[t._v("$"+t._s(e.item.totalFactura))]),a("td",[t._v("$"+t._s(e.item.totalFormaPago))]),a("td",[t._v("$"+t._s(e.item.totalPagado))]),a("td",[t._v(t._s(e.item.fechaFactura))]),a("td",{staticClass:"blue--text"},[t._v(t._s(t.agregarDias(e.item.unidadTiempo,e.item.plazo,e.item.fechaFactura)))]),a("td",{staticClass:"red--text"},[t._v(t._s(t.diasVencidos(e.item.unidadTiempo,e.item.plazo,e.item.fechaFactura)))]),a("td",[e.item.estado?a("div",{staticClass:"green--text"},[t._v("PAGADO")]):a("div",{staticClass:"red--text"},[t._v("POR PAGAR")])])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.detalleModal,callback:function(e){t.detalleModal=e},expression:"detalleModal"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Detalle de la cuenta por pagar #"+t._s(t.numComprobante))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("TABLE",{attrs:{cellspacing:"25",align:"center"}},[a("tr",[a("td",{staticClass:"headline green--text",attrs:{colspan:"3"}},[t._v("\n                        Información de proveedor\n                      ")])]),a("TR",[a("TD",[a("span",{staticClass:"blue--text headline"},[t._v("Proveedor:")]),a("h2",[t._v(t._s(t.proveedor.razonsocial))])]),a("TD",[a("span",{staticClass:"blue--text headline"},[t._v("RUC:")]),a("h2",[t._v(t._s(t.proveedor.ruc))])]),a("TD",[a("span",{staticClass:"blue--text headline"},[t._v("Direccion:")]),a("h2",[t._v(t._s(t.proveedor.direccion))])])],1),a("tr",[a("td",{staticClass:"headline green--text",attrs:{colspan:"3"}},[t._v("\n                        Información de la factura\n                      ")])]),a("TR",[a("TD",[a("span",{staticClass:"blue--text headline"},[t._v("# C. Fct.:")]),a("h2",[t._v(t._s(t.numComprobanteFactura))])]),a("TD",[a("span",{staticClass:"blue--text headline"},[t._v("Total factura:")]),a("span",{staticClass:"headline"},[t._v("$"+t._s(t.totalFactura))])]),a("TD",[a("span",{staticClass:"blue--text headline"},[t._v("Total retenido:")]),a("span",{staticClass:"headline"},[t._v("$"+t._s(t.totalRetenido))])]),a("TD",[a("span",{staticClass:"blue--text headline"},[t._v("Fecha factura:")]),a("span",{staticClass:"headline"},[t._v(t._s(t.fechaFactura))])])],1),a("tr",[a("td",{staticClass:"headline green--text",attrs:{colspan:"3"}},[t._v("\n                        Información de la cuenta por pagar\n                      ")])]),a("TR",[a("TD",[a("span",{staticClass:"blue--text headline"},[t._v("Plazo:")]),a("h2",[t._v(t._s(t.plazo+t.unidadTiempo))])]),a("TD",{attrs:{colspan:"2"}},[a("span",{staticClass:"blue--text headline"},[t._v("Total por pagar:")]),a("span",{staticClass:"headline"},[t._v("$"+t._s(t.totalFormaPago))])]),a("TD",{attrs:{colspan:"2"}},[a("span",{staticClass:"blue--text headline"},[t._v("Total pagado:")]),a("span",{staticClass:"headline"},[t._v("$"+t._s(t.totalPagado))])])],1)],1)]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){return t.close()}}},[t._v("Cancelar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"700px"},model:{value:t.filtroModal,callback:function(e){t.filtroModal=e},expression:"filtroModal"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Filtre sus busquedas:")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-dialog",{ref:"dialog2",attrs:{"return-value":t.finicio,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.finicio=e},"update:return-value":function(e){t.finicio=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Fecha de inicio","prepend-icon":"event",readonly:""},model:{value:t.finicio,callback:function(e){t.finicio=e},expression:"finicio"}},"v-text-field",i,!1),o))]}}]),model:{value:t.modal5,callback:function(e){t.modal5=e},expression:"modal5"}},[a("v-date-picker",{attrs:{scrollable:""},model:{value:t.finicio,callback:function(e){t.finicio=e},expression:"finicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.modal5=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"success"},on:{click:function(e){return t.$refs.dialog2.save(t.finicio)}}},[t._v("Aceptar")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-dialog",{ref:"dialog3",attrs:{"return-value":t.ffin,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.ffin=e},"update:return-value":function(e){t.ffin=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Fecha de fin","prepend-icon":"event",readonly:""},model:{value:t.ffin,callback:function(e){t.ffin=e},expression:"ffin"}},"v-text-field",i,!1),o))]}}]),model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[a("v-date-picker",{attrs:{scrollable:""},model:{value:t.ffin,callback:function(e){t.ffin=e},expression:"ffin"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.modal2=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"success"},on:{click:function(e){return t.$refs.dialog3.save(t.ffin)}}},[t._v("Aceptar")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:"",l12:""}},[0==t.proveedor.length?a("div",[a("v-text-field",{attrs:{label:"# comprobante"},model:{value:t.comprobanteBusqueda,callback:function(e){t.comprobanteBusqueda=e},expression:"comprobanteBusqueda"}})],1):a("div",[a("v-text-field",{attrs:{disabled:"",label:"# comprobante"},model:{value:t.comprobanteBusqueda,callback:function(e){t.comprobanteBusqueda=e},expression:"comprobanteBusqueda"}})],1)]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:"",l12:""}},[0==t.comprobanteBusqueda.length?a("div",[a("v-autocomplete",{attrs:{items:t.proveedores,label:"Proveedores"},model:{value:t.proveedor,callback:function(e){t.proveedor=e},expression:"proveedor"}})],1):a("div",[a("v-autocomplete",{attrs:{items:t.proveedores,disabled:"",label:"Proveedores"},model:{value:t.proveedor,callback:function(e){t.proveedor=e},expression:"proveedor"}})],1)])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"primary",on:{click:function(e){return t.buscarF(t.proveedor,t.comprobanteBusqueda,t.finicio,t.ffin)}}},[t._v("Buscar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){return t.cerrarModalFiltro()}}},[t._v("Cancelar")])],1)],1)],1)],1)],1)},pa=[],ha={watch:{},props:{},data:function(){var t;return t={totalRetenido:0,totalPagado:0,comprobanteBusqueda:"",proveedores:[],proveedor:"",finicio:"",ffin:"",modal5:!1,modal2:!1,filtroModal:0,fechaFactura:"",unidadTiempo:"",plazo:"",totalFormaPago:0,totalFactura:0},Object(Ct["a"])(t,"proveedor",[]),Object(Ct["a"])(t,"numComprobante",""),Object(Ct["a"])(t,"numComprobanteFactura",""),Object(Ct["a"])(t,"detalleModal",0),Object(Ct["a"])(t,"datos",[]),Object(Ct["a"])(t,"cabeceraDatos",[{text:"Opciones",value:"opciones",sorteable:!1},{text:"Num. cxp",value:"numComprobante",sorteable:!1},{text:"Num. Factura",value:"numComprobanteFactura",sorteable:!1},{text:"Proveedor",value:"codigoProveedor.razonsocial",sorteable:!1},{text:"Desc. Compra",value:"descripcion",sorteable:!1},{text:"Plazo de pago",value:"plazo",sorteable:!1},{text:"Total factura",value:"totalFactura",sorteable:!1},{text:"Total por pagar",value:"totalFormaPago",sorteable:!1},{text:"Abono",value:"totalPagado",sorteable:!1},{text:"Fecha fact.",value:"fechaFactura",sorteable:!1},{text:"Fecha de vencimiento",value:"fecha",sorteable:!1},{text:"Dias vencidos",value:"diasVencidos",sorteable:!1},{text:"Estado",value:"estado",sorteable:!1}]),Object(Ct["a"])(t,"search",""),Object(Ct["a"])(t,"verFiltro",0),t},methods:{buscarF:function(t,e,a,o){var i=this;i.compras=[];var r={Token:this.$store.state.token},s={headers:r},n=a,c=new Date(n+" 00:00:01"),l=o,u=new Date(l+" 23:59:59");d.a.get("cuentasporpagar/buscar?finicio="+c.toISOString()+"&ffin="+u.toISOString()+"&numComprobante="+e+"&codigoProveedor="+t,s).then((function(t){209==t.status?tt.a.fire("Aviso",t.data.message,"error"):(i.datos=t.data,i.cerrarModalFiltro())})).catch((function(t){console.log(t)}))},obetenerProveedores:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};d.a.get("proveedor/list",o).then((function(a){e=a.data,e.map((function(e){t.proveedores.push({text:e.razonsocial,value:e._id})}))})).catch((function(t){console.log(t)}))},abrirFiltroModal:function(){this.filtroModal=1},cerrarModalFiltro:function(){this.filtroModal=0},close:function(){this.detalleModal=0},verDetalle:function(t){this.detalleModal=1,this.plazo=t.plazo,this.unidadTiempo=t.unidadTiempo,this.totalFormaPago=t.totalFormaPago-t.totalRetenido,this.totalPagado=t.totalPagado,this.numComprobante=t.numComprobante,this.numComprobanteFactura=t.numComprobanteFactura,this.fechaFactura=t.fechaFactura,this.totalFactura=t.totalFactura,this.totalRetenido=t.totalRetenido,this.proveedor=t.codigoProveedor},diasVencidos:function(t,e,a){var o=a.split("/"),i=o[1]+"/"+o[0]+"/"+o[2],r=wt()(i).add(e,"d").format("MM/DD/YYYY"),s=r.split("/"),n=[];n.push(parseInt(s[2]),parseInt(s[0]),parseInt(s[1])),console.log(n);var c=wt()().format("MM/DD/YYYY"),l=c.split("/"),d=[];d.push(parseInt(l[2]),parseInt(l[0]),parseInt(l[1]));var u=wt()(d),v=wt()(n),m=u.diff(v,"days");return m>0?m:0},agregarDias:function(t,e,a){var o=a.split("/"),i=o[1]+"/"+o[0]+"/"+o[2];if(t&&e&&"dias"==t)return wt()(i).add(e,"d").format("DD/MM/YYYY")},formatearFecha:function(t){if(t)return wt()(String(t)).format("MM/DD/YYYY")},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("cuentasporpagar/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.datos=e.data:console.log(e)})).catch((function(t){console.log(t)}))}},created:function(){this.listar(),this.obetenerProveedores()}},fa=ha,ba=Object(m["a"])(fa,ma,pa,!1,null,"38400dd7",null),ga=ba.exports;h()(ba,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VContainer:C["a"],VDataTable:vt["a"],VDatePicker:Nt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VSpacer:y["a"],VTextField:it["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Egresos")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),[t.verNuevo?t._e():a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.esGuardaAlmacen,expression:"esGuardaAlmacen"}],staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.verNuevo=1}}},[t._v("\n          Nuevo\n        ")])]],2),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numComprobante,callback:function(e){t.numComprobante=e},expression:"numComprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm3:"",md3:""}},[a("v-dialog",{ref:"dialog2",attrs:{"return-value":t.fechaFactura,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.fechaFactura=e},"update:return-value":function(e){t.fechaFactura=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Fecha de factura","prepend-icon":"event",readonly:""},model:{value:t.fechaFactura,callback:function(e){t.fechaFactura=e},expression:"fechaFactura"}},"v-text-field",i,!1),o))]}}],null,!1,899545956),model:{value:t.modal5,callback:function(e){t.modal5=e},expression:"modal5"}},[a("v-date-picker",{attrs:{scrollable:""},model:{value:t.fechaFactura,callback:function(e){t.fechaFactura=e},expression:"fechaFactura"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.modal5=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"success"},on:{click:function(e){return t.$refs.dialog2.save(t.fechaFactura)}}},[t._v("\n                      Aceptar\n                    ")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-textarea",{attrs:{label:"Descripcion del egreso"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}}),a("span",[t._v("Datos de cliente")]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}}),a("v-flex",{attrs:{xs12:"",sm5:"",md5:"",lg5:"",xl5:""}},[a("v-autocomplete",{attrs:{disabled:t.isUpdating,items:t.listClientes,chips:"",color:"blue-grey lighten-2",label:"Seleccionar Cliente","item-text":"[nombres]","item-value":"[nombres]",dense:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{attrs:{selected:e.selected,close:""},on:{input:function(e){t.clienteSelected=[]}}},[t._v("\n                  "+t._s(e.item.nombres)+"\n                ")])]}},{key:"item",fn:function(e){return[[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.nombres)}})],1)]]}}],null,!1,2428337177),model:{value:t.clienteSelected,callback:function(e){t.clienteSelected=e},expression:"clienteSelected"}})],1),a("v-flex",{staticStyle:{"margin-top":"11px"},attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-text-field",{attrs:{label:"Num documento"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCliente(t.doc_cliente)}},model:{value:t.doc_cliente,callback:function(e){t.doc_cliente=e},expression:"doc_cliente"}})],1),a("v-flex",{staticStyle:{"margin-top":"11px"},attrs:{xs12:"",sm5:"",md5:"",lg5:"",xl5:""}},[a("v-text-field",{attrs:{label:"Direccion",disabled:""},model:{value:t.direccion_Cliente,callback:function(e){t.direccion_Cliente=e},expression:"direccion_Cliente"}})],1),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}}),a("span",[t._v("Datos de productos")]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}}),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",x8:""}},[a("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCodigo(t.codigo)}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){t.dialog=1}}},[a("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.errorArticulo,expression:"errorArticulo"}],attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v("\n                      delete\n                    ")])],1),a("td",{staticClass:"text-xs-center blue--text"},[t._v("\n                    "+t._s(e.item.producto)+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{model:{value:e.item.fracciones,callback:function(a){t.$set(e.item,"fracciones",a)},expression:"props.item.fracciones"}})],1),a("td",{staticClass:"text-xs-center green--text"},[t._v("\n                    "+t._s(e.item.fxcaja)+"\n                  ")]),a("td",{staticClass:"text-xs-center green--text"},[t._v("\n                    "+t._s(e.item.fraccionesTotales=parseInt(e.item.cantidad)*parseInt(e.item.fxcaja)+parseInt(e.item.fracciones))+"\n                  ")]),a("td",{staticClass:"text-xs-center blue--text"},[t._v(" "+t._s(e.item.stock)+" ")]),a("td",{staticClass:"text-xs-center green--text"},[t._v(t._s(e.item.codigoLote))]),a("td",{staticClass:"text-xs-center green--text"},[t._v(t._s(e.item.registroSanitario))]),a("td",{staticClass:"text-xs-center green--text"},[a("v-text-field",{attrs:{prefix:"$"},model:{value:e.item.pvp,callback:function(a){t.$set(e.item,"pvp",a)},expression:"props.item.pvp"}})],1),a("td",{staticClass:"text-xs-center green--text"},[a("v-text-field",{attrs:{prefix:"$"},model:{value:e.item.punit,callback:function(a){t.$set(e.item,"punit",a)},expression:"props.item.punit"}})],1),e.item.iva?a("td",{staticClass:"text-xs-center green--text"},[a("span",[t._v("SI")])]):a("td",{staticClass:"text-xs-center green--text"},[a("span",[t._v("NO")])]),a("td",{staticClass:"text-xs-center green--text"},[a("v-text-field",{attrs:{suffix:"%"},model:{value:e.item.descuento,callback:function(a){t.$set(e.item,"descuento",a)},expression:"props.item.descuento"}})],1),a("td",{staticClass:"text-xs-center green--text"},[t._v("\n                    $"+t._s(((parseInt(e.item.cantidad)*parseInt(e.item.fxcaja)+parseInt(e.item.fracciones))*parseFloat(e.item.punit)).toFixed(2))+"\n                  ")])]}}],null,!1,3272263037)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}}),a("span",[t._v("Forma de pago")]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}}),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-btn",{staticClass:"primary",attrs:{color:"white",small:"",flat:""},on:{click:function(e){return t.Agregarformapago()}}},[a("v-icon",[t._v("add")]),t._v("\n                  Nuevo detalle\n                ")],1)],1),a("v-layout",{attrs:{wrap:""}},[a("div",{attrs:{id:"formapago"}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraFormapago,items:t.detallesFP,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detallesFP,e.item)}}},[t._v("\n                              delete\n                            ")])],1),a("td",[a("v-autocomplete",{attrs:{items:t.formaspagos,label:"Forma pago"},model:{value:e.item.formaPago,callback:function(a){t.$set(e.item,"formaPago",a)},expression:"props.item.formaPago"}})],1),a("td",[a("v-text-field",{model:{value:e.item.total,callback:function(a){t.$set(e.item,"total",a)},expression:"props.item.total"}})],1),a("td",[a("v-autocomplete",{attrs:{items:t.tiempos,label:"Tiempo"},model:{value:e.item.unidadTiempo,callback:function(a){t.$set(e.item,"unidadTiempo",a)},expression:"props.item.unidadTiempo"}})],1),"NINGUNO"==e.item.unidadTiempo?a("td",[a("v-text-field",{attrs:{disabled:""},model:{value:e.item.plazo,callback:function(a){t.$set(e.item,"plazo",a)},expression:"props.item.plazo"}})],1):a("td",[a("v-text-field",{model:{value:e.item.plazo,callback:function(a){t.$set(e.item,"plazo",a)},expression:"props.item.plazo"}})],1)]}}],null,!1,3191963587)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)]],2)],1),a("v-spacer"),a("div",{attrs:{id:"totales"}},[a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Sub Total:")]),t._v("\n                    $"+t._s(t.subtotal=t.calcularSubtotal)+"\n                  ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Impuesto:")]),t._v("\n                    $"+t._s(t.totalimpuesto=t.calcularIva)+"\n                  ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Descuento:")]),t._v("\n                    $"+t._s(t.totaldescuento=t.calcularDescuento)+"\n                  ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total:")]),t._v("\n                    $"+t._s(t.total=t.calcularTotal)+"\n                  ")])],1)],1)]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("\n              Cancelar\n            ")]),0!=t.verDetalle||t.editando?t._e():a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[t._v("\n              Guardar\n            ")])],1)],1)],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("Activar Item")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("\n          Desactivar Item\n        ")]):t._e(),a("v-card-text",[t._v("\n          Estás a punto de\n          "),1==t.adAccion?a("span",[t._v("activar")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar")]):t._e(),t._v("\n          el item "+t._s(t.adNombre)+"\n        ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v("\n            Cancelar\n          ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v("\n            Activar\n          ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v("\n            Desactivar\n          ")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulosnombres(t.texto)}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.agregarDetalle(e.item)}}},[t._v("\n                          add\n                        ")])],1),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoBarra))]),a("td",{staticClass:"blue--text"},[t._v(t._s(e.item.codigoLote))]),a("td",{},[t._v(t._s(e.item.nombreComercial))])]}}])})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),t.verNuevo?t._e():a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraCompras,items:t.compras,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verDetalleC(e.item)}}},[t._v("tab")]),t.esGuardaAlmacen?[e.item.estado?[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.GenerarPDF(e.item)}}},[t._v("\n                picture_as_pdf\n              ")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(2,e.item)}}},[t._v("\n                block\n              ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.eliminarEgreso(e.item._id)}}},[t._v("\n                delete\n              ")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(1,e.item)}}},[t._v("\n                check\n              ")])]]:t._e()],2),a("td",{staticClass:"blue--text"},[t._v("\n          "+t._s(e.item.descripcion)+"\n        ")]),a("td",[t._v("\n          "+t._s(e.item.numComprobante)+"\n        ")]),a("td",[t._v("$"+t._s(e.item.subTotal))]),a("td",[t._v("$"+t._s(e.item.total))]),a("td",[t._v("$"+t._s(e.item.totalimpuesto))]),a("td",[t._v("$"+t._s(e.item.totaldescuento))]),a("td",[t._v("\n          "+t._s(t.formatearFecha(e.item.fechaFactura))+"\n        ")]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"green--text"},[t._v("Aceptado")])]):a("div",[a("span",{staticClass:"orange--text"},[t._v("Pendiente")])])])]}}],null,!1,204083899)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2)],1)],1)},Ca=[],_a={computed:{calcularTotal:function(){var t=parseFloat(this.calcularSubtotal)+parseFloat(this.calcularIva)-parseFloat(this.calcularDescuento);return t.toFixed(2)},calcularDescuento:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=0,s=this.detalles[e];a=parseInt(s.fraccionesTotales),o=parseFloat(s.punit),i=parseFloat(s.descuento),r=a*o*i/100,t+=r}return t.toFixed(2)},calcularIva:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=this.detalles[e];a=parseInt(r.fraccionesTotales),o=parseFloat(r.punit),i=a*o,0!=r.iva&&(t+=.12*i)}return t.toFixed(2)},calcularSubtotal:function(){for(var t=0,e=0;e<this.detalles.length;e++){var a=0,o=0,i=0,r=this.detalles[e];a=parseInt(r.fraccionesTotales),o=parseFloat(r.punit),i=a*o,t+=i}return t.toFixed(2)},esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol}},watch:{clienteSelected:function(t,e){if(0==t.length)this.doc_cliente="",this.nombres_Cliente="",this.direccion_Cliente="",this._idCliente="";else{var a=this.listClientes.find((function(e){return e.nombres==t}));this.doc_cliente=a.numDocumento,this.nombres_Cliente=a.nombres,this.direccion_Cliente=a.direccion,this._idCliente=a._id}},verNuevo:function(t,e){1!=t||this.editando||this.getClientes()}},data:function(){return{editando:!1,autoUpdate:!0,clienteSelected:[],isUpdating:!1,listClientes:[],modal5:!1,cabeceraFormapago:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Forma de pago",value:"formapago",sortable:!1},{text:"Total a pagar",value:"total",sortable:!1},{text:"Plazo en:",value:"plazo",sortable:!1},{text:"Tiempo en:",value:"unidadTiempo",sortable:!1}],detallesFP:[],formaspagos:[{text:"SIN UTILIZACION DEL SISTEMA FINANCIERO",value:"01"},{text:"COMPENSACIÓN DE DEUDAS",value:"15"},{text:"TARJETA DE DÉBITO",value:"16"},{text:"DINERO ELECTRÓNICO",value:"17"},{text:"TARJETA PREPAGO",value:"18"},{text:"TARJETA DE CRÉDITO",value:"19"},{text:"OTROS CON UTILIZACION DEL SISTEMA FINANCIERO",value:"20"},{text:"ENDOSO DE TÍTULOS",value:"21"}],tiempos:["NINGUNO","dias","meses","años"],totalRet:0,cabeceraCompras:[{text:"Opciones",value:"borrar",sortable:!1},{text:"DESCRIPCION",value:"descripcion",sortable:!1},{text:"# COMPROBANTE",value:"numComprobante",sortable:!1},{text:"Sub Total",value:"subTotal",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Impuestos",value:"totalimpuesto",sortable:!1},{text:"Descuentos",value:"totaldescuento",sortable:!1},{text:"Fecha de emision",value:"fechaFactura",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],compras:[],claveAcceso:"",_idCliente:"",texto:"",articulos:[],cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Codigo Barras",value:"codigoBarras",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Nombre Comercial",value:"nombreComercial",sortable:!1}],dialog:0,total:0,totalimpuesto:0,totaldescuento:0,subtotal:0,search:"",verDetalle:0,verNuevo:0,validaMensaje:[],valida:!1,cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Producto",value:"producto",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Fracciones",value:"fracciones",sortable:!1},{text:"F * Caja",value:"fxcaja",sortable:!1},{text:"F Totales",value:"fraccionesTotales",sortable:!1},{text:"Stock",value:"fraccionesTotales",sortable:!1},{text:"Codigo Lote",value:"codigoLote",sortable:!1},{text:"Reg. San",value:"registroSanitario",sortable:!1},{text:"PVP",value:"pvP",sortable:!1},{text:"P. UNIT.",value:"punit",sortable:!1},{text:"IVA?",value:"iva",sortable:!1},{text:"Descuento",value:"descuento",sortable:!1},{text:"Sub Total",value:"subtotal",sortable:!1}],detalles:[],codigo:"",errorArticulo:"",numComprobante:"",fechaFactura:"",descripcion:"",direccion_Cliente:"",nombres_Cliente:"",doc_cliente:"",codigoBodega:"",adModal:0,adAccion:0,adNombre:"",adId:""}},methods:{getClientes:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this,o={Token:this.$store.state.token},i={headers:o};d.a.get("cliente/list",i).then((function(o){a.listClientes=o.data,t&&(a.clienteSelected=e)})).catch((function(t){console.log(t)}))},GenerarPDF:function(t){for(var e=[],a=0;a<t.detalles.length;a++){var o=t.detalles[a],i=0,r=0,s=0,n=0;i=parseInt(o.fraccionesTotales),r=parseFloat(o.punit),n=i*r,s=n.toFixed(2),0!=t.detalles[a].iva?(2,(.12*s).toFixed(2),12):(0,0,0);var c=[];c=[{codigoBarras:t.detalles[a].codigoBarra,codigoLote:t.detalles[a].codigoLote,producto:t.detalles[a].producto,nombreComercial:t.detalles[a].nombreComercial,fechas:t.detalles[a].fechaCaducidad,registroSanitario:t.detalles[a].registroSanitario,cantidad:i,precio:r,descuento:t.detalles[a].descuento,total:s}],e.push(c)}d.a.post("http://localhost:10000/api/pdf/pdfE",{numComprobante:t.numComprobante,fecha:this.formatearFecha(t.fechaFactura),clienteDireccion:t.codigoCliente.direccion,clienteDocumento:t.codigoCliente.numDocumento,clienteNombre:t.codigoCliente.nombres,detalles:{detalle:e},clienteEmail:t.codigoCliente.email,clienteTelefono:t.codigoCliente.telefono,subtotal:t.subTotal,descuento:t.totalDescuento,iva:t.totalImpuesto,total:t.total,razonSocial:t.codigoDistribuidor.razonSocial,ruc:t.codigoDistribuidor.ruc},{responseType:"blob"}).then((function(t){if(200==t.status){var e=new Blob([t.data],{type:"application/pdf"}),a=URL.createObjectURL(e);window.open(a,"_blank")}else console.log(t.data.message)})).catch((function(t){console.log(t)}))},ObtenerConteo:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;d.a.get("egresos/obtenerconteo?codigoDistribuidor="+o,a).then((function(e){t.numComprobante=e.data})).catch((function(t){console.log(t)}))},Agregarformapago:function(){var t=this;t.detallesFP.unshift({formaPago:"01",total:this.total,plazo:0,unidadTiempo:"NINGUNO"})},listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};d.a.get("egresos/query?_id="+t,o).then((function(t){e.detalles=t.data.detalles,e.detallesFP=t.data.formaPago})).catch((function(t){console.log(t)}))},verDetalleC:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.totalRet=e.totalRetenido,this.verNuevo=1,this.editando=!0,this.numComprobante=e.numComprobante,this.descripcion=e.descripcion,this.fechaFactura=this.formatearFecha(e.fechaFactura),this.listarDetalles(e._id),t.next=9,this.getClientes(!0,e.codigoCliente.nombres);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),formatearFecha:function(t){if(t)return wt()(String(t)).format("YYYY-MM-DD")},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;this.$store.state.usuario._id;void 0==o||d.a.get("egresos/list?codigoDistribuidor="+o,a).then((function(e){200==e.status?t.compras=e.data:console.log(e)})).catch((function(t){console.log(t)}))},ocultarNuevo:function(){this.editando=!1,this.clienteSelected="",this.verNuevo=0,this.limpiar()},limpiar:function(){this.detallesFP=[],this.claveAcceso="",this.direccion_Cliente="",this.nombres_Cliente="",this.doc_cliente="",this.numComprobante="",this.fechaFactura="",this.descripcion="",this.errorArticulo="",this.total=0,this.totalimpuesto=0,this.totaldescuento=0,this.subtotal=0,this._idCliente="",this.detalles=[],this.valida=0,this.validaMensaje=[]},limpiarbusqueda:function(){this.texto="",this.articulos=[]},close:function(){this.dialog=0,this.limpiarbusqueda()},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;void 0==o||d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},listarArticulosnombres:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/busca?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):e.articulos=t.data})).catch((function(t){console.log(t)}))},validar_guardar:function(){this.valida=0,this.validaMensaje=[],0==this.numComprobante.length&&this.validaMensaje.push("Debe ingresar el numero de comprobante."),0==this.fechaFactura.length&&this.validaMensaje.push("Debe ingresar la fecha de emision de la factura."),0==this.descripcion.length&&this.validaMensaje.push("Debe ingresar la descripcion de la compra"),0==this.doc_cliente.length&&this.validaMensaje.push("Debe ingresar el numero de RUC del proveedor."),0==this.nombres_Cliente.length&&this.validaMensaje.push("Falta razon social del proveedor."),0==this.direccion_Cliente.length&&this.validaMensaje.push("Falta direccion de proveedor."),0==this.detalles.length&&this.validaMensaje.push("Debe ingresar al menos un detalle a la factura de compra.");for(var t=0;t<this.detalles.length;t++){var e=this.detalles[t];0==e.cantidad.length&&this.validaMensaje.push("CANTIDAD no puede ser un valor vacio."),parseInt(e.cantidad)<0&&this.validaMensaje.push("CANTIDAD no puede ser un valor negativo."),0==e.fracciones.length&&this.validaMensaje.push("FRACCIONES no puede ser un valor vacio."),parseInt(e.fracciones)<0&&this.validaMensaje.push("FRACCIONES no puede ser un valor negativo."),parseInt(e.fraccionesTotales)>parseInt(e.stock)&&this.validaMensaje.push("Fracciones totales no puede superar el Stock de inventario."),0!=e.pvp&&0!=e.pvp.length||this.validaMensaje.push("PVP no puede ser un valor vacio."),0!=e.punit&&0!=e.punit.length||this.validaMensaje.push("P. UNIT no puede ser un valor vacio."),0==e.descuento.length&&this.validaMensaje.push("DESCUENTO no puede ser un valor vacio."),e.pvp<0&&this.validaMensaje.push("PVP no puede ser negativo."),e.punit<0&&this.validaMensaje.push("P. UNIT no puede ser negativo."),e.descuento<0&&this.validaMensaje.push("DESCUENTO no puede ser negativo.")}return this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){if(!this.validar_guardar()){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor,i=this.$store.state.usuario._id,r=new Date(this.fechaFactura+" 05:00:00"),s=this.numComprobante,n=this.descripcion;d.a.post("egresos/add",{numComprobante:s.toUpperCase(),fechaFactura:r.toISOString(),subTotal:this.subtotal,total:this.total,totalImpuesto:this.totalimpuesto,totalDescuento:this.totaldescuento,detalles:this.detalles,formaPago:this.detallesFP,descripcion:n.toUpperCase(),codigoCliente:this._idCliente,codigoBodega:this.codigoBodega,codigoDistribuidor:o,codigoUsuario:i},a).then((function(e){200==e.status?(t.detallesFP.forEach((function(a){0!=a.plazo&&t.generarCuentaPorCobrar(a.total,a.unidadTiempo,a.plazo,e.data._id,t._idCliente,o,i,t.total,t.numComprobante,t.fechaFactura,t.descripcion)})),tt.a.fire("Noticias!","Se guardo correctamente el egreso.","success")):tt.a.fire("Ops!","Hubo problemas al intentar guardar el egreso","err"),t.limpiar(),t.ocultarNuevo(),t.listar()})).catch((function(t){console.log(t)}))}},obtenerConteoCTaPC:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,e={Token:this.$store.state.token},a={headers:e},this.$store.state.usuario.codigoDistribuidor,t.next=6,d.a.get("cuentasporcobrar/contar",a);case 6:return o=t.sent,t.abrupt("return",o.data);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),generarCuentaPorCobrar:function(t,e,a,o,i,r,s,n,c,l,u){var v={Token:this.$store.state.token},m={headers:v},p=this.obtenerConteoCTaPC(),h="";p.then((function(v){h=v,d.a.post("cuentasporcobrar/add",{numComprobante:h,plazo:a,totalFormaPago:t,totalPagado:0,unidadTiempo:e,codigoCompra:o,codigoCliente:i,codigoDistribuidor:r,codigoUsuario:s,totalFactura:n,numComprobanteFactura:c,fechaFactura:l,descripcion:u},m).then((function(t){})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!=a&&t.splice(a,1)},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},agregarDetalle:function(t){console.log(t),this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(this.detalles.unshift({_id:t._id,producto:t.nombreComercial,cantidad:0,fracciones:0,fxcaja:t.codigoProducto.fraccionCaja,fraccionesTotales:t.fraccionesTotales,stock:t.fraccionesTotales,pvp:t.pvp,punit:t.punit,descuento:t.descuento,iva:t.iva,codigoLote:t.codigoLote,registroSanitario:t.registroSanitario,fechaCaducidad:t.fechaCaducidad}),this.codigo="")},buscarCodigo:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/buscaCodigo?data="+t+"&codigoBodega="+e.codigoBodega,o).then((function(t){206==t.status?tt.a.fire("Aviso",t.data.message,"error"):t.data.length>1?tt.a.fire("Aviso","Se estan mostrando mas de un resultado \n deberia buscar en pantalla.","error"):e.agregarDetalle(t.data)})).catch((function(t){console.log(t)}))},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.numComprobante,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("egresos/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};d.a.put("egresos/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},eliminarEgreso:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};tt.a.fire({title:"Estas seguro de eliminar este egreso pendiente?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Eliminar",denyButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&d.a.delete("egresos/eliminarEgreso/".concat(t),o).then((function(t){e.listar()})).catch((function(t){console.log(t)}))}))}},created:function(){this.listar(),this.obtenerBodega(),this.ObtenerConteo()}},Aa=_a,Ea=Object(m["a"])(Aa,xa,Ca,!1,null,null,null),Da=Ea.exports;h()(Ea,{VAutocomplete:Rt["a"],VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VChip:Ie["a"],VContainer:C["a"],VDataTable:vt["a"],VDatePicker:Nt["a"],VDialog:mt["a"],VDivider:pt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VListTileContent:R["a"],VListTileTitle:R["b"],VSpacer:y["a"],VTextField:it["a"],VTextarea:Te["a"],VToolbar:F["a"],VToolbarTitle:M["a"]});var Oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",margin:"auto"}},[a("v-flex",{attrs:{grow:"","mt-4":"",row:""}},[a("h3",{staticClass:"text-sm-center"},[t._v("CAMBIAR USUARIO/CONTRASEÑA")])]),a("v-flex",{staticStyle:{"text-align":"center"},attrs:{grow:"","mt-4":"",row:""}},[a("div",[a("v-radio-group",{staticStyle:{display:"inline-flex"},model:{value:t.formUser.tipo,callback:function(e){t.$set(t.formUser,"tipo",e)},expression:"formUser.tipo"}},[a("v-radio",{attrs:{label:"Usuario",value:"usuario"}}),a("v-radio",{attrs:{label:"Contraseña",value:"password"}})],1)],1)]),""!=t.formUser.tipo?a("v-flex",{staticStyle:{"text-align":"center",width:"50%","margin-left":"25%"},attrs:{grow:"","mt-4":"",row:""}},[a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{type:"usuario"==t.formUser.tipo?"text":"password",label:"usuario"==t.formUser.tipo?"Usuario":"Contraseña",required:""},model:{value:t.formUser.campo1,callback:function(e){t.$set(t.formUser,"campo1","string"===typeof e?e.trim():e)},expression:"formUser.campo1"}})],1),a("v-flex",{staticClass:"ml-4",attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{type:"usuario"==t.formUser.tipo?"text":"password",label:"usuario"==t.formUser.tipo?"Confirmar Usuario":"Confirmar Contraseña",required:""},model:{value:t.formUser.campo2,callback:function(e){t.$set(t.formUser,"campo2","string"===typeof e?e.trim():e)},expression:"formUser.campo2"}})],1),a("v-btn",{staticClass:"mt-3 ml-4",attrs:{loading:t.loading,color:"success"},on:{click:t.actualizar}},[t._v("\n            Actualizar\n          ")])],1)],1)],1):t._e()],1)},Ia=[],Ta={name:"SetCredenciales",computed:{esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol}},data:function(){return{loading:!1,formUser:{campo1:"",campo2:"",tipo:""}}},methods:{mostrarNotificacion:function(t,e){var a=tt.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,didOpen:function(t){t.addEventListener("mouseenter",tt.a.stopTimer),t.addEventListener("mouseleave",tt.a.resumeTimer)}});a.fire({icon:e,title:t})},actualizar:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.formUser.campo1.length){t.next=2;break}return t.abrupt("return",this.mostrarNotificacion("completa el primer campo","warning"));case 2:if(0!=this.formUser.campo2.length){t.next=4;break}return t.abrupt("return",this.mostrarNotificacion("completa el segundo campo","warning"));case 4:if(this.formUser.campo1==this.formUser.campo2){t.next=6;break}return t.abrupt("return",this.mostrarNotificacion("Los campos no son iguales, por favor verificar","warning"));case 6:return t.prev=6,this.formUser.usuario_id=this.$store.state.usuario._id,this.formUser.distribuidor_id=this.$store.state.usuario.codigoDistribuidor,this.loading=!0,t.next=12,d.a.put("/usuario/setCredenciales",this.formUser);case 12:this.loading=!1,e="El ".concat("usuario"==this.formUser.tipo?"Usuario":"Contraseña","  se actualizo exitosamente"),this.mostrarNotificacion(e,"success"),this.formUser.campo1="",this.formUser.campo2="",t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](6),this.loading=!1,this.mostrarNotificacion("Hubo en error al actualizar","error");case 23:case"end":return t.stop()}}),t,this,[[6,19]])})));function e(){return t.apply(this,arguments)}return e}()}},Sa=Ta,ka=Object(m["a"])(Sa,Oa,Ia,!1,null,null,null),Ra=ka.exports;h()(ka,{VBtn:b["a"],VContainer:C["a"],VFlex:A["a"],VLayout:O["a"],VRadio:Bt["a"],VRadioGroup:zt["a"],VTextField:it["a"]});var Na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"titleModuloTH",attrs:{md6:""}},[t._v("\n      Registro de Temperatura Y Humedad Relativa Ambiental\n    ")]),a("v-flex",{staticClass:"btnModuloTH",attrs:{md6:""}},[t.esGuardaAlmacen?a("v-btn",{attrs:{color:"success"},on:{click:function(e){t.agregarTempHumd=!0}}},[t._v("\n        Agregar\n      ")]):t._e()],1),a("v-flex",{staticClass:"mt-2 mb-4 ml-3",staticStyle:{display:"inline-flex","align-items":"center"},attrs:{md9:""}},[a("span",{staticClass:"mr-4",staticStyle:{width:"20%"}},[t._v("\n        Filtrar por Mes:\n      ")]),a("v-menu",{ref:"menu",staticStyle:{width:"26%",position:"relative",right:"50px"},attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-text-field",t._g({attrs:{"prepend-icon":"event",readonly:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},o))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{type:"month","no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.date)}}},[t._v("OK")])],1)],1),a("v-select",{staticClass:"centrarTextSelect",staticStyle:{position:"relative",right:"140px",width:"26%"},attrs:{items:t.noTermohigrometro,label:"No. Termohigométro"},model:{value:t.termohigrometroSelected,callback:function(e){t.termohigrometroSelected=e},expression:"termohigrometroSelected"}}),a("v-btn",{staticStyle:{position:"relative",right:"110px"},attrs:{color:"success"},on:{click:t.filtrar}},[t._v("\n        Filtrar\n      ")]),a("v-btn",{staticStyle:{position:"relative",right:"100px"},attrs:{color:"error",loading:t.loadingPDF},on:{click:t.getReporte}},[t._v("\n        Reporte\n      ")])],1),a("v-flex",{staticClass:"mt-07",staticStyle:{"margin-bottom":"33px"},attrs:{md12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{items:t.rows,loading:t.loading},scopedSlots:t._u([{key:"headers",fn:function(){return[a("tr",{staticClass:"border-table"},[a("th",{staticClass:"border-table",attrs:{rowspan:"2"}},[t._v("ACCIONES")]),a("th",{staticClass:"border-table",attrs:{rowspan:"2"}},[t._v("FECHA")]),a("th",{staticClass:"border-table",attrs:{colspan:"2"}},[t._v("TEMPERATURA AMBIENTE(°C)")]),a("th",{staticClass:"border-table",attrs:{colspan:"2"}},[t._v("HUMEDAD RELATIVA(%)")]),a("th",{staticClass:"border-table",attrs:{rowspan:"2"}},[t._v("NO. TERMOHIGROMÉTRO")])]),a("tr",{staticClass:"border-table"},[a("th",[t._v("MAÑANA")]),a("th",{staticClass:"border-table"},[t._v("TARDE")]),a("th",[t._v("MAÑANA")]),a("th",{staticClass:"border-table"},[t._v("TARDE")])])]},proxy:!0},{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center"},[a("v-icon",{staticClass:"mr-3",attrs:{small:""},on:{click:function(a){return t.editarTempAndHumedad(e.item)}}},[t._v("edit")]),a("v-icon",{staticClass:"mr-3",attrs:{small:""},on:{click:function(a){return t.eliminarTempAndHumedad(e.item._id)}}},[t._v("delete")])],1),a("td",{staticClass:"text-xs-center"},[t._v("\n            "+t._s(t.formatearFecha(e.item.fecha))+"\n          ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n            "+t._s(e.item.temperatura_morning)+"°C\n          ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n            "+t._s(""!=e.item.temperatura_tarde?e.item.temperatura_tarde+"°C":"-----")+"\n          ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n            "+t._s(e.item.humedad_morning)+"%\n          ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n            "+t._s(""!=e.item.humedad_tarde?e.item.humedad_tarde+"°C":"-----")+"\n          ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n            "+t._s(e.item.noTermohigrometro)+"\n          ")])]}},{key:"no-data",fn:function(){return[a("tr",[a("td",{staticClass:"text-xs-center",attrs:{colspan:"7"}},[a("h4",[t._v("No se encontro ningun registro")])])])]},proxy:!0}])})],1),a("v-dialog",{attrs:{width:"700"},model:{value:t.agregarTempHumd,callback:function(e){t.agregarTempHumd=e},expression:"agregarTempHumd"}},[a("ComponentAdd",{on:{cerrarModal:t.closeModal}})],1),a("v-dialog",{attrs:{width:"700"},model:{value:t.editarTempHumd,callback:function(e){t.editarTempHumd=e},expression:"editarTempHumd"}},[a("ComponentEdit",{attrs:{dataTempHum:t.dataTempHum},on:{cerrarModal:t.closeModal}})],1)],1)},Pa=[],ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.guardar.apply(null,arguments)}}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2 justify-center",attrs:{"primary-title":""}},[t._v("\n        Agregar Temperatura y Humedad\n      ")]),a("v-layout",{staticStyle:{"justify-content":"space-evenly"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"pb-0",attrs:{xs6:""}},[a("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-text-field",t._g({attrs:{"persistent-hint":"","prepend-icon":"event",label:"Fecha"},on:{blur:function(e){t.date=t.parseDate(t.dateFormatted)}},model:{value:t.dateFormatted,callback:function(e){t.dateFormatted=e},expression:"dateFormatted"}},o))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[a("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"pb-0",attrs:{xs6:""}},[a("v-select",{staticClass:"centrarTextSelect",attrs:{items:t.noTermohigrometro,label:"No. Termohigométro"},model:{value:t.formAddTempHum.noTermohigrometro,callback:function(e){t.$set(t.formAddTempHum,"noTermohigrometro",e)},expression:"formAddTempHum.noTermohigrometro"}})],1)],1)],1),a("v-layout",{staticStyle:{"justify-content":"space-evenly"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md12:""}},[a("h3",{staticClass:"text-xs-center pt-3"},[t._v("MAÑANA")])]),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"py-0",attrs:{xs6:""}},[a("v-text-field",{staticClass:"centrar-text pt-1",attrs:{type:"number",label:"TEMP. AMBIENTE (°C)",required:""},model:{value:t.formAddTempHum.temperatura_morning,callback:function(e){t.$set(t.formAddTempHum,"temperatura_morning",e)},expression:"formAddTempHum.temperatura_morning"}})],1)],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"py-0",attrs:{xs6:""}},[a("v-text-field",{staticClass:"centrar-text pt-1",staticStyle:{"text-align":"center"},attrs:{type:"number",required:"",label:"HUM. RELATIVA (%)"},model:{value:t.formAddTempHum.humedad_morning,callback:function(e){t.$set(t.formAddTempHum,"humedad_morning",e)},expression:"formAddTempHum.humedad_morning"}})],1)],1),a("v-flex",{attrs:{xs12:"",md12:""}},[a("h3",{staticClass:"text-xs-center pt-3"},[t._v("TARDE")])]),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"py-0",attrs:{xs6:""}},[a("v-text-field",{staticClass:"centrar-text pt-1",attrs:{type:"number",label:"TEMP. AMBIENTE (°C)",required:""},model:{value:t.formAddTempHum.temperatura_tarde,callback:function(e){t.$set(t.formAddTempHum,"temperatura_tarde",e)},expression:"formAddTempHum.temperatura_tarde"}})],1)],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"py-0",attrs:{xs6:""}},[a("v-text-field",{staticClass:"centrar-text pt-1",staticStyle:{"text-align":"center"},attrs:{type:"number",required:"",label:"HUM. RELATIVA (%)"},model:{value:t.formAddTempHum.humedad_tarde,callback:function(e){t.$set(t.formAddTempHum,"humedad_tarde",e)},expression:"formAddTempHum.humedad_tarde"}})],1)],1)],1),a("v-divider"),a("v-card-actions",{staticStyle:{"justify-content":"space-evenly"}},[a("v-btn",{staticClass:"px-5 mb-3",attrs:{color:"success",loading:t.loading,type:"submit"}},[t._v("\n          Guardar\n        ")])],1)],1)],1)],1)},Fa=[],ja=(a("f576"),a("768b")),Ma={data:function(t){return{date:(new Date).toISOString().substr(0,10),dateFormatted:t.formatDate((new Date).toISOString().substr(0,10)),menu1:!1,formAddTempHum:{fecha:"",temperatura_morning:"",humedad_morning:"",temperatura_tarde:"",humedad_tarde:"",noTermohigrometro:""},noTermohigrometro:["General","#1","#2","#3","#4","#5","#6","#7","#8","#9","#10","#11","#12","Refri #1","Refri #2","Refri #3","Refri #4"],loading:!1}},computed:{computedDateFormatted:function(){return this.formatDate(this.date)}},watch:{date:function(t){this.dateFormatted=this.formatDate(this.date)}},methods:{limpiarCampos:function(){this.formAddTempHum.fecha="",this.formAddTempHum.temperatura_morning="",this.formAddTempHum.humedad_morning="",this.formAddTempHum.temperatura_tarde="",this.formAddTempHum.humedad_tarde="",this.formAddTempHum.noTermohigrometr=""},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(ja["a"])(e,3),o=a[0],i=a[1],r=a[2];return"".concat(i,"/").concat(r,"/").concat(o)},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=Object(ja["a"])(e,3),o=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},mostrarAlerta:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o=tt.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:a,timerProgressBar:!0,didOpen:function(t){t.addEventListener("mouseenter",tt.a.stopTimer),t.addEventListener("mouseleave",tt.a.resumeTimer)}});o.fire({icon:e,title:t})},guardar:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.formAddTempHum.temperatura_morning.length){t.next=2;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar la temperatura","warning"));case 2:if(""!=this.formAddTempHum.humedad_morning.length){t.next=4;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar la humedad","warning"));case 4:if(""!=this.formAddTempHum.noTermohigrometro.length){t.next=6;break}return t.abrupt("return",this.mostrarAlerta("Debes elegir el numero de termohigometro","warning"));case 6:return t.prev=6,this.formAddTempHum.distribuidor=this.$store.state.usuario.codigoDistribuidor,this.formAddTempHum.usuario=this.$store.state.usuario._id,this.formAddTempHum.fecha=this.date,this.loading=!0,t.next=13,d.a.post("/temp_humedad",this.formAddTempHum);case 13:e=t.sent,a=e.data,500==a.status?this.mostrarAlerta(a.msg,"error",6e3):(this.limpiarCampos(),this.mostrarAlerta(a.msg,"success"),this.$emit("cerrarModal")),this.loading=!1,t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](6),this.mostrarAlerta("Ocurrio un error al intentar guardar","error"),this.loading=!1;case 23:case"end":return t.stop()}}),t,this,[[6,19]])})));function e(){return t.apply(this,arguments)}return e}()}},Va=Ma,wa=(a("6843"),Object(m["a"])(Va,ya,Fa,!1,null,null,null)),La=wa.exports;h()(wa,{VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VDatePicker:Nt["a"],VDivider:pt["a"],VFlex:A["a"],VForm:Ot["a"],VLayout:O["a"],VMenu:Pt["a"],VSelect:ot["a"],VTextField:it["a"]});var Ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.editar.apply(null,arguments)}}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2 justify-center",attrs:{"primary-title":""}},[t._v("\n        Editar Temperatura y Humedad\n      ")]),a("v-layout",{staticStyle:{"justify-content":"space-evenly"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"pb-0",attrs:{xs6:""}},[a("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-text-field",t._g({attrs:{"persistent-hint":"","prepend-icon":"event",label:"Fecha"},on:{blur:function(e){t.date=t.parseDate(t.dateFormatted)}},model:{value:t.dateFormatted,callback:function(e){t.dateFormatted=e},expression:"dateFormatted"}},o))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[a("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"pb-0",attrs:{xs6:""}},[a("v-select",{attrs:{items:t.noTermohigrometro,label:"No. Termohigométro"},model:{value:t.formEditTempHum.noTermohigrometro,callback:function(e){t.$set(t.formEditTempHum,"noTermohigrometro",e)},expression:"formEditTempHum.noTermohigrometro"}})],1)],1)],1),a("v-layout",{staticStyle:{"justify-content":"space-evenly"},attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md12:""}},[a("h3",{staticClass:"text-xs-center pt-3"},[t._v("MAÑANA")])]),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"py-0",attrs:{xs6:""}},[a("v-text-field",{staticClass:"centrar-text pt-1",attrs:{type:"number",label:"TEMP. AMBIENTE (°C)",required:""},model:{value:t.formEditTempHum.temperatura_morning,callback:function(e){t.$set(t.formEditTempHum,"temperatura_morning",e)},expression:"formEditTempHum.temperatura_morning"}})],1)],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"py-0",attrs:{xs6:""}},[a("v-text-field",{staticClass:"centrar-text pt-1",staticStyle:{"text-align":"center"},attrs:{type:"number",required:"",label:"HUM. RELATIVA (%)"},model:{value:t.formEditTempHum.humedad_morning,callback:function(e){t.$set(t.formEditTempHum,"humedad_morning",e)},expression:"formEditTempHum.humedad_morning"}})],1)],1),a("v-flex",{attrs:{xs12:"",md12:""}},[a("h3",{staticClass:"text-xs-center pt-3"},[t._v("TARDE")])]),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"py-0",attrs:{xs6:""}},[a("v-text-field",{staticClass:"centrar-text pt-1",attrs:{type:"number",label:"TEMP. AMBIENTE (°C)",required:""},model:{value:t.formEditTempHum.temperatura_tarde,callback:function(e){t.$set(t.formEditTempHum,"temperatura_tarde",e)},expression:"formEditTempHum.temperatura_tarde"}})],1)],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card-text",{staticClass:"py-0",attrs:{xs6:""}},[a("v-text-field",{staticClass:"centrar-text pt-1",staticStyle:{"text-align":"center"},attrs:{type:"number",required:"",label:"HUM. RELATIVA (%)"},model:{value:t.formEditTempHum.humedad_tarde,callback:function(e){t.$set(t.formEditTempHum,"humedad_tarde",e)},expression:"formEditTempHum.humedad_tarde"}})],1)],1)],1),a("v-divider"),a("v-card-actions",{staticStyle:{"justify-content":"space-evenly"}},[a("v-btn",{staticClass:"px-5 mb-3",attrs:{color:"success",loading:t.loading,type:"submit"}},[t._v("\n          Editar\n        ")])],1)],1)],1)],1)},$a=[],Ba={props:["dataTempHum"],name:"EditarTH",data:function(t){return{date:(new Date).toISOString().substr(0,10),dateFormatted:t.formatDate((new Date).toISOString().substr(0,10)),menu1:!1,formEditTempHum:{fecha:"",temperatura_morning:"",humedad_morning:"",temperatura_tarde:"",humedad_tarde:"",noTermohigrometro:""},noTermohigrometro:["General","#1","#2","#3","#4","#5","#6","#7","#8","#9","#10","#11","#12","Refri #1","Refri #2","Refri #3","Refri #4"],loading:!1}},computed:{computedDateFormatted:function(){return this.formatDate(this.date)}},watch:{date:function(t){this.dateFormatted=this.formatDate(this.date)},dataTempHum:function(){this.formEditTempHum.temperatura_morning=this.dataTempHum.temperatura_morning,this.formEditTempHum.temperatura_tarde=this.dataTempHum.temperatura_tarde,this.formEditTempHum.humedad_morning=this.dataTempHum.humedad_morning,this.formEditTempHum.humedad_tarde=this.dataTempHum.humedad_tarde,this.formEditTempHum.noTermohigrometro=this.dataTempHum.noTermohigrometro,this.date=this.dataTempHum.fecha.split("T")[0],this.formEditTempHum.distribuidor=this.dataTempHum.distribuidor,this.formEditTempHum.usuario=this.dataTempHum.usuario,this.formEditTempHum._id=this.dataTempHum._id}},methods:{formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(ja["a"])(e,3),o=a[0],i=a[1],r=a[2];return"".concat(i,"/").concat(r,"/").concat(o)},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=Object(ja["a"])(e,3),o=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},mostrarAlerta:function(t,e){var a=tt.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(t){t.addEventListener("mouseenter",tt.a.stopTimer),t.addEventListener("mouseleave",tt.a.resumeTimer)}});a.fire({icon:e,title:t})},editar:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.formEditTempHum.temperatura_morning.length){t.next=2;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar la temperatura","warning"));case 2:if(""!=this.formEditTempHum.humedad_morning.length){t.next=4;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar la humedad","warning"));case 4:if(""!=this.formEditTempHum.noTermohigrometro.length){t.next=6;break}return t.abrupt("return",this.mostrarAlerta("Debes elegir el numero de termohigometro","warning"));case 6:return t.prev=6,this.formEditTempHum.fecha=this.date,this.loading=!0,t.next=11,d.a.put("/temp_humedad",this.formEditTempHum);case 11:this.loading=!1,this.mostrarAlerta("Editado exitosamente","success"),this.$emit("cerrarModal"),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](6),this.mostrarAlerta("Ocurrio un error al intentar guardar","error"),this.loading=!1;case 20:case"end":return t.stop()}}),t,this,[[6,16]])})));function e(){return t.apply(this,arguments)}return e}()}},za=Ba,Ga=(a("fa34"),Object(m["a"])(za,Ua,$a,!1,null,null,null)),Ha=Ga.exports;h()(Ga,{VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:ut["a"],VDatePicker:Nt["a"],VDivider:pt["a"],VFlex:A["a"],VForm:Ot["a"],VLayout:O["a"],VMenu:Pt["a"],VSelect:ot["a"],VTextField:it["a"]});var qa,Ya,Ja={name:"IndexTH",components:{ComponentAdd:La,ComponentEdit:Ha},computed:{esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol}},data:function(){return{agregarTempHumd:!1,editarTempHumd:!1,dataTempHum:{},rows:[],loading:!1,loadingPDF:!1,date:(new Date).toISOString().substr(0,7),menu:!1,modal:!1,noTermohigrometro:["General","#1","#2","#3","#4","#5","#6","#7","#8","#9","#10","#11","#12","Refri #1","Refri #2","Refri #3","Refri #4"],termohigrometroSelected:"General"}},methods:{editarTempAndHumedad:function(t){this.editarTempHumd=!0,this.dataTempHum=t},eliminarTempAndHumedad:function(t){var e=this;tt.a.fire({title:"Estas seguro de eliminar este registro?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Eliminar",denyButtonText:"Cancelar"}).then(function(){var a=Object(K["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o.isConfirmed){a.next=10;break}return a.prev=1,a.next=4,d.a.delete("temp_humedad/".concat(t));case 4:e.getTempHumedad(e.date,e.termohigrometroSelected),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),alert("Ocurrio un error al tratar de eliminar");case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(t){return a.apply(this,arguments)}}())},getTempHumedad:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e,a){var o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,d.a.get("/temp_humedad",{params:{date:e,termo:a}});case 3:o=t.sent,i=o.data,this.rows=i.list,this.loading=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),closeModal:function(){this.agregarTempHumd=!1,this.editarTempHumd=!1,this.getTempHumedad(this.date,this.termohigrometroSelected)},formatearFecha:function(t){var e=t.split("T")[0].split("-");return"".concat(e[2],"/").concat(e[1],"/").concat(e[0])},filtrar:function(){this.getTempHumedad(this.date,this.termohigrometroSelected)},getReporte:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loadingPDF=!0,t.next=4,d.a.post("/temp_humedad/pdf",{rows:this.rows},{responseType:"blob"});case 4:e=t.sent,a=e.data,o=new Blob([a],{type:"application/pdf"}),i=URL.createObjectURL(o),window.open(i,"_blank"),this.loadingPDF=!1,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),this.loadingPDF=!1;case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.getTempHumedad(this.date,"General")}},Xa=Ja,Za=(a("f256"),Object(m["a"])(Xa,Na,Pa,!1,null,null,null)),Qa=Za.exports;h()(Za,{VBtn:b["a"],VDataTable:vt["a"],VDatePicker:Nt["a"],VDialog:mt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VMenu:Pt["a"],VSelect:ot["a"],VSpacer:y["a"],VTextField:it["a"]});var Ka={},Wa=Object(m["a"])(Ka,qa,Ya,!1,null,null,null),to=Wa.exports,eo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"titleModuloTH",attrs:{md6:""}},[a("label",{staticStyle:{position:"relative",left:"175px"}},[t._v("\n        Listado de Actas de Entrega\n      ")])]),a("v-flex",{staticClass:"btnModuloTH",attrs:{md6:""}},[t.esGuardaAlmacen?a("v-btn",{attrs:{color:"success"},on:{click:function(e){return t.$router.push({name:"add_acta_entrega"})}}},[t._v("\n        Agregar\n      ")]):t._e()],1),a("v-flex",{staticClass:"btnModuloTH",staticStyle:{position:"relative",bottom:"110px"},attrs:{md12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.rows},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center"},[a("v-icon",{staticClass:"mr-3",attrs:{small:""},on:{click:function(a){return t.$router.push({name:"detalle_acta_entrega",params:{acta_id:e.item._id}})}}},[t._v("\n              tab\n            ")]),e.item.estado?a("v-icon",{attrs:{small:""},on:{click:function(a){return t.inactivarActaEntrega(e.item._id,e.item.detalles)}}},[t._v("\n              delete\n            ")]):t._e()],1),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.nombreEntidadContratante))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.rucEntidadContratante))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t.formatearFecha(e.item.fecha)))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.lugar))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.RPIS))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.numContrato))]),a("td",{staticClass:"text-xs-left",style:1==e.item.estado?"color: green":"color: red"},[t._v("\n            "+t._s(1==e.item.estado?"Aceptado":"Cancelado")+"\n          ")])]}}])})],1)],1)},ao=[],oo={name:"IndexActaEntrega",computed:{esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol}},data:function(){return{headers:[{text:"Acciones",value:"acciones"},{text:"Contratante",value:"contratante"},{text:"RUC contratante",value:"fat"},{text:"Fecha",value:"fecha"},{text:"Lugar",value:"lugar"},{text:"Subsistema RPIS",value:"rpis"},{text:"N° Contrato",value:"n_contrato"},{text:"Estado",value:"estado"}],rows:[]}},methods:{formatearFecha:function(t){var e=t.split("T")[0].split("-");return"".concat(e[2],"/").concat(e[1],"/").concat(e[0])},getActasEntregas:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/acta_entrega");case 2:e=t.sent,a=e.data,this.rows=a.list;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),inactivarActaEntrega:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e,a){var o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:tt.a.fire({title:"Estas seguro de Cancelar esta Acta de Entrega?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Cancelar",denyButtonText:"Cancelar"}).then(function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(i){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i.isConfirmed){t.next=12;break}return t.prev=1,t.next=4,d.a.post("/acta_entrega/delete/".concat(e),{detalles:a});case 4:r=t.sent,s=r.data,o.mostrarAlerta(s.msg,"success"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),o.mostrarAlerta("Ocurrio un error, contactar con el Admin","warning");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()},mounted:function(){this.getActasEntregas()}},io=oo,ro=(a("e21e"),Object(m["a"])(io,eo,ao,!1,null,null,null)),so=ro.exports;h()(ro,{VBtn:b["a"],VDataTable:vt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"]});var no=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"titleModuloTH",staticStyle:{height:"30px",display:"flex"},attrs:{md4:""}},[a("v-btn",{staticClass:"white--text",attrs:{type:"submit",color:"blue-grey"},on:{click:function(e){return t.$router.push({name:"acta_entrega"})}}},[t._v("\n        REgresar\n      ")])],1),a("v-flex",{staticClass:"titleModuloTH",staticStyle:{height:"30px",display:"flex"},attrs:{md8:""}},[t._v("\n      Agregar Acta de Entrega\n    ")]),[a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{type:"text",label:"Lugar",required:""},model:{value:t.formActaEntrega.lugar,callback:function(e){t.$set(t.formActaEntrega,"lugar",e)},expression:"formActaEntrega.lugar"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-card-text",{staticClass:"pb-0",attrs:{xs6:""}},[a("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-text-field",t._g({attrs:{"persistent-hint":"","prepend-icon":"event",label:"Fecha"},on:{blur:function(e){t.date=t.parseDate(t.dateFormatted)}},model:{value:t.dateFormatted,callback:function(e){t.dateFormatted=e},expression:"dateFormatted"}},o))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[a("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Subsistema RPIS"},model:{value:t.formActaEntrega.RPIS,callback:function(e){t.$set(t.formActaEntrega,"RPIS",e)},expression:"formActaEntrega.RPIS"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Nombre de la entidad contratante",required:""},model:{value:t.formActaEntrega.nombreEntidadContratante,callback:function(e){t.$set(t.formActaEntrega,"nombreEntidadContratante",e)},expression:"formActaEntrega.nombreEntidadContratante"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{type:"number",label:"RUC entidad contratante",required:""},model:{value:t.formActaEntrega.rucEntidadContratante,callback:function(e){t.$set(t.formActaEntrega,"rucEntidadContratante",e)},expression:"formActaEntrega.rucEntidadContratante"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Dirección del contratante",required:""},model:{value:t.formActaEntrega.direccionContratante,callback:function(e){t.$set(t.formActaEntrega,"direccionContratante",e)},expression:"formActaEntrega.direccionContratante"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Nombre del proveedor",required:""},model:{value:t.formActaEntrega.nombreProveedor,callback:function(e){t.$set(t.formActaEntrega,"nombreProveedor",e)},expression:"formActaEntrega.nombreProveedor"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{type:"number",label:"RUC proveedor",required:""},model:{value:t.formActaEntrega.rucProveedor,callback:function(e){t.$set(t.formActaEntrega,"rucProveedor",e)},expression:"formActaEntrega.rucProveedor"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{type:"text",label:"Tipo de contrato",required:""},model:{value:t.formActaEntrega.tipoContrato,callback:function(e){t.$set(t.formActaEntrega,"tipoContrato",e)},expression:"formActaEntrega.tipoContrato"}})],1),a("v-flex",{staticClass:"py-0",attrs:{xs3:""}}),a("v-flex",{staticClass:"py-0",attrs:{xs5:""}},[a("v-text-field",{attrs:{type:"number",label:"Numero de contrato (Ej: CE-20170000XXXXXX)",required:""},model:{value:t.formActaEntrega.numContrato,callback:function(e){t.$set(t.formActaEntrega,"numContrato",e)},expression:"formActaEntrega.numContrato"}})],1),a("v-flex",{staticClass:"pt-0",attrs:{xs5:""}},[a("v-text-field",{attrs:{type:"text",label:"Código",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCodigo.apply(null,arguments)}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),a("v-flex",{staticClass:"pt-0",attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.rows,"rows-per-page-items":[30,60,90]},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.quitar(e.index)}}},[t._v("\n                        delete\n                      ")])],1),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.codigoProducto.descripcion)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.nombreComercial)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.demasDatos.codigoPresentacion.descripcion)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.demasDatos.detalleConcentracion)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.registroSanitario)+"\n                    ")]),a("td",{staticClass:"text-xs-center px-4"},[t._v("\n                      "+t._s(e.item.codigoLote)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(t.mostrarDiferenciasMeses(e.item.fechaCaducidad,e.index))+" MESES\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(t.formatearFecha(e.item.fechaElaboracion))+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(t.formatearFecha(e.item.fechaCaducidad))+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.fraccionesTotales)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{staticClass:"centrar-text",attrs:{type:"number",required:"",min:"1"},on:{change:function(a){return t.calcularPrecioTotal(e.item.unidades,e.item.p_unitario,e.index)}},model:{value:e.item.unidades,callback:function(a){t.$set(e.item,"unidades",a)},expression:"props.item.unidades"}})],1),a("td",{staticClass:"text-xs-center"},[a("v-text-field",{staticClass:"centrar-text",attrs:{type:"number",required:"",min:"0"},on:{change:function(a){return t.calcularPrecioTotal(e.item.unidades,e.item.p_unitario,e.index)}},model:{value:e.item.p_unitario,callback:function(a){t.$set(e.item,"p_unitario",a)},expression:"props.item.p_unitario"}})],1),a("td",{staticClass:"text-xs-center",staticStyle:{"font-size":"17px"}},[t._v("\n                      "+t._s(e.item.p_total)+"\n                    ")])]}}])})],1),a("v-flex",{staticClass:"pt-0",staticStyle:{"text-align":"right","padding-top":"10px !important"},attrs:{xs12:""}},[a("span",{staticClass:"text-vtotal"},[t._v("TOTAL:")]),a("span",{staticClass:"totalActa"},[t._v("\n                  $"+t._s(t.valorTotal)+"\n                ")])]),a("v-flex",{staticStyle:{"text-align":"center"},attrs:{xs12:"",xs4:""}},[a("v-btn",{staticClass:"px-3",attrs:{type:"submit",color:"success"},on:{click:t.submit}},[t._v("\n                  Guardar\n                ")])],1)],1)],1)]],2)},co=[],lo={name:"AddActaEntrega",computed:{esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol},computedDateFormatted:function(){return this.formatDate(this.date)},valorTotal:function(){var t=0;return this.rows.forEach((function(e){t+=parseFloat(e.p_total)})),t.toFixed(2)}},data:function(t){return{headers:[{text:"Quitar",align:"left",value:"delete"},{text:"Nombre Genérico",value:"nombre_generico",align:"center"},{text:"Nombre Comercial",value:"nombre_generico"},{text:"Forma Farmacéutica",value:"forma_farmaceutica"},{text:"Concentración",value:"concentracion"},{text:"Num. registro sanitario",value:"reg_sanitario"},{text:"Lote",value:"lote"},{text:"Periodo de vida util",value:"per_vida_util"},{text:"F. elaboración",value:"f_elaboracion"},{text:"F. de vencimiento",value:"f_vencimiento"},{text:"Stock Actual",value:"stock_actual"},{text:"Unidades",value:"unidades"},{text:"Precio unitario",value:"p_unit"},{text:"Precio Total",value:"p_total"}],menu1:!1,date:(new Date).toISOString().substr(0,10),dateFormatted:t.formatDate((new Date).toISOString().substr(0,10)),rows:[],formActaEntrega:{lugar:"",RPIS:"",nombreEntidadContratante:"",rucEntidadContratante:"",direccionContratante:"",nombreProveedor:"",rucProveedor:"",tipoContrato:"",numContrato:""},codigo:"",codigoBodega:""}},methods:{mostrarAlerta:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o=tt.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:a,timerProgressBar:!0,didOpen:function(t){t.addEventListener("mouseenter",tt.a.stopTimer),t.addEventListener("mouseleave",tt.a.resumeTimer)}});o.fire({icon:e,title:t})},submit:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.formActaEntrega.lugar.length){t.next=2;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar el lugar","warning"));case 2:if(0!=this.formActaEntrega.RPIS.length){t.next=4;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar el subsistema RPIS","warning"));case 4:if(0!=this.formActaEntrega.nombreEntidadContratante.length){t.next=6;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar el nombre de la entidad Contratante","warning"));case 6:if(0!=this.formActaEntrega.rucEntidadContratante.length){t.next=8;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar el RUC entidad Contratante","warning"));case 8:if(0!=this.formActaEntrega.direccionContratante.length){t.next=10;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar la dirección del contratante","warning"));case 10:if(0!=this.formActaEntrega.nombreProveedor.length){t.next=12;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar el nombre del proveedor","warning"));case 12:if(0!=this.formActaEntrega.rucProveedor.length){t.next=14;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar el RUC del proveedor","warning"));case 14:if(0!=this.formActaEntrega.tipoContrato.length){t.next=16;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar el tipo de contrato","warning"));case 16:if(0!=this.formActaEntrega.numContrato.length){t.next=18;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar el numero de contrato","warning"));case 18:if(0!=this.rows.length){t.next=20;break}return t.abrupt("return",this.mostrarAlerta("Debes ingresar al menos un articulo","warning"));case 20:if(e=!1,this.rows.forEach((function(t,a){t.unidades<=0&&(e=!0,i.mostrarAlerta("No pueden haber articulos con cero unidades","warning")),t.p_unitario<=0&&(e=!0,i.mostrarAlerta("No puede haber precios unitarios menor o igual a cero","warning"))})),e){t.next=34;break}return this.formActaEntrega.detalles=this.rows,this.formActaEntrega.fecha=this.date,this.formActaEntrega.totalActaEntrega=this.valorTotal,this.formActaEntrega.distribuidor=this.$store.state.usuario.codigoDistribuidor,this.formActaEntrega.usuario=this.$store.state.usuario._id,t.next=30,d.a.post("/acta_entrega",this.formActaEntrega);case 30:a=t.sent,o=a.data,this.mostrarAlerta(o.msg,"success"),this.$router.push({name:"acta_entrega"});case 34:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),parseDate:function(t){if(!t)return null;var e=t.split("/"),a=Object(ja["a"])(e,3),o=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;void 0==o||d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},buscarCodigo:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/buscaCodigo?data="+this.codigo+"&codigoBodega="+t.codigoBodega,a).then((function(e){if(206==e.status)tt.a.fire("Aviso",e.data.message,"error");else if(e.data.length>1)tt.a.fire("Aviso","Se estan mostrando mas de un resultado \n deberia buscar en pantalla.","error");else{var a=t.rows.some((function(t){return t.codigoLote==e.data.codigoLote}));a?tt.a.fire("Aviso","Este articulo ya se encuentra agregado","error"):(e.data.vidaUtil=0,e.data.unidades=0,e.data.p_unitario=0,e.data.p_total=0,t.getDetallesProducto(e.data.codigoProducto._id).then((function(a){e.data.demasDatos=a,t.rows.unshift(e.data)}))),t.codigo=""}})).catch((function(t){console.log(t)}))},getDetallesProducto:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/acta_entrega/detalleProducto/details/".concat(e));case 2:return a=t.sent,o=a.data,t.abrupt("return",o.producto[0]);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),formatearFecha:function(t){var e=t.split("T")[0].split("-");return"".concat(e[2],"/").concat(e[1],"/").concat(e[0])},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(ja["a"])(e,3),o=a[0],i=a[1],r=a[2];return"".concat(i,"/").concat(r,"/").concat(o)},calcularDiferenciasMeses:function(t,e){var a;return a=12*(e.getFullYear()-t.getFullYear()),a-=t.getMonth(),a+=e.getMonth(),a<=0?0:a},mostrarDiferenciasMeses:function(t,e){var a=t.split("T"),o=this.calcularDiferenciasMeses(new Date(this.date),new Date(a[0]));return this.rows[e].vidaUtil=0!=o?o+2:o,o},calcularPrecioTotal:function(t,e,a){var o=t*e;this.rows[a].p_total=o.toFixed(2)},quitar:function(t){this.rows.splice(t,1)}},watch:{date:function(t){this.dateFormatted=this.formatDate(this.date)},"formActaEntrega.tipoContrato":function(t){this.formActaEntrega.tipoContrato=t.toUpperCase()},"formActaEntrega.direccionContratante":function(t){this.formActaEntrega.direccionContratante=t.toUpperCase()},"formActaEntrega.nombreProveedor":function(t){this.formActaEntrega.nombreProveedor=t.toUpperCase()},"formActaEntrega.nombreEntidadContratante":function(t){this.formActaEntrega.nombreEntidadContratante=t.toUpperCase()},"formActaEntrega.RPIS":function(t){this.formActaEntrega.RPIS=t.toUpperCase()},"formActaEntrega.lugar":function(t){this.formActaEntrega.lugar=t.toUpperCase()}},mounted:function(){this.obtenerBodega()}},uo=lo,vo=(a("1cae"),Object(m["a"])(uo,no,co,!1,null,null,null)),mo=vo.exports;h()(vo,{VBtn:b["a"],VCardText:x["b"],VContainer:C["a"],VDataTable:vt["a"],VDatePicker:Nt["a"],VFlex:A["a"],VIcon:D["a"],VLayout:O["a"],VMenu:Pt["a"],VTextField:it["a"]});var po=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"titleModuloTH",staticStyle:{height:"30px"},attrs:{md12:""}},[t._v("\n      Detalle Acta de Entrega\n    ")]),[a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{type:"text",label:"Lugar",required:""},model:{value:t.formActaEntrega.lugar,callback:function(e){t.$set(t.formActaEntrega,"lugar",e)},expression:"formActaEntrega.lugar"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-card-text",{staticClass:"pb-0",attrs:{xs6:""}},[a("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-text-field",t._g({attrs:{"persistent-hint":"","prepend-icon":"event",label:"Fecha"},on:{blur:function(e){t.date=t.parseDate(t.dateFormatted)}},model:{value:t.dateFormatted,callback:function(e){t.dateFormatted=e},expression:"dateFormatted"}},o))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[a("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Subsistema RPIS"},model:{value:t.formActaEntrega.RPIS,callback:function(e){t.$set(t.formActaEntrega,"RPIS",e)},expression:"formActaEntrega.RPIS"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Nombre de la entidad contratante",required:""},model:{value:t.formActaEntrega.nombreEntidadContratante,callback:function(e){t.$set(t.formActaEntrega,"nombreEntidadContratante",e)},expression:"formActaEntrega.nombreEntidadContratante"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{type:"number",label:"RUC entidad contratante",required:""},model:{value:t.formActaEntrega.rucEntidadContratante,callback:function(e){t.$set(t.formActaEntrega,"rucEntidadContratante",e)},expression:"formActaEntrega.rucEntidadContratante"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Dirección del contratante",required:""},model:{value:t.formActaEntrega.direccionContratante,callback:function(e){t.$set(t.formActaEntrega,"direccionContratante",e)},expression:"formActaEntrega.direccionContratante"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Nombre del proveedor",required:""},model:{value:t.formActaEntrega.nombreProveedor,callback:function(e){t.$set(t.formActaEntrega,"nombreProveedor",e)},expression:"formActaEntrega.nombreProveedor"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{type:"number",label:"RUC proveedor",required:""},model:{value:t.formActaEntrega.rucProveedor,callback:function(e){t.$set(t.formActaEntrega,"rucProveedor",e)},expression:"formActaEntrega.rucProveedor"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{type:"text",label:"Tipo de contrato",required:""},model:{value:t.formActaEntrega.tipoContrato,callback:function(e){t.$set(t.formActaEntrega,"tipoContrato",e)},expression:"formActaEntrega.tipoContrato"}})],1),a("v-flex",{staticClass:"py-0",attrs:{xs3:""}}),a("v-flex",{staticClass:"py-0",attrs:{xs5:""}},[a("v-text-field",{attrs:{type:"number",label:"Numero de contrato (Ej: CE-20170000XXXXXX)",required:""},model:{value:t.formActaEntrega.numContrato,callback:function(e){t.$set(t.formActaEntrega,"numContrato",e)},expression:"formActaEntrega.numContrato"}})],1),a("v-flex",{staticClass:"pt-0",attrs:{xs5:""}},[a("v-text-field",{attrs:{type:"text",label:"Código",required:"",readonly:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCodigo.apply(null,arguments)}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),a("v-flex",{staticClass:"pt-0",attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.rows,"rows-per-page-items":[30,60,90]},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.demasDatos.descripcion)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.producto_id.nombreComercial)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.demasDatos.codigoPresentacion.descripcion)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.demasDatos.detalleConcentracion)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.producto_id.registroSanitario)+"\n                    ")]),a("td",{staticClass:"text-xs-center px-4"},[t._v("\n                      "+t._s(e.item.producto_id.codigoLote)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.vidaUtil)+" MESES\n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(t.formatearFecha(e.item.producto_id.fechaElaboracion))+" \n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(t.formatearFecha(e.item.producto_id.fechaCaducidad))+" \n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      "+t._s(e.item.unidades)+" \n                    ")]),a("td",{staticClass:"text-xs-center"},[t._v("\n                      $"+t._s(e.item.p_unitario)+" \n                    ")]),a("td",{staticClass:"text-xs-center",staticStyle:{"font-size":"17px"}},[t._v("\n                      $"+t._s(e.item.p_total)+" \n                    ")])]}}])})],1),a("v-flex",{staticClass:"pt-0",staticStyle:{"text-align":"right","padding-top":"10px !important"},attrs:{xs12:""}},[a("span",{staticClass:"text-vtotal"},[t._v("TOTAL:")]),a("span",{staticClass:"totalActa"},[t._v("\n                  $"+t._s(t.valorTotal)+"\n                ")])])],1)],1)]],2)},ho=[],fo={name:"DetalleActaEntrega",computed:{esGuardaAlmacen:function(){return"609ed47286d0416b4a050c58"==this.$store.state.usuario.rol},computedDateFormatted:function(){return this.formatDate(this.date)},valorTotal:function(){var t=0;return this.rows.forEach((function(e){t+=parseFloat(e.p_total)})),t.toFixed(2)}},data:function(t){return{headers:[{text:"Nombre Genérico",value:"nombre_generico",align:"center"},{text:"Nombre Comercial",value:"nombre_generico"},{text:"Forma Farmacéutica",value:"forma_farmaceutica"},{text:"Concentración",value:"concentracion"},{text:"Num. registro sanitario",value:"reg_sanitario"},{text:"Lote",value:"lote"},{text:"Periodo de vida util",value:"per_vida_util"},{text:"F. elaboración",value:"f_elaboracion"},{text:"F. de vencimiento",value:"f_vencimiento"},{text:"Unidades",value:"unidades"},{text:"Precio unitario",value:"p_unit"},{text:"Precio Total",value:"p_total"}],menu1:!1,date:(new Date).toISOString().substr(0,10),dateFormatted:t.formatDate((new Date).toISOString().substr(0,10)),rows:[],formActaEntrega:{lugar:"",RPIS:"",nombreEntidadContratante:"",rucEntidadContratante:"",direccionContratante:"",nombreProveedor:"",rucProveedor:"",tipoContrato:"",numContrato:""},codigo:"",codigoBodega:""}},methods:{mostrarAlerta:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o=tt.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:a,timerProgressBar:!0,didOpen:function(t){t.addEventListener("mouseenter",tt.a.stopTimer),t.addEventListener("mouseleave",tt.a.resumeTimer)}});o.fire({icon:e,title:t})},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=Object(ja["a"])(e,3),o=a[0],i=a[1],r=a[2];return"".concat(r,"-").concat(o.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},obtenerBodega:function(){var t=this,e={Token:this.$store.state.token},a={headers:e},o=this.$store.state.usuario.codigoDistribuidor;void 0==o||d.a.get("bodega/query?codigoDistribuidor="+o,a).then((function(e){t.codigoBodega=e.data._id})).catch((function(t){console.log(t)}))},getActaEntrega:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(){var e,a,o,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/acta_entrega/acta_by_id/".concat(this.$route.params.acta_id));case 2:e=t.sent,a=e.data.acta_entrega,this.formActaEntrega.lugar=a[0].lugar,this.formActaEntrega.RPIS=a[0].RPIS,this.formActaEntrega.nombreEntidadContratante=a[0].nombreEntidadContratante,this.formActaEntrega.rucEntidadContratante=a[0].rucEntidadContratante,this.formActaEntrega.direccionContratante=a[0].direccionContratante,this.formActaEntrega.nombreProveedor=a[0].nombreProveedor,this.formActaEntrega.rucProveedor=a[0].rucProveedor,this.formActaEntrega.tipoContrato=a[0].tipoContrato,this.formActaEntrega.numContrato=a[0].numContrato,this.date=a[0].fecha.split("T")[0],o=this,i=new Promise((function(t,e){var o=a[0].detalles.length;a[0].detalles.forEach(function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(a,i){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.getDetallesProducto(a.producto_id.codigoProducto);case 2:s=e.sent,a.demasDatos=s,i+1==o&&t("ok");case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())})),i.then((function(t){o.rows=a[0].detalles}));case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDetallesProducto:function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(e){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/acta_entrega/detalleProducto/details/".concat(e));case 2:return a=t.sent,o=a.data,t.abrupt("return",o.producto[0]);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),buscarCodigo:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};this.$store.state.usuario.codigoDistribuidor,this.$store.state.usuario._id;d.a.get("inventario/buscaCodigo?data="+this.codigo+"&codigoBodega="+t.codigoBodega,a).then((function(e){if(206==e.status)tt.a.fire("Aviso",e.data.message,"error");else if(e.data.length>1)tt.a.fire("Aviso","Se estan mostrando mas de un resultado \n deberia buscar en pantalla.","error");else{var a=t.rows.some((function(t){return t.codigoLote==e.data.codigoLote}));a?tt.a.fire("Aviso","Este articulo ya se encuentra agregado","error"):(e.data.vidaUtil=0,e.data.unidades=0,e.data.p_unitario=0,e.data.p_total=0,t.rows.unshift(e.data)),t.codigo=""}})).catch((function(t){console.log(t)}))},formatearFecha:function(t){var e=t.split("T")[0].split("-");return"".concat(e[2],"/").concat(e[1],"/").concat(e[0])},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(ja["a"])(e,3),o=a[0],i=a[1],r=a[2];return"".concat(i,"/").concat(r,"/").concat(o)},calcularDiferenciasMeses:function(t,e){var a;return a=12*(e.getFullYear()-t.getFullYear()),a-=t.getMonth(),a+=e.getMonth(),a<=0?0:a},mostrarDiferenciasMeses:function(t,e){var a=t.split("T"),o=this.calcularDiferenciasMeses(new Date(this.date),new Date(a[0]))+2;return this.rows[e].vidaUtil=o,o},calcularPrecioTotal:function(t,e,a){var o=t*e;this.rows[a].p_total=o.toFixed(2)}},watch:{date:function(t){this.dateFormatted=this.formatDate(this.date)},"formActaEntrega.tipoContrato":function(t){this.formActaEntrega.tipoContrato=t.toUpperCase()},"formActaEntrega.direccionContratante":function(t){this.formActaEntrega.direccionContratante=t.toUpperCase()},"formActaEntrega.nombreProveedor":function(t){this.formActaEntrega.nombreProveedor=t.toUpperCase()},"formActaEntrega.nombreEntidadContratante":function(t){this.formActaEntrega.nombreEntidadContratante=t.toUpperCase()},"formActaEntrega.RPIS":function(t){this.formActaEntrega.RPIS=t.toUpperCase()},"formActaEntrega.lugar":function(t){this.formActaEntrega.lugar=t.toUpperCase()}},mounted:function(){this.obtenerBodega(),this.getActaEntrega()}},bo=fo,go=(a("b90a"),Object(m["a"])(bo,po,ho,!1,null,null,null)),xo=go.exports;h()(go,{VCardText:x["b"],VContainer:C["a"],VDataTable:vt["a"],VDatePicker:Nt["a"],VFlex:A["a"],VLayout:O["a"],VMenu:Pt["a"],VTextField:it["a"]}),o["a"].use(L["a"]);var Co=new L["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:X,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/egresos",name:"egresos",component:Da,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/temp_humedad",name:"temp_humedad",component:Qa,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/consultacuentasporpagar",name:"consultacuentasporpagar",component:ga,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/consultaretenciones",name:"consultaretenciones",component:va,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/perchas",name:"perchas",component:sa,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/asignarperchas",name:"asignarperchas",component:Be,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/secuenciales",name:"secuenciales",component:ta,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/retenciones",name:"retenciones",component:Je,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/cuarentena",name:"cuarentena",component:je,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/compras",name:"compras",component:ke,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/clientes",name:"clientes",component:_e,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/usuarios",name:"usuarios",component:he,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/crearfabricantes",name:"crearfabricantes",component:le,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/creardistribuidores",name:"creardistribuidores",component:oe,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/crearbodegas",name:"crearbodegas",component:Qt,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/inventario",name:"inventario",component:Ft,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/proveedores",name:"proveedores",component:ft,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/facturas",name:"facturas",component:Ht,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/login",name:"login",component:st,meta:{libre:!0}},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/set-credenciales",name:"set-credenciales",component:Ra,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/vencimiento_productos",name:"vencimiento_productos",component:to,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/acta_entrega",name:"acta_entrega",component:so,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/add_acta_entrega",name:"add_acta_entrega",component:mo,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}},{path:"/detalle_acta_entrega/:acta_id",name:"detalle_acta_entrega",component:xo,meta:{contabilidad:!0,administrador:!0,guardaalmacen:!0,compraspublica:!0,supervisor:!0,gerente:!0,facturacion:!0,quimico:!0}}]});Co.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.libre}))?a():z.state.usuario&&"609ed2679b1f0569cef1bf4d"==z.state.usuario.rol?t.matched.some((function(t){return t.meta.administrador}))&&a():z.state.usuario&&"609ed45086d0416b4a050c57"==z.state.usuario.rol?t.matched.some((function(t){return t.meta.gerente}))&&a():z.state.usuario&&"609ed47286d0416b4a050c58"==z.state.usuario.rol?t.matched.some((function(t){return t.meta.guardaalmacen}))&&a():z.state.usuario&&"609ed47b86d0416b4a050c59"==z.state.usuario.rol?t.matched.some((function(t){return t.meta.contabilidad}))&&a():z.state.usuario&&"609ed48086d0416b4a050c5a"==z.state.usuario.rol?t.matched.some((function(t){return t.meta.compraspublica}))&&a():z.state.usuario&&"609ed48786d0416b4a050c5b"==z.state.usuario.rol?t.matched.some((function(t){return t.meta.supervisor}))&&a():z.state.usuario&&"60c0e96c13a9bc08b085f378"==z.state.usuario.rol||z.state.usuario&&"6425b4e63015a625b227f4b7"==z.state.usuario.rol?t.matched.some((function(t){return t.meta.facturacion}))&&a():Co.push({path:"login"}).catch((function(){}))}));var _o=Co;o["a"].config.productionTip=!1,d.a.defaults.baseURL="https://contable-service.onrender.com/api/",new o["a"]({router:_o,store:z,render:function(t){return t(w)}}).$mount("#app")},"59b1":function(t,e,a){},"64a9":function(t,e,a){},6843:function(t,e,a){"use strict";a("fb92")},"93ff":function(t,e,a){},"949b":function(t,e,a){},b90a:function(t,e,a){"use strict";a("f139")},bcf9:function(t,e,a){},dd16:function(t,e,a){"use strict";a("93ff")},e21e:function(t,e,a){"use strict";a("0136")},f139:function(t,e,a){},f256:function(t,e,a){"use strict";a("59b1")},fa34:function(t,e,a){"use strict";a("508c")},fb92:function(t,e,a){}});
//# sourceMappingURL=app.63703f57.js.map